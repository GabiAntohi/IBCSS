if (self.CavalryLogger) { CavalryLogger.start_js(["0lYF+"]); }

__d("VideoComposerActionTypes",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({ALL_TABS_BOOTLOADED:"",BACKDATE_CONFIRM:"",CLOSE_CONFIRM_DIALOG:"",CLOSE_TITLE_ERROR_TOOLTIP:"",CLOSE_PRIMARY_ERROR_DIALOG:"",EDIT_EXPIRATION:"",EDIT_TABS_LOADED:"",EDIT_SCHEDULED_TIME:"",EDIT_POST_END_TIME:"",EDIT_SHOULD_EXPIRE:"",EDIT_SHOULD_PUBLISH:"",EXIT_DIALOG:"",EXIT_DIALOG_ATTEMPT:"",EXIT_DIALOG_REPLACE_FILE:"",EXIT_DIALOG_SAVE_DRAFT:"",FILE_ADDED:"",MINIMIZE_DIALOG:"",HIDE_MISSING_VIDEO_TYPE_TOOLTIP:"",HIGHLIGHT_MISSING_VIDEO_TYPE:"",HIGHLIGHT_TITLE_WITH_ERROR_TOOLTIP:"",INITIALIZE_UPLOAD_COMPOSER:"",INITIALIZE_CROSSPOST_COMPOSER:"",INITIALIZE_EDIT_COMPOSER:"",INIT_VIDEO_UPLOADER:"",LOAD_VIDEO_DATA_FOR_ID:"",NAVIGATED_FROM_PAGE:"",METADATA_LOADED_FROM_HTML_PLAYER:"",METADATA_LOADED_FROM_VIDEO_UPLOADER:"",MOUNT_COMPOSER_DIALOG:"",POST_FAILED:"",POST_FINISHED:"",PUBLISH_POST:"",PREMIERE_REPLACE_FILE:"",INITIALIZE_COMPOSER_PREVIEW:"",RESET_COMPOSER:"",SET_COMPOSER_UPSELL_ELIGIBILITY_STATUS:"",SET_COMPOSER_SHOWN:"",SET_PASSES_UPSELL_GK:"",SAVE_POST_DATA_FOR_PAGES_COMPOSER:"",SELECT_TAB:"",UPDATE_IS_FEATURED_VIDEO:"",UPDATE_SHOW_VIDEO_TYPE:"",UPDATE_TITLE:"",UPLOAD_FAILED:"",UPLOAD_FINISHED:"",UPLOAD_PROGRESSED:"",POST_REQUEST_SENT:"",CLOSE_PUBLISH_CONFIRM_DIALOG:"",SAVE_EDITED_VIDEO:"",SAVE_EDITED_VIDEO_FAILURE:"",SAVE_EDITED_VIDEO_SUCCESS:"",SCHEDULE_CONFIRM:"",SENDING_POST_REQUEST:"",SET_VIDEO_START_END_TIME:"",SPHERICAL_METADATA_PARSED:"",PREMIERE_CONFIRM:"",SAVE_AS_DRAFT:"",SAVE_AS_DRAFT_ATTEMPT:"",SAVE_AS_DRAFT_ABORT:"",SAVE_AS_DRAFT_CONFIRM:"",SELECT_EDITING_PUBLISH_ACTION:"",TAB_LOAD_ERROR:"",UPDATE_PREMIERE_DATA:"",CANCEL_UPLOAD:"",SHOW_RIGHTS_CONFIRM_DIALOG:"",HIDE_RIGHTS_CONFIRM_DIALOG:"",OPEN_PUBLISH_DRAWER:"",CLOSE_PUBLISH_DRAWER:"",SET_PUBLISHING_TYPE:"",SET_POST_TYPE:"",SET_SCHEDULE_TYPE:"",SET_BACKDATE_HIDE_FROM_NEWS_FEED:"",SET_BACKDATE_DATE:"",SET_PREMIERE_DATE:"",SET_PREMIERE_FEED_BACKGROUND_IMAGE:"",SET_PREMIERE_NOW_UPSELL_DIALOG_SHOWN:"",TAB_BOOTLOAD_ERROR:"",TOGGLE_PREMIERE_NOW:"",TOGGLE_PREMIERE_WITH_SHOW_OR_SEASON:"",UPDATE_PREMIERE_CUSTOM_NAME:"",UPDATE_SHOULD_PREMIERE:"",UPDATE_PREMIERE_LIVING_ROOM_REMOVE_UNOWNED_VIDEOS:"",UPDATE_PREMIERE_LIVING_ROOM_VIDEOS:"",UPDATE_PREMIERE_AUDIENCE:"",POST_REQUEST_INVALID:"",PAGE_STORY_CREATION_ATTEMPT:"",PAGE_STORY_CREATION_FAILURE:"",PAGE_STORY_CREATION_SUCCESS:"",BOOTLOAD_DEFAULT_TAB_PARAMETERS:"",BOOTLOAD_CROSSPOST_DEFAULT_TAB:"",BOOTLOAD_DEFAULT_EDIT_PARAMS:"",CHANGE_GAME:"",HIDE_MISSING_FUNDED_CONTENT_PROGRAM_TYPE_TOOLTIP:"",HIGHLIGHT_MISSING_FUNDED_CONTENT_PROGRAM_TYPE_TOOLTIP:"",PAUSE_VIDEO_PREVIEW:"",SET_IS_VIDEO_PREVIEW_PAUSED:"",TOGGLE_CROSSPOST_TO_PARENT:"",UPDATE_CONTENT_TAGS:"",UPDATE_BROWSE_TAGS:"",UPDATE_HISTORY_TAGS:"",UPDATE_IS_EXPLICITLY_TAGGED_AS_GAMING_VIDEO:"",UPDATE_SUGGESTED_TAGS:"",UPDATE_TAG_SUGGESTION_SOURCE:"",UPDATE_DESCRIPTION_EDITOR_STATE:"",UPDATE_PLAYLIST_IDS:"",UPDATE_SEASON_ID_OLD:"",UPDATE_VIDEO_LIST_OPTIONS:"",UPDATE_VIDEO_PREVIEW_CONTROLLER:"",UPDATE_FUNDED_CONTENT_PROGRAM:"",USER_PLAYED_VIDEO_PREVIEW:"",AGREE_VIDEO_RIGHTS:"",BOOTLOAD_AD_BREAK_PARAMETERS:"",DELETE_AD_BREAK:"",FETCH_AD_BREAK_EDIT_PARAMETERS:"",INSERT_AD_BREAK:"",SET_AUTO_INSERTION_CHECKBOX_VALUE:"",SET_CAN_USE_AD_BREAKS:"",SET_CURRENT_AD_BREAK:"",SET_CURRENT_PREVIEW_INDEX:"",SET_HAS_USER_SEEN_AD_BREAK_TAB:"",SET_IS_AD_BREAK_AUTO_ADJUSTMENT_ENABLED:"",SET_IS_AD_BREAK_AUTO_INSERTION_ENABLED:"",SET_IS_AD_BREAK_TOGGLE_EDITED:"",SET_IS_BRANDED_CONTENT_VIDEO:"",SET_PREREVIEW_DIALOG:"",SET_SHOULD_SHOW_IMAGE_ADS_MODAL:"",SET_SHOULD_SHOW_IMAGE_ADS_UPSELL:"",SET_SHOULD_USE_IMAGE_ADS:"",SET_IS_IMAGE_ADS_DROPDOWN_EXPANDED:"",SET_SHOW_AD_BREAKS_UPSELL_DIALOG:"",SUBMIT_FOR_PREREVIEW:"",START_PAGE_ONBOARDING:"",SET_PAGE_ONBOARDING_PENDING:"",SHOW_ONBOARDED_PAGE_NUX:"",UPDATE_AD_BREAK_STATUS:"",UPDATE_HOLDOUT_TEST_STATUS:"",UPDATE_THUMBNAIL_URL:"",UPDATE_VPC:"",SET_IS_AUTO_INSERTION_PAGE_ENABLED:"",LOG_MID_ROLL_OPT_OUT_EVENT:"",LOG_SHORTER_CONTENT_MONETIZATION_EVENT:"",CONFIRM_REVIEWABLE_BRANDED_CONTENT:"",SHOW_REVIEWABLE_BRANDED_CONTENT_CONFIRMATION:"",HIDE_REVIEWABLE_BRANDED_CONTENT_CONFIRMATION:"",SHOW_BRANDED_CONTENT_ERROR_DIALOG:"",ADD_CAPTION_ENTRY:"",REMOVE_CAPTION_ENTRY:"",EDIT_CAPTION_ENTRY:"",SET_PREVIEW_ENTRY:"",SET_EDITOR_LANGUAGE:"",SET_EDITOR_LOCALE:"",INITIALIZE_IS_AUTO_CAPTION:"",SET_DEFAULT_CAPTION_LOCALE:"",SET_DISMISS_CAPTIONS_NUX:"",SET_CAPTIONS:"",SET_NEXT_ENTRY:"",PLAY_PREVIEW_ENTRY:"",CONFIRM_CLOSE_DIALOG:"",CANCEL_CLOSE_DIALOG:"",SHOW_EXIT_DIALOG:"",START_SAVE_CAPTION_CHANGESET:"",FINISH_SAVE_CAPTION_CHANGESET:"",INITIALIZE_EDITOR_LANGUAGE:"",RESET_CAPTION_EDITOR:"",RESET_PLAYER:"",SET_CURRENT_PLAY_POSITION:"",SET_VPC:"",SET_DURATION:"",SET_PLAYER_STATE:"",SHOW_CAPTION_EDITOR:"",HIDE_CAPTION_EDITOR:"",INITIALIZE_CAPTION_LANDING_SCREEN:"",GENERATE:"",CANCEL_GENERATE:"",CREATE:"",CAPTION_HAS_TRIMMED:"",EDIT_CAPTIONS_DRAFT:"",DELETE_CAPTIONS_DRAFT:"",DELETE_SUBTITLES_FAILURE:"",DELETE_SUBTITLES_SUCCESS:"",START_SRT_UPLOAD:"",FINISH_SRT_UPLOAD:"",GENERATE_COMPLETE:"",CREATE_COMPLETE:"",SELECT_SPOKEN_LANGUAGE:"",SELECT_SPOKEN_LOCALE:"",FINISHED_FETCH_DRAFTS:"",GENERATE_PROGRESS_UPDATE:"",UPDATE_CAPTION_FILES:"",UPDATE_ERROR_STATE:"",SET_AUTO_GENERATED_CAPTIONS:"",RESET_CAPTIONS_LANDING_TAB:"",RETRY_AUTO_GENERATION:"",RESUME_AUTO_GENERATION:"",RESET_AUTO_GENERATING_LOCALE:"",TRY_RESUME_AUTO_GENERATION:"",INITIALIZE_ALL_CAPTION_FILES:"",BOOTLOAD_PARAMETERS_CAPTIONS_TAB:"",CHANGE_PUBLISHED_STATE:"",PENDING_TO_PUBLISHED:"",CAPTION_LANDING_SCREEN_OPEN_EVENT:"",OLD_COMPOSER_CAPTION_TAB_OPEN_EVENT:"",RESET_OPEN_LANDING_SCREEN_STATE:"",FETCH_CAPTION_EDITOR_CROSSPOST_PARAMS:"",CAPTIONS_EDIT_PARAMS_FETCHED:"",CHANGE_PUBLISHED_STATE_URL:"",DELETE_CAPTIONS_URL:"",DELETE_LOCAL_CAPTION_FILE:"",DELETE_LOCALE_WITHOUT_SUBTITLE:"",FETCHED_AUTO_GEN_V1_SUBTITLE:"",UPDATE_ALL_LOCAL_CAPTIONS:"",UPLOAD_LOCAL_CAPTIONS:"",UPDATE_SHOULD_AUTOPUBLISH_CAPTIONS:"",BOOTLOAD_DISTRIBUTION_TAB:"",BOOTLOAD_DISTRIBUTION_TAB_FOR_EDIT:"",BOOTLOAD_DISTRIBUTION_TAB_FOR_CROSSPOST:"",TOGGLE_ADD_TO_PAGES_STORY:"",TOGGLE_DISPLAY_IN_WATCH_OPTION:"",TOGGLE_NEWS_FEED:"",TOGGLE_EMBEDDING:"",TOGGLE_SECRET_VIDEO:"",CROSSPOST_PAGES_FETCHED:"",TOGGLE_CROSSPOST_PAGE:"",TOGGLE_GRAPHIC_WARNING:"",TOGGLE_BLOCK_SOCIAL:"",TOGGLE_COMMENTATING_PERMISSION:"",CROSSPOST_LINK_CLICKED:"",REFRESH_CROSSPOST_PAGES:"",SHOW_MATURE_CONTENT_APPEAL_FORM:"",HIDE_MATURE_CONTENT_APPEAL_FORM:"",SUBMIT_MATURE_CONTENT_APPEAL_FORM:"",SUBMIT_MATURE_CONTENT_APPEAL_FORM_SUCCESS:"",UPDATE_CHARITY_DATA:"",UPDATE_MATURE_CONTENT_RATING:"",TOGGLE_DRM:"",UPDATE_SHOW_AND_SEASON_ID:"",BOOTLOAD_RIGHTS_PARAMETERS:"",BOOTLOAD_EDIT_RIGHTS_PARAMETERS:"",UPDATE_ATTRIBUTION:"",UPDATE_CATEGORY:"",UPDATE_CATEGORY_REQUIRED_ERROR:"",UPDATE_FB_WHITELISTED_USERS:"",UPDATE_IG_WHITELISTED_USERS:"",UPDATE_MONITORING_TYPE:"",UPDATE_OWNERSHIP_COUNTRIES:"",UPDATE_SHOULD_DETECT_MATCHES:"",UPDATE_MATCH_RULE:"",BOOTLOAD_SPHERICAL_CONTEXT_CONFIG:"",BOOTLOAD_SPHERICAL_DIRECTOR_CROSSPOST_PARAMETERS:"",BOOTLOAD_SPHERICAL_DIRECTOR_EDIT_PARAMETERS:"",BOOTLOAD_SPHERICAL_DIRECTOR_UPLOAD_PARAMETERS:"",PARSE_SPHERICAL_METADATA:"",TOGGLE_SPHERICAL:"",BOOTLOAD_CROSSPOST_THUMBNAILS:"",BOOTLOAD_THUMBNAILS_FOR_EDIT:"",GENERATED_THUMBNAILS:"",GENERATED_THUMBNAILS_FAILED:"",GENERATED_THUMBNAILS_STARTED:"",SELECT_SECTION:"",THUMBNAIL_EDITOR_CANCEL:"",THUMBNAIL_EDITOR_OPEN:"",THUMBNAIL_EDITOR_SAVE:"",THUMBNAIL_PREVIEW_HIDE:"",TOGGLE_SELECTED_GENERATED_THUMBNAIL:"",UPDATE_CUSTOM_THUMBNAIL:"",UPDATE_SCRUBBED_THUMBNAIL:"",UPDATE_SELECTED_THUMBNAIL:"",BOOTLOAD_TRACKING_EDIT_PARAMS:"",UPDATE_CUSTOM_LABELS:"",UPDATE_UNIVERSAL_ID:"",POLLS_ADD_NEW:"",POLLS_BOOTLOAD_EDIT:"",POLLS_CANCEL_CHANGES_ATTEMPT:"",POLLS_CANCEL_CHANGES_ABANDON:"",POLLS_CANCEL_CHANGES_CONFIRM:"",POLLS_CLOSE_EDITOR_ATTEMPT:"",POLLS_CLOSE_EDITOR_ABANDON:"",POLLS_CLOSE_EDITOR_CONFIRM:"",POLLS_DELETE_ATTEMPT:"",POLLS_DELETE_INTERACTION_CANCEL:"",POLLS_DELETE_CONFIRM:"",POLLS_DELETE_SLIDER_ATTEMPT:"",POLLS_DELETE_SLIDER_CONFIRM:"",POLLS_DRAFT_ADD_OPTION:"",POLLS_DRAFT_DELETE_OPTION:"",POLLS_DRAFT_SET_RESULTS_VISIBLE:"",POLLS_DRAFT_SET_DISPLAY_RESULTS_TIMESTAMP:"",POLLS_DRAFT_SET_VOTING_CLOSED_TIMESTAMP:"",POLLS_DRAFT_UPDATE_END_TIME:"",POLLS_DRAFT_UPDATE_OPTION_TEXT:"",POLLS_DRAFT_STICKER_SELECT:"",POLLS_DRAFT_UPDATE_IMAGE_ATTACHMENT:"",POLLS_DRAFT_UPDATE_QUESTION:"",POLLS_DRAFT_UPDATE_SLIDER_EMOJI:"",POLLS_DRAFT_UPDATE_SLIDER_QUESTION:"",POLLS_DRAFT_UPDATE_START_TIME:"",POLLS_DRAFT_TOGGLE_AD_BREAK_POLL:"",POLLS_EDIT_ATTEMPT:"",POLLS_EDIT_ATTEMPT_DISCARD_PREVIOUS:"",POLLS_EDIT_ATTEMPT_HIDE_DIALOG:"",POLLS_EDIT_ATTEMPT_SAVE_PREVIOUS:"",POLLS_EDIT_SLIDER_ATTEMPT:"",POLLS_OPEN_POLLS_FORM_SECTION_ATTEMPT:"",POLLS_OPEN_POLLS_FORM_SECTION_CONFIRM:"",POLLS_OPEN_POLLS_FORM_SECTION_CANCEL:"",POLLS_OPEN_SLIDERS_FORM_SECTION_ATTEMPT:"",POLLS_OPEN_SLIDERS_FORM_SECTION_CONFIRM:"",POLLS_OPEN_SLIDERS_FORM_SECTION_CANCEL:"",POLLS_SAVE:"",POLLS_SAVE_SLIDER:"",POLLS_TOGGLE_WAS_LIVE_VOTING:"",QUESTIONS_ADD_NEW:"",QUESTIONS_CANCEL_CHANGES_ATTEMPT:"",QUESTIONS_CLOSE_EDITOR_ATTEMPT:"",QUESTIONS_DRAFT_UPDATE_END_TIME:"",QUESTIONS_DRAFT_UPDATE_QUESTION:"",QUESTIONS_DRAFT_UPDATE_START_TIME:"",QUESTIONS_EDIT_ATTEMPT:"",QUESTIONS_SAVE:"",QUESTIONS_DELETE_ATTEMPT:"",QUESTIONS_CANCEL_CHANGES_ABANDON:"",QUESTIONS_CLOSE_EDITOR_ABANDON:"",QUESTIONS_CANCEL_CHANGES_CONFIRM:"",QUESTIONS_CLOSE_EDITOR_CONFIRM:"",GAMESHOW_LIGHTWEIGHT_LOAD_AVAILABLE_GAMES_SUCCESS:"",GAMESHOW_LIGHTWEIGHT_LOAD_GAME_SUCCESS:"",GAMESHOW_LIGHTWEIGHT_LOAD_EDIT_DATA_SUCCESS:"",GAMESHOW_LIGHTWEIGHT_SELECT_GAME:"",GAMESHOW_LIGHTWEIGHT_OPEN_EDITOR:"",GAMESHOW_LIGHTWEIGHT_CLOSE_EDITOR_ATTEMPT:"",GAMESHOW_LIGHTWEIGHT_CLOSE_EDITOR_CONFIRM:"",GAMESHOW_LIGHTWEIGHT_CLOSE_EDITOR_CANCEL:"",GAMESHOW_LIGHTWEIGHT_UPDATE_TIMESTAMP_STRING:"",GAMESHOW_LIGHTWEIGHT_ATTEMPT_SAVE_EDITS:"",GAMESHOW_LIGHTWEIGHT_REMOVE_GAME_ATTEMPT:"",GAMESHOW_LIGHTWEIGHT_REMOVE_GAME_CONFIRM:"",GAMESHOW_LIGHTWEIGHT_REMOVE_GAME_CANCEL:"",ATTEMPT_CLOSE_TRIMMING_EDITOR:"",CANCEL_CLOSE_TRIMMING_EDITOR:"",CONFIRM_CLOSE_TRIMMING_EDITOR:"",OPEN_TRIMMING_EDITOR:"",TRIMMING_PREVIEW_BY_START_END:"",TRIMMING_SAVE_DRAFT:"",TRIMMING_SET_END_TIME:"",TRIMMING_SET_PLAYER_STATE:"",TRIMMING_SET_START_TIME:"",TRIMMING_SET_VPC:"",TRIMMING_SET_IS_WAS_LIVE_TRIMMED:"",CLIPPING_ADD_CLIP:"",CLIPPING_EDIT_CLIP:"",CLIPPING_DELETE_CLIP:"",CLIPPING_MANUAL_INPUT:"",CLIPPING_SCRUBBER_INPUT:"",CLIPPING_SET_END_TIME:"",CLIPPING_SET_PLAYER_STATE:"",CLIPPING_SET_START_TIME:"",CLIPPING_SET_VPC:"",CLIPPING_PREVIEW_BY_START_END:"",ATTEMPT_CLOSE_SOUND_EDITOR:"",CANCEL_CLOSE_SOUND_EDITOR:"",CONFIRM_CLOSE_SOUND_EDITOR:"",FINISH_TRACK_SELECTION:"",OPEN_SOUND_EDITOR:"",OPEN_TRACK_SELECTOR:"",SOUND_EDITOR_ADD_NESTING_TRACK_ITEM:"",SOUND_EDITOR_DELETE_ADDED_TRACK:"",SOUND_EDITOR_EDIT_ADDED_TRACK:"",SOUND_EDITOR_REGISTER_SCRUBBER:"",SOUND_EDITOR_SAVE_DRAFT:"",SOUND_EDITOR_SCRUBBER_ADD_TRACK:"",SOUND_EDITOR_SET_SCRUBBER_FOCUS_POSITION:"",SOUND_EDITOR_SET_SOUND_COLLECTION_AUDIO_PLAYER:"",SOUND_EDITOR_SET_SOUND_COLLECTION_FILTER_SELECTION:"",SOUND_EDITOR_SET_SOUND_COLLECTION_IS_PLAYING:"",SOUND_EDITOR_SET_SOUND_COLLECTION_NEXT_PAGE_PROMISE:"",SOUND_EDITOR_SET_SOUND_COLLECTION_PLAY_TRACK:"",SOUND_EDITOR_SET_SOUND_COLLECTION_SEARCH_RESULTS:"",SOUND_EDITOR_SET_SOUND_COLLECTION_TAB:"",SOUND_EDITOR_SET_SOUND_COLLECTION_TAB_LOADING_DONE:"",SOUND_EDITOR_SET_SOUND_COLLECTION_TAB_LOADING_ERROR:"",SOUND_EDITOR_SET_VIDEO_PLAYER_VOLUME:"",SOUND_EDITOR_SET_VIDEO_VOLUME:"",SOUND_EDITOR_SHOW_VIDEO_VOLUME_EDITOR:"",SOUND_EDITOR_SOUND_COLLECTION_INIT:"",SOUND_EDITOR_SOUND_COLLECTION_LOAD_NEXT_PAGE:"",SOUND_EDITOR_SOUND_COLLECTION_LOAD_TABS_DONE:"",SOUND_EDITOR_SOUND_COLLECTION_LOAD_TABS_ERROR:"",SOUND_EDITOR_SOUND_COLLECTION_SELECT_TRACK:"",SOUND_EDITOR_SOUND_COLLECTION_UNSELECT_TRACK:"",SOUND_EDITOR_SUBMIT_EFFECTS_SEARCHSTRING:"",SOUND_EDITOR_SUBMIT_TRACKS_SEARCHSTRING:"",SOUND_EDITOR_UPDATE_ADDED_TRACK:"",SOUND_EDITOR_UPDATE_ADDED_TRACK_VOLUME:"",SOUND_EDITOR_UPDATE_SELECTED_TRACK_NESTING_ITEM_ORDER:"",SOUND_EDITOR_UPDATE_VIDEO_PLAYER_CONTROLLER:"",OPEN_PREVIEW_DIALOG:"",CLOSE_PREVIEW_DIALOG:"",LOG_EVENT:""});e.exports=a}),null);
__d("VideoComposerDialogConstants",[],(function(a,b,c,d,e,f){"use strict";a=16/9;b=664;c=20;d=300;f=b-2*c;var g=60,h=1e3,i=60,j=8,k="2509364215780518",l="2385072711587341";l={SIXTEEN_NINE:a,CREATOR_STUDIO_ANNOUNCEMENT_CARD_CHANNEL_ID:l,DIALOG_WIDTH:b+d,SECONDARY_DIALOG_WIDTH:680,LEFT_SECTION_WIDTH:b,LEFT_SECTION_PADDING:c,MAX_TITLE_LENGTH:255,PREMIERE_PROMOTION_TO_VIDEO_UPLOAD_ID:k,RIGHT_SECTION_WIDTH:d,GENERATED_THUMBNAILS:10,MAX_TAG_COUNT:j,PLAYER_HEIGHT:f/a,PLAYER_WIDTH:f,SCHEDULE_TIME_DELTA:3*i*g*h,THUMBNAIL_HEIGHT:100,THUMBNAIL_WIDTH:178};e.exports=l}),null);
__d("VideoComposerRHCPremiereUpsellUtils",["fbt","gkx"],(function(a,b,c,d,e,f,g){"use strict";c="2055604178103249";d=g._("You can now publish videos as New Releases or Premieres.");f=g._("As soon as your video publishes, people will be able to watch, chat and engage with it in real-time. You will also be able to see how many people are watching the video at the same time. Afterwards, it will appear as a regular video post.");function a(){return b("gkx")("706962")}e.exports={shouldShowPremiereMarketingVideo:a,TITLE:d,DESCRIPTION:f,PREMIERE_MARKETING_VIDEO_ID:c}}),null);
__d("VideoComposerVideoEditorToolTypes",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({TRIM:"",SOUND:""});e.exports={VideoComposerVideoEditorTools:a}}),null);
__d("AdBreakPageOnboardingConstants",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SIGN_TOS_STEP:"sign_tos_step",SETUP_PAYMENT_STEP:"setup_payment_step",TAX_FORM_STEP:"tax_form_step",COMPLETED_STEP:"completed_step",ADD_TAX_FORM_UPDATE:"add_tax_form_update",ADD_PAYOUT_ACCOUNT_UPDATE:"add_payout_account_update",SIGN_TOS_UPDATE:"sign_tos_update",FROM_COMPOSER:"from_composer",FROM_PUB_TOOLS:"from_pub_tools",FROM_DIRECT_LINK:"from_direct_link",FROM_AYMT:"from_aymt",FROM_PUB_TOOLS_MYLOT:"from_pub_tools_mylot",FROM_LANDING_PAGE:"from_landing_page",FROM_CS_ONBOARDING_CARD:"from_cs_onboarding_card",FROM_CS_TOP_PRI_CARD:"from_cs_top_pri_card",FROM_CS_ELIGIBILITY_CARD:"from_cs_eligibility_card",FROM_PAGES_ELIGIBILITY_WIDGET:"from_pages_eligibility_widget",FROM_CS_ANNOUNCEMENT_CARD:"from_cs_announcement_card",FROM_CM_AYMT_FRAMEWORK:"from_cm_aymt_framework",FROM_EMAIL:"from_email",FROM_MEGAPHONE:"from_megaphone",FROM_GROUP_SETTING:"from_group_setting",FROM_CS_PAGES_TAB:"from_cs_pages_tab",FROM_CREATOR_APP:"from_creator_app",FROM_MOBILE_AYMT:"from_mobile_aymt",GAMING_STREAMER_DASHBOARD:"gaming_streamer_dashboard",FAN_FUNDING_SUPPORTER_HUB:"fan_funding_supporter_hub",BCM_CHECK_MY_STATUS:"bcm_check_my_status",BCM_AYMT:"bcm_aymt",BCM_AYMT_HST:"bcm_aymt_hst",BCM_AYMT_INVITATION_LINK:"bcm_aymt_invitation_link",BCM_AYMT_NEW_FEATURE_LINK:"bcm_aymt_new_feature_link",BCM_AYMT_ACTIVATION_REMINDER_LINK:"bcm_aymt_activation_reminder_link",BCM_AYMT_PROJECT_BRIEFS_LINK:"bcm_aymt_project_briefs_link",BCM_AYMT_CS_LINK:"bcm_aymt_cs_link",BCM_PAGE_SETTINGS:"bcm_page_settings",BCM_PAGE_HOME_CARD:"bcm_page_home_card",BCM_QP:"bcm_qp",BCM_MODAL_AFTER_POSTING_BC:"bcm_modal_after_posting_bc",BCM_NOTIFICATION:"bcm_notification",BCM_WELCOME_EMAIL:"bcm_welcome_email",BCM_NEW_FEATURE_EMAIL:"bcm_new_feature_email",BCM_DEACTIVATION_EMAIL:"bcm_deactivation_email",BCM_RFP_ELIGIBILITY_EMAIL:"bcm_rfp_eligibility_email",BCM_UPSELL:"bcm_upsell"})}),null);
__d("VideoComposerSoundEditorConstants",["VideoComposerDialogConstants"],(function(a,b,c,d,e,f){"use strict";a=16;c=300;d=b("VideoComposerDialogConstants").DIALOG_WIDTH-c;f=d-2*a;c=f/b("VideoComposerDialogConstants").SIXTEEN_NINE;d={PLAYER_HEIGHT:c,PLAYER_WIDTH:f,SECTION_PADDING:a};e.exports=d}),null);
__d("VideoComposerDragAndDropScrubberTypes",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({ADD:"",MOVE:"",RESIZE:"",TRACK_VOLUME:""});c=b("keyMirror")({AUDIO:""});d=b("keyMirror")({CIRCLE:"",SQUARE:""});e.exports={VideoComposerDragAndDropScrubberActionTypes:a,VideoComposerDragAndDropScrubberItemSourceNumberShapeTypes:d,VideoComposerDragAndDropScrubberItemSourceTypes:c}}),null);
__d("VideoComposerTrimmingTypes",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({END_TIME:"",START_TIME:""});c=b("keyMirror")({ADBREAKS:"",CAPTION:"",POLLS:"",SOUND_OVERLAY:"",SPHERICAL_DIRECTOR:"",PREMIERE:""});e.exports={TimestampTypes:a,TrimmingDisableReasons:c}}),null);
__d("VideoComposerRightsUtil",["fbt","VideoComposerPublishingTypes","immutable"],(function(a,b,c,d,e,f,g){"use strict";var h=b("VideoComposerPublishingTypes").PublishingType;a=g._("Media category is required for copyrighted content");c=function(){return b("immutable").List([h.AD_BREAK_SUBMIT_FOR_REVIEW,h.BACKDATE,h.PREMIERE,h.PUBLISH_NOW,h.SCHEDULE])};e.exports={getActionsForRightsConfirmDialog:c,errorMessageMissingMediaCategory:a}}),null);
__d("VideoComposerGameshowLightweightTypes",["ImmutableRecordWithV4Types","immutable"],(function(a,b,c,d,e,f){"use strict";a=b("ImmutableRecordWithV4Types").Record;c=a({id:"",text:"",questions:b("immutable").List(),resultsReleaseTimestamp:0});d=a({id:"",text:"",options:b("immutable").List(),releaseTimestamp:0,timeoutSeconds:10});f=a({id:"",text:"",isCorrect:!1});e.exports={GameDataRecordFactory:c,QuestionDataRecordFactory:d,OptionDataRecordFactory:f}}),null);
__d("VideoComposerPollsConstants",["VideoComposerDialogConstants"],(function(a,b,c,d,e,f){"use strict";a=16;c=360;d=b("VideoComposerDialogConstants").DIALOG_WIDTH-c;f=d-2*a;c=f/b("VideoComposerDialogConstants").SIXTEEN_NINE;d={SECTION_PADDING:a,PLAYER_HEIGHT:c,PLAYER_WIDTH:f,INITIAL_POLL_DEFAULT_DURATION:30,MIN_POLL_DURATION:10,MIN_OPTIONS_COUNT:2,MAX_OPTIONS_COUNT:6,MAX_LIVE_OPTIONS_COUNT:4,MAX_QUESTION_LENGTH:80,MAX_OPTION_LENGTH:26,MAX_GK_OPTION_LENGTH:500,IMAGE_ATTACHMENT_HEIGHT:64,IMAGE_ATTACHMENT_WIDTH:64,AFTER_VOTE_TIMESTAMP:-1,NEVER_SHOW_TIMESTAMP:-2};e.exports=d}),null);
__d("VideoComposerPollsTypes",["ImmutableRecordWithV4Types","immutable","keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("ImmutableRecordWithV4Types").Record;c=a({id:"",text:"",stickerID:"",imageURL:null,imageFile:null});d=a({id:"",isPersisted:!1,canChangePollType:!0,options:b("immutable").List(),questionText:"",startTime:"",endTime:"",showResults:!0,displayResultsTimestamp:void 0,votingClosedTimestamp:void 0,isAdBreakPoll:!1,pollType:void 0,optionType:"TEXT"});f=a({id:"",isPersisted:!1,questionText:"",emoji:"",startTime:"",endTime:""});a=b("keyMirror")({CLOSED:null,LIST_VIEW:null,ADDING_NEW_POLL:null,EDITING_POLL:null,ADDING_NEW_SLIDER:null,EDITING_SLIDER:null});e.exports={EditorState:a,PollDataRecordFactory:d,PollOptionDataRecordFactory:c,SliderDataRecordFactory:f}}),null);
__d("VideoComposerQuestionsConstants",["VideoComposerDialogConstants"],(function(a,b,c,d,e,f){"use strict";a=16;c=360;d=b("VideoComposerDialogConstants").DIALOG_WIDTH-c;f=d-2*a;c=f/b("VideoComposerDialogConstants").SIXTEEN_NINE;d={SECTION_PADDING:a,PLAYER_HEIGHT:c,PLAYER_WIDTH:f,INITIAL_QUESTION_DEFAULT_DURATION:30,MIN_QUESTION_DURATION:10};e.exports=d}),null);
__d("VideoComposerThumbnailTypes",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({GENERATED:"",CUSTOM:"",VIDEO_FRAME:""});e.exports={ThumbnailSection:a}}),null);
__d("VideoComposerDialogDistributionUtils",["ActorURI","AsyncRequest","ComposerEntryPointRef","DestinationPickerEligibilityConfig","PagesComposerEligibilityUtils","VideoComposerDialogMode","VideoComposerDialogShowVideo","VideoComposerDistributionActions","VideoComposerPublishingTypes","XVideoComposerBootloadDistributionTabController","XVideoComposerBootloadEditDistributionTabController","XVideoComposerCrosspostBootloadDistributionController","gkx"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VideoComposerPublishingTypes").PublishingType;a=function(a,c,d){d=b("XVideoComposerBootloadDistributionTabController").getURIBuilder().setEnum("composer_entry_point",d).getURI();d=b("ActorURI").create(d,c);return new(b("AsyncRequest"))().setReplaceTransportMarkers().setURI(d).exec().then(function(c){return b("VideoComposerDistributionActions").bootloadTab(a,c.payload)})};c=function(a,c,d){d=b("XVideoComposerBootloadEditDistributionTabController").getURIBuilder().setFBID("video_id",d).getURI();d=b("ActorURI").create(d,c);return new(b("AsyncRequest"))().setReplaceTransportMarkers().setURI(d).exec().then(function(c){b("VideoComposerDistributionActions").bootloadTabForEdit(a,c.payload)})};d=function(a,c){var d=b("XVideoComposerCrosspostBootloadDistributionController").getURIBuilder().getURI();d=b("ActorURI").create(d,c);return new(b("AsyncRequest"))().setURI(d).exec().then(function(c){return b("VideoComposerDistributionActions").bootloadTabForCrosspost(a,c.payload)})};f=function(a,c,d,e){a=(a=a)!=null?(a=a.contextConfig)!=null?a.composerID:a:a;var f=!1;a&&c&&(f=b("PagesComposerEligibilityUtils").isPageStoryCreateEligible(a,c));a=!b("DestinationPickerEligibilityConfig").isVideoLengthLimited||d>0&&d<=b("DestinationPickerEligibilityConfig").maxVideoLengthInSeconds;c=e===g.PUBLISH_NOW;return f&&a&&c};var h=function(a,c,d,e,f){var g=b("gkx")("810431")&&!e;if(!g&&f||!f&&g)return!1;return d===b("ComposerEntryPointRef").PAGE_CONTENT_TAB_PLAYLIST_DETAILS||a!==b("VideoComposerDialogMode").VIDEO_CROSSPOST&&!e?!0:a===b("VideoComposerDialogMode").VIDEO_EDIT&&(c===b("VideoComposerDialogShowVideo").BASIC_VIDEO||c===b("VideoComposerDialogShowVideo").EPISODE||c===b("VideoComposerDialogShowVideo").RECAP)};e.exports={beginBootloadingDistributionTab:a,bootloadEditDistributionTab:c,bootloadCrosspostDistributionTab:d,enableAddToStoriesOption:f,shouldShowPlaylistSelector:h}}),null);
__d("VideoComposerDialogRightsUtils",["Promise","ActorURI","AsyncRequest","VideoComposerRightsActions","XVideoComposerBootloadRightsTabController","XVideoComposerEditRightsTabController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a,c){var d=b("XVideoComposerBootloadRightsTabController").getURIBuilder().setFBID("target_id",c).getURI(),e=b("ActorURI").create(d,c);return new(b("Promise"))(function(c,d){new(b("AsyncRequest"))(e).setHandler(function(d){b("VideoComposerRightsActions").bootloadParameters(a,d.payload),c(d)}).setErrorHandler(function(a){d(a)}).send()})};c=function(a){b("VideoComposerRightsActions").bootloadEditParameters(a.videoComposerID,a)};d=function(a,c){a=b("XVideoComposerEditRightsTabController").getURIBuilder().setString("video_composer_id",a).setFBID("actor_id",c.common.actorID).setFBID("video_id",c.videoID).getURI();var d=b("ActorURI").create(a,c.common.actorID);return new(b("Promise"))(function(a,c){new(b("AsyncRequest"))(d).setHandler(function(b){a(b)}).send()})};e.exports={beginBootloadingRightsTab:a,bootloadEditParams:c,fetchEditParams:d}}),null);
__d("VideoComposerDialogTrackingUtils",["ActorURI","AsyncRequest","VideoComposerTrackingActions","WebAsyncSearchSource","XVideoComposerEditTrackingTabController","XVideoCustomLabelsTypeaheadController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a,c){var d=b("XVideoComposerEditTrackingTabController").getURIBuilder().setFBID("video_id",c.videoID).getURI();d=b("ActorURI").create(d,c.common.actorID);return new(b("AsyncRequest"))().setURI(d).exec().then(function(c){b("VideoComposerTrackingActions").bootloadTrackingEditParams(a,c.payload)})};c=function(a){a=b("XVideoCustomLabelsTypeaheadController").getURIBuilder().setFBID("profile_id",a).getURI();return new(b("WebAsyncSearchSource"))({bootstrapRequests:[{uri:a}],getAllForEmptyQuery:!0})};e.exports={beginBootloadingEditTrackingTab:a,loadCustomLabelsSearchSource:c}}),null);
__d("VideoComposerMatureContentRatingUtils",["fbt"],(function(a,b,c,d,e,f,g){"use strict";a={UNSET:{label:g._("Who Can Watch")},SUITABLE_FOR_ALL:{label:g._("Anyone"),description:g._("Video may contain suggestive dialogue, sexual situations or moderate violence.")},FOURTEEN_PLUS:{label:g._("Anyone 14 or older"),description:g._("Video may contain strong language, sexual content, violence or other material unsuitable for children under 14.")},EIGHTEEN_PLUS:{label:g._("Anyone 18 or older"),description:g._("Video may contain crude language, explicit sexual content, graphic violence or other material unsuitable for children under 18.")}};b={NOT_INITIATED:"NOT_INITIATED",IN_PROGRESS:"IN_PROGRESS",SUBMITTED:"SUBMITTED"};e.exports={MATURE_CONTENT_LABELS:a,MATURE_CONTENT_APPEAL_FORM_STATUS:b}}),null);
__d("VideoComposerSoundEditorSoundCollectionTabTable",["ix","cx","fbt","FBLoadShimmer.react","Link.react","MediaManagerTableColumnHeader.react","MediaTagType","React","SoundCollectionHoverIcon.react","SoundCollectionLoggerActions","SoundCollectionTypedLogger","VideoComposerSoundEditorActions","asset","formatDurationSeconds","intlList","suiMargin"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=10,k=function(a){return b("React").createElement("div",{className:"_6d32"+(a.isSelected?" _6cuj":"")+(a.playTrackID===a.result.id?" _6cuk":"")},a.result.artistName)},l=function(a){return b("React").createElement("div",{className:"_6d32"+(a.isSelected?" _6cuj":"")+(a.playTrackID===a.result.id?" _6cuk":"")},b("formatDurationSeconds")(a.result.lengthInSec))},m=function(){return b("React").createElement(b("FBLoadShimmer.react"),{height:15})},n=function(a){return b("React").createElement("div",{className:"_6d32"+(a.isSelected?" _6cuj":"")+(a.playTrackID===a.result.id?" _6cuk":"")},t(a.tagType,a.result))},o=function(c){__p&&__p();babelHelpers.inheritsLoose(a,c);function a(){var a,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(a=d=c.call.apply(c,[this].concat(f))||this,d.$1=function(){d.props.playTrackID===d.props.result.id?b("VideoComposerSoundEditorActions").setSoundCollectionIsPlaying(d.props.videoComposerID,!0):b("VideoComposerSoundEditorActions").setSoundCollectionPlayTrack(d.props.videoComposerID,d.props.result),new(b("SoundCollectionTypedLogger"))().setEvent(b("SoundCollectionLoggerActions").PLAY).setSoundCollectionTab(d.props.soundCollectionTab).setAudioID(d.props.result.id).log()},d.$2=function(){b("VideoComposerSoundEditorActions").setSoundCollectionIsPlaying(d.props.videoComposerID,!1)},d.$3=function(){b("VideoComposerSoundEditorActions").soundCollectionSelectTrack(d.props.videoComposerID,d.props.result)},d.$4=function(){b("VideoComposerSoundEditorActions").soundCollectionUnselectTrack(d.props.videoComposerID,d.props.result.id)},a)||babelHelpers.assertThisInitialized(d)}var d=a.prototype;d.render=function(){var a=this.props.playTrackID===this.props.result.id,c=this.props.isPlaying&&a,d=b("React").createElement(b("SoundCollectionHoverIcon.react"),{icon:g("422765"),iconHover:g("422776")}),e=b("React").createElement(b("SoundCollectionHoverIcon.react"),{icon:g("358497"),iconHover:g("551456")}),f=b("React").createElement(b("SoundCollectionHoverIcon.react"),{icon:g("551453"),iconHover:g("551456")}),h=b("React").createElement(b("SoundCollectionHoverIcon.react"),{icon:g("483322"),iconHover:g("551456")});e=e;a?e=f:this.props.isSelected&&(e=h);f=b("React").createElement(b("SoundCollectionHoverIcon.react"),{icon:g("500243"),iconHover:g("489390")});h=b("React").createElement(b("SoundCollectionHoverIcon.react"),{icon:g("391229"),iconHover:g("489390")});var i=b("React").createElement(b("SoundCollectionHoverIcon.react"),{icon:g("515616"),iconHover:g("538589")}),j=b("React").createElement(b("SoundCollectionHoverIcon.react"),{icon:g("538585"),iconHover:g("538589")});h=a?h:f;f=a?j:i;return b("React").createElement("div",{className:"_6cjx"},b("React").createElement(b("Link.react"),{href:"#",onClick:c?this.$2:this.$1},c?d:e),b("React").createElement("div",{className:"_3-9a"},this.props.isSelected?b("React").createElement(b("Link.react"),{href:"#",onClick:this.$4},f):b("React").createElement(b("Link.react"),{href:"#",onClick:this.$3},h)),b("React").createElement("div",{className:"_6cui"+(this.props.isSelected?" _6cuj":"")+(this.props.playTrackID===this.props.result.id?" _6cuk":"")},this.props.result.title))};return a}(b("React").Component);a=function(a,b){b=b.map(function(a){return{id:a.id,result:a}});if(a)for(var a=0;a<j;a++)b.push({id:String(a),result:null});return b};var p=function(a,c){return{label:a,id:"name",getTitle:function(a){return a.result?a.result.title:""},renderItem:function(a){return a.result?b("React").createElement(o,{videoComposerID:c.videoComposerID,isPlaying:c.isPlaying,playTrackID:c.playTrackID,result:a.result,soundCollectionTab:c.soundCollectionTab,isSelected:Object.prototype.hasOwnProperty.call(c.selectedTracks,a.result.id)}):b("React").createElement(m,null)},widthWeight:2}},q=function(a,c){return{label:a,id:"artist",getTitle:function(a){return a.result?a.result.artistName:""},renderItem:function(a){return a.result?b("React").createElement(k,{playTrackID:c.playTrackID,result:a.result,isSelected:Object.prototype.hasOwnProperty.call(c.selectedTracks,a.result.id)}):b("React").createElement(m,null)},widthWeight:1}},r=function(a){return{label:b("React").createElement(b("MediaManagerTableColumnHeader.react"),{text:i._("Length")}),id:"length",getTitle:function(a){return a.result?b("formatDurationSeconds")(a.result.lengthInSec):""},renderItem:function(c){return c.result?b("React").createElement(l,{playTrackID:a.playTrackID,result:c.result,isSelected:Object.prototype.hasOwnProperty.call(a.selectedTracks,c.result.id)}):b("React").createElement(m,null)},widthWeight:1}},s=function(a,c,d){return{label:c,id:a,getTitle:function(b){return b.result?t(a,b.result):""},renderItem:function(c){return c.result?b("React").createElement(n,{playTrackID:d.playTrackID,result:c.result,tagType:a,isSelected:Object.prototype.hasOwnProperty.call(d.selectedTracks,c.result.id)}):b("React").createElement(m,null)},widthWeight:1}};c=function(a){return[p(b("React").createElement(b("MediaManagerTableColumnHeader.react"),{text:i._("Track")}),a),q(b("React").createElement(b("MediaManagerTableColumnHeader.react"),{text:i._("Artist")}),a),s(b("MediaTagType").GENRE,b("React").createElement(b("MediaManagerTableColumnHeader.react"),{text:i._("Genre")}),a),r(a)]};d=function(a){return[p(b("React").createElement(b("MediaManagerTableColumnHeader.react"),{text:i._("Sound Effect")}),a),q(b("React").createElement(b("MediaManagerTableColumnHeader.react"),{text:i._("Source")}),a),s(b("MediaTagType").SOUND_EFFECTS_CATEGORY,b("React").createElement(b("MediaManagerTableColumnHeader.react"),{text:i._("Category")}),a),r(a)]};var t=function(a,c){var d=[];c.mediaTags&&(d=c.mediaTags.filter(function(b){return b.media_tag_type.toLowerCase()===a}).map(function(a){return a.local_name}));return b("intlList")(d)};e.exports={createTracksColumns:c,createEffectsColumns:d,createRows:a}}),null);
__d("VideoComposerClippingTypes",["ImmutableRecordWithV4Types"],(function(a,b,c,d,e,f){"use strict";a=b("ImmutableRecordWithV4Types").Record;c=a({title:"",startTime:null,endTime:null});e.exports=c}),null);
__d("VideoComposerClippingStoreClass",["Promise","ImmutableRecordWithV4Types","VideoComposerActionTypes","VideoComposerClippingTypes","VideoComposerStoreBase","flattenPHPQueryData","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("ImmutableRecordWithV4Types").Record;var g=a({videoComposerID:"",clipTimes:b("immutable").List(),selectedStartTime:null,selectedEndTime:null,isPlaying:!1,vpc:null});c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return g()};d.reduceImpl=function(a,c){__p&&__p();switch(c.type){case b("VideoComposerActionTypes").RESET_COMPOSER:return this.getInitialState();case b("VideoComposerActionTypes").CLIPPING_SET_END_TIME:this.$VideoComposerClippingStoreClass1(a.vpc,c.endTime);return a.set("selectedEndTime",c.endTime);case b("VideoComposerActionTypes").CLIPPING_SET_PLAYER_STATE:return a.set("isPlaying",c.isPlaying);case b("VideoComposerActionTypes").CLIPPING_SET_START_TIME:this.$VideoComposerClippingStoreClass1(a.vpc,c.startTime);return a.set("selectedStartTime",c.startTime);case b("VideoComposerActionTypes").CLIPPING_SET_VPC:return a.set("vpc",c.vpc);case b("VideoComposerActionTypes").CLIPPING_PREVIEW_BY_START_END:return this.$VideoComposerClippingStoreClass2(c);case b("VideoComposerActionTypes").CLIPPING_ADD_CLIP:return this.$VideoComposerClippingStoreClass3();case b("VideoComposerActionTypes").CLIPPING_EDIT_CLIP:return this.$VideoComposerClippingStoreClass4(c.index,c.title);case b("VideoComposerActionTypes").CLIPPING_DELETE_CLIP:return this.$VideoComposerClippingStoreClass5(c.index);default:return a}};d.$VideoComposerClippingStoreClass1=function(a,b){a&&a.seek(b)};d.$VideoComposerClippingStoreClass3=function(){var a=b("VideoComposerClippingTypes")(),c=this.getState();a=a.set("startTime",c.get("selectedStartTime")||0).set("endTime",c.get("selectedEndTime")||0);c=c.set("clipTimes",c.get("clipTimes").push(a));return c};d.$VideoComposerClippingStoreClass4=function(a,c){var d=this.getState(),e=d.get("clipTimes"),f=e.get(a),g=b("VideoComposerClippingTypes")();g=g.set("startTime",f.startTime||0).set("endTime",f.endTime||0).set("title",c);e=e.set(a,g);d=d.set("clipTimes",e);return d};d.$VideoComposerClippingStoreClass5=function(a){var b=this.getState(),c=b.get("clipTimes");c=c["delete"](a);b=b.set("clipTimes",c);return b};d.$VideoComposerClippingStoreClass2=function(a){a=this.getState();var b=a.get("vpc");if(b){b.emit("previewByStartEndTime",{endTime:(b=a.get("selectedEndTime"))!=null?b:0,startTime:(b=a.get("selectedStartTime"))!=null?b:0})}a=a.set("isPlaying",!0);return a};d.getPostDataForEdit=function(){var a=this.getState();a=a.clipTimes;var c=[],d={};a.forEach(function(a){a={start_time:a.startTime,end_time:a.endTime,title:a.title};c.push(a)});d.clip_times=c;return b("Promise").resolve(b("flattenPHPQueryData")(d))};return c}(b("VideoComposerStoreBase"));e.exports=c}),null);
__d("VideoCaptionDeletionCache",["immutable"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(){this.cache=b("immutable").Map()}var c=a.prototype;c.add=function(a){this.cache=this.cache.set(a.id,a)};c.remove=function(a){this.cache=this.cache["delete"](a)};c.has=function(a){return this.cache.get(a)!==void 0};return a}();e.exports=a}),null);
__d("VideoComposerCaptionEditorActionTypes",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({ADD_CAPTION_ENTRY:"",REMOVE_CAPTION_ENTRY:"",EDIT_CAPTION_ENTRY:"",SET_PREVIEW_ENTRY:"",SET_EDITOR_LANGUAGE:"",SET_EDITOR_LOCALE:"",SET_CAPTIONS:"",SET_NEXT_ENTRY:"",PLAY_PREVIEW_ENTRY:"",CONFIRM_CLOSE_DIALOG:"",CANCEL_CLOSE_DIALOG:"",SHOW_EXIT_DIALOG:"",START_SAVE_CAPTION_CHANGESET:"",FINISH_SAVE_CAPTION_CHANGESET:"",INITIALIZE_EDITOR_LANGUAGE:"",RESET_CAPTION_EDITOR:""});e.exports=a}),null);
__d("VideoComposerCaptionsTabActionTypes",["immutable","keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({SHOW_CAPTION_EDITOR:"",HIDE_CAPTION_EDITOR:"",INITIALIZE_CAPTION_LANDING_SCREEN:"",GENERATE:"",CANCEL_GENERATE:"",CREATE:"",EDIT_CAPTIONS_DRAFT:"",DELETE_CAPTIONS_DRAFT:"",START_SRT_UPLOAD:"",FINISH_SRT_UPLOAD:"",GENERATE_COMPLETE:"",CREATE_COMPLETE:"",SELECT_SPOKEN_LANGUAGE:"",SELECT_SPOKEN_LOCALE:"",FINISHED_FETCH_DRAFTS:"",GENERATE_PROGRESS_UPDATE:"",UPDATE_CAPTION_FILES:"",UPDATE_ERROR_STATE:"",SET_AUTO_GENERATED_CAPTIONS:"",RESET_CAPTIONS_LANDING_TAB:"",RETRY_AUTO_GENERATION:"",RESUME_AUTO_GENERATION:"",RESET_AUTO_GENERATING_LOCALE:"",TRY_RESUME_AUTO_GENERATION:"",INITIALIZE_ALL_CAPTION_FILES:"",BOOTLOAD_PARAMETERS_CAPTIONS_TAB:"",CHANGE_PUBLISHED_STATE:"",PENDING_TO_PUBLISHED:"",CAPTION_LANDING_SCREEN_OPEN_EVENT:"",OLD_COMPOSER_CAPTION_TAB_OPEN_EVENT:"",RESET_OPEN_LANDING_SCREEN_STATE:""});e.exports=a}),null);
__d("VideoComposerCaptionsStoreClass",["fbt","Promise","ActorURI","AsyncRequest","ComposerVideoUploadActions","ImmutableRecordWithV4Types","InsightsLocaleNamesStatic","SkywalkerManager","VideoCaptionDeletionCache","VideoCaptionsLoggerEvents","VideoCaptionsPublishTypedLogger","VideoComposerActionTypes","VideoComposerCaptionEditorActionTypes","VideoComposerCaptionsTabActions","VideoComposerCaptionsTabActionTypes","VideoComposerDialogCaptionEditorConstants","VideoComposerDialogCaptionEditorPublishStateEnum","VideoComposerDialogCaptionEditorUtils","VideoComposerDialogCaptionMode","VideoComposerDialogMode","VideoComposerDialogUploadUtils","VideoComposerDispatchers","VideoComposerStoreBase","VideoComposerStores","VideoUploadUIError","XVideoCaptionGenerateAsyncController","XVideoCaptionSpeechDetectionAsyncController","XVideoCaptionUploadAsyncController","clearInterval","immutable","nullthrows","promiseDone","setInterval","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("ImmutableRecordWithV4Types").Record;var h=b("InsightsLocaleNamesStatic"),i=a({videoComposerID:"",accessToken:null,autoGenerateCanceled:!1,drafts:b("immutable").List(),isSpokenLanguageSelected:!1,publishedStateChangeset:b("immutable").Map(),deletionCache:new(b("VideoCaptionDeletionCache"))(),selectedCaption:null,show_caption_editor:!1,videoFile:null,video_id:null,videoData:null,isAutoGenerating:!1,shouldAutopublishCaptions:!1,showAutopublishCaptionsFeature:!1,isCreating:!1,subtitleForDeletion:null,spokenLanguage:b("VideoComposerDialogCaptionEditorConstants").NO_LANGUAGE_SELECTED,autoGeneratingLocale:null,autoGeneratingLanguage:null,spokenLocale:b("VideoComposerDialogCaptionEditorConstants").INITIAL_SPOKEN_LOCALE,progress:0,autoGenProcessRate:b("VideoComposerDialogCaptionEditorConstants").DEFAULT_PROCESSING_SPEED,generateStarted:0,composerID:"",pageID:"",serverCaptionLocales:b("immutable").Seq(),captionFiles:b("immutable").Map(),captionURLs:b("immutable").List(),composerMode:null,isOldComposer:!1,isSRTUploading:!1,videoDurationInSec:0,errors:b("immutable").List(),partialUploadError:!1,numAutoGenerationRetries:0,wasOldComposerCaptionTabClicked:!1,timeFirstInitialized:null,captionsFeaturesMode:b("VideoComposerDialogCaptionMode").ADVANCED_FEATURES_WITH_SUBTITLES,isDefaultLangugeSectionEnabled:!0,isNewCaptionsTabTextAndLayoutEnabled:!1,shouldShowNuxPill:!1,enableAddCaptionWhenUploading:!1,autogeneratableHeadLocales:b("VideoComposerDialogCaptionEditorConstants").AUTO_GENERATABLE_HEAD_LOCALES,enableNullStateForCaptionsAdded:!1,showEditAndReviewButton:!1,fakeAutogenerateProgressRate:0,autoGenV1Subtitle:null,localCaptionFiles:b("immutable").List(),captionURLsForEdit:b("immutable").List(),hasAutoGenV1:!1,captionLocalesWithoutSubtitles:b("immutable").List(),localesWithoutSubtitlesToDelete:b("immutable").List(),shouldTrimCaptions:!1}),j=5*1e3,k=50,l=1e3,m=15*1e3;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return i()};d.getIsEditMode=function(){return this.getState().get("composerMode")===b("VideoComposerDialogMode").VIDEO_EDIT};d.getIsCrosspostMode=function(){return this.getState().get("composerMode")===b("VideoComposerDialogMode").VIDEO_CROSSPOST};d.shouldEnableOldDataModel=function(){return this.getState().get("captionsFeaturesMode")===b("VideoComposerDialogCaptionMode").OLD_DATA_MODEL};d.getIsDefaultLangugeSectionEnabled=function(){return this.getState().get("isDefaultLangugeSectionEnabled")};d.getIsNewCaptionsTabTextAndLayoutEnabled=function(){return this.getState().get("isNewCaptionsTabTextAndLayoutEnabled")};d.getShouldShowNuxPill=function(){return this.getState().get("shouldShowNuxPill")};d.getEnableAddCaptionWhenUploading=function(){return this.getState().get("enableAddCaptionWhenUploading")};d.getAutogeneratableHeadLocales=function(){return this.getState().get("autogeneratableHeadLocales")};d.getAllCaptions=function(){var a=this.getState().get("drafts"),b=this.getState().get("captionURLs"),c=this.getState().get("localCaptionFiles");return a.concat(b).concat(c)};d.getCaptionLocalesWithoutSubtitles=function(){return this.getState().get("captionLocalesWithoutSubtitles")};d.getSpokenLanguage=function(){return this.getState().get("spokenLanguage")};d.getSpokenLocale=function(){return this.getState().get("spokenLocale")};d.getAutoGeneratingLocale=function(){return this.getState().get("autoGeneratingLocale")};d.isSpokenLanguageSelected=function(){return this.getState().get("isSpokenLanguageSelected")};d.getShowAutopublishCaptionsFeature=function(){return this.getState().get("showAutopublishCaptionsFeature")};d.getShouldAutopublishCaptions=function(){return this.getState().get("shouldAutopublishCaptions")};d.getLogger=function(){var a=this.getState(),c=this.getIsEditMode()===!0?"post-publish":"pre-publish";return new(b("VideoCaptionsPublishTypedLogger"))().setVideoID(a.get("video_id")).setVideoLanguage(a.get("spokenLanguage")).setVideoLocale(a.get("spokenLocale")).setPublishPhase(c)};d.getEnableAdvancedCaptionsFeatures=function(){return this.getState().get("captionsFeaturesMode")===b("VideoComposerDialogCaptionMode").ADVANCED_FEATURES_WITH_SUBTITLES};d.getpublishedStateChangeset=function(){return this.getState().get("publishedStateChangeset")};d.wasTabOpenedInOldComposer=function(){var a=this.getState();return a.get("isOldComposer")&&a.get("wasOldComposerCaptionTabClicked")};d.logComposerSaveEvent=function(){var a=this.getState();if(a.get("timeFirstInitialized")===null||a.get("video_id")===null||a.get("video_id")==="")return;var c=a.get("drafts");a=b("VideoComposerDialogCaptionEditorUtils").getPublishedCaptionFiles(a.get("captionFiles"),c||b("immutable").List());this.$VideoComposerCaptionsStoreClass1(a)};d.$VideoComposerCaptionsStoreClass1=function(a){var c=this.getState(),d=c.get("drafts");this.$VideoComposerCaptionsStoreClass2(b("VideoCaptionsLoggerEvents").COMPOSER_SAVE,{session_id:c.get("timeFirstInitialized"),num_captions:String(d.size),num_published_captions:String(a.size)});b("setTimeout")(function(){return b("VideoComposerCaptionsTabActions").resetOpenLandingScreenState(c.videoComposerID)},0)};d.$VideoComposerCaptionsStoreClass3=function(a,c){__p&&__p();var d=!0;switch(a.type){case b("VideoComposerCaptionsTabActionTypes").SHOW_CAPTION_EDITOR:case b("VideoComposerCaptionsTabActionTypes").CREATE:case b("VideoComposerCaptionsTabActionTypes").EDIT_CAPTIONS_DRAFT:case b("VideoComposerCaptionsTabActionTypes").SELECT_SPOKEN_LANGUAGE:case b("VideoComposerCaptionsTabActionTypes").SELECT_SPOKEN_LOCALE:case b("VideoComposerCaptionsTabActionTypes").DELETE_CAPTIONS_DRAFT:return!0;case b("VideoComposerCaptionsTabActionTypes").START_SRT_UPLOAD:case b("VideoComposerActionTypes").UPLOAD_LOCAL_CAPTIONS:return!a.partialUploadError;case b("VideoComposerCaptionsTabActionTypes").FINISH_SRT_UPLOAD:return!this.getState().get("partialUploadError");case b("VideoComposerCaptionsTabActionTypes").GENERATE:d=!0;if(c.size>0){var e=b("VideoComposerDialogCaptionEditorUtils").getCaptionErrorMessage(b("VideoUploadUIError").AUTOGENERATE_FAIL_RETRY);c.forEach(function(a){if(a.toString().localeCompare(e.toString())===0){d=!1;return}})}return d;case b("VideoComposerCaptionsTabActionTypes").GENERATE_COMPLETE:d=!1;if(c.size>0){var f=b("VideoComposerDialogCaptionEditorUtils").getCaptionErrorMessage(b("VideoUploadUIError").AUTOGENERATE_FAIL_RETRY);c.forEach(function(a){if(a.toString().localeCompare(f.toString())===0){d=!0;return}})}return d}return!1};d.reduceImpl=function(a,c){__p&&__p();var d=this,e=null,f=null,g=null;this.$VideoComposerCaptionsStoreClass3(c,a.get("errors"))&&a.get("errors").size>0&&(a=a.set("errors",b("immutable").List()));switch(c.type){case b("VideoComposerActionTypes").RESET_COMPOSER:a=this.getInitialState();return a;case b("VideoComposerCaptionsTabActionTypes").RESET_CAPTIONS_LANDING_TAB:a=this.getInitialState().set("captionsFeaturesMode",a.get("captionsFeaturesMode")).set("captionURLs",a.get("captionURLs")).set("captionURLsForEdit",a.get("captionURLsForEdit")).set("localCaptionFiles",a.get("localCaptionFiles")).set("hasAutoGenV1",a.get("hasAutoGenV1")).set("isDefaultLangugeSectionEnabled",a.get("isDefaultLangugeSectionEnabled")).set("isNewCaptionsTabTextAndLayoutEnabled",a.get("isNewCaptionsTabTextAndLayoutEnabled")).set("shouldShowNuxPill",a.get("shouldShowNuxPill")).set("enableAddCaptionWhenUploading",a.get("enableAddCaptionWhenUploading")).set("autogeneratableHeadLocales",a.get("autogeneratableHeadLocales")).set("enableNullStateForCaptionsAdded",a.get("enableNullStateForCaptionsAdded")).set("showEditAndReviewButton",a.get("showEditAndReviewButton")).set("fakeAutogenerateProgressRate",a.get("fakeAutogenerateProgressRate")).set("shouldAutopublishCaptions",a.get("shouldAutopublishCaptions")).set("showAutopublishCaptionsFeature",a.get("showAutopublishCaptionsFeature"));return a;case b("VideoComposerCaptionsTabActionTypes").SHOW_CAPTION_EDITOR:a=a.set("show_caption_editor",!0);return a;case b("VideoComposerCaptionEditorActionTypes").CONFIRM_CLOSE_DIALOG:a=a.set("show_caption_editor",!1);a=this.$VideoComposerCaptionsStoreClass4(a);return a;case b("VideoComposerCaptionEditorActionTypes").FINISH_SAVE_CAPTION_CHANGESET:return this.$VideoComposerCaptionsStoreClass5(a);case b("VideoComposerCaptionsTabActionTypes").OLD_COMPOSER_CAPTION_TAB_OPEN_EVENT:return a.set("wasOldComposerCaptionTabClicked",!0);case b("VideoComposerCaptionsTabActionTypes").CAPTION_LANDING_SCREEN_OPEN_EVENT:var i=a.get("video_id");i=a.get("timeFirstInitialized")===null&&i!==null&&i!=="";if(!i)return a;i=String(Date.now());this.$VideoComposerCaptionsStoreClass2(b("VideoCaptionsLoggerEvents").CAPTION_TAB_OPENED,{session_id:i});return a.set("timeFirstInitialized",i);case b("VideoComposerCaptionsTabActionTypes").RESET_OPEN_LANDING_SCREEN_STATE:return a.set("isOldComposer",!1).set("wasOldComposerCaptionTabClicked",!1).set("timeFirstInitialized",null);case b("VideoComposerCaptionsTabActionTypes").INITIALIZE_CAPTION_LANDING_SCREEN:i=c.isOldComposer?c.isOldComposer:!1;var j=c.dialogMode?c.dialogMode:b("VideoComposerDialogMode").VIDEO_UPLOAD;return this.initialize(a,c.videoFile,c.video_id,c.accessToken,c.composerID,c.pageID,c.videoDurationInSec,j,i);case b("VideoComposerCaptionsTabActionTypes").TRY_RESUME_AUTO_GENERATION:j=a.get("autoGeneratingLocale");i=j!==null?b("VideoComposerDialogCaptionEditorUtils").getHeadLocale(b("nullthrows")(j)):null;j=a.get("video_id");j&&this.$VideoComposerCaptionsStoreClass6(j,i);return a;case b("VideoComposerCaptionsTabActionTypes").FINISHED_FETCH_DRAFTS:g=b("VideoComposerDialogCaptionEditorUtils").updateToChangesetValues(c.drafts,a.get("publishedStateChangeset"));g=b("VideoComposerDialogCaptionEditorUtils").filterOutDeletions(g,a.get("deletionCache"));if(a.autoGenerateCanceled){g=b("VideoComposerDialogCaptionEditorUtils").filterOutAutoGeneratedCaptions(c.drafts);j=b("immutable").Set(c.drafts).subtract(g);j.size>0&&(a=a.set("autoGenerateCanceled",!1));j.forEach(function(c){b("VideoComposerDialogCaptionEditorUtils").silentlyDeleteSubtitle(a.get("video_id"),c,a.get("pageID"))})}return a.set("drafts",g).set("captionLocalesWithoutSubtitles",c.captionLocalesWithoutSubtitles);case b("VideoComposerCaptionsTabActionTypes").RESET_AUTO_GENERATING_LOCALE:return a.set("autoGeneratingLocale",null).set("autoGeneratingLanguage",null);case b("VideoComposerCaptionsTabActionTypes").GENERATE:i=a.get("video_id");if(i){a=a.set("autoGenerateCanceled",!1).set("isAutoGenerating",!0).set("progress",0).set("generateStarted",Date.now()).set("autoGeneratingLocale",a.get("spokenLocale")).set("autoGeneratingLanguage",a.get("spokenLanguage"));j=this.$VideoComposerCaptionsStoreClass7(i,a.get("spokenLanguage"),a.get("spokenLocale"));j!==null&&j!==void 0&&(a=a.set("errors",b("immutable").List([b("VideoComposerDialogCaptionEditorUtils").getCaptionErrorMessage(j,a.get("spokenLanguage"))])).set("isAutoGenerating",!1).set("autoGeneratingLocale",null).set("autoGeneratingLanguage",null))}return a;case b("VideoComposerActionTypes").CAPTION_HAS_TRIMMED:return a.set("shouldTrimCaptions",!1);case b("VideoComposerCaptionsTabActionTypes").CREATE:i=a.get("video_id");i&&(a=a.set("isCreating",!0),a=a.set("shouldTrimCaptions",b("VideoComposerStores").getTrimmingEditorStore().isVideoTrimmed()),a=a.set("selectedCaption",null).set("show_caption_editor",!0),this.$VideoComposerCaptionsStoreClass8(i));return a;case b("VideoComposerCaptionsTabActionTypes").GENERATE_COMPLETE:j=a.get("spokenLanguage");f=b("VideoComposerDialogCaptionEditorUtils").makeNewCaptionFile(c.captions,c.locale,j,!0);i=f!==null&&j!==""&&c.subtitlesID!==null;i&&(a=this.$VideoComposerCaptionsStoreClass9(a,String(c.subtitlesID)),a=this.$VideoComposerCaptionsStoreClass10(a,b("nullthrows")(f),c.locale),a=a.set("numAutoGenerationRetries",0));a=a.set("isAutoGenerating",!1).set("autoGenProcessRate",b("VideoComposerDialogCaptionEditorConstants").DEFAULT_PROCESSING_SPEED).set("progress",0).set("autoGeneratingLocale",null).set("autoGeneratingLanguage",null);return a;case b("VideoComposerCaptionsTabActionTypes").CREATE_COMPLETE:a=a.set("isCreating",!1);return a;case b("VideoComposerCaptionsTabActionTypes").GENERATE_PROGRESS_UPDATE:a=this.$VideoComposerCaptionsStoreClass11(a,c.progress);return a;case b("VideoComposerCaptionsTabActionTypes").EDIT_CAPTIONS_DRAFT:a=a.set("show_caption_editor",!0);j=a.get("drafts").get(c.id);a=a.set("selectedCaption",j);this.$VideoComposerCaptionsStoreClass2(b("VideoCaptionsLoggerEvents").CAPTION_DRAFT_EDITED,{},null,j.id);return a;case b("VideoComposerCaptionsTabActionTypes").DELETE_CAPTIONS_DRAFT:g=a.get("drafts");e=g.get(c.id);i=a.get("video_id");i&&b("VideoComposerDialogCaptionEditorUtils").deleteSubtitles(a.videoComposerID,i,e,a.get("pageID"),a.get("deletionCache"),this.$VideoComposerCaptionsStoreClass12.bind(this));e.language!==b("VideoComposerDialogCaptionEditorConstants").EMPTY_LOCALE&&(a=a.set("subtitleForDeletion",e));return a;case b("VideoComposerActionTypes").DELETE_SUBTITLES_FAILURE:return a.set("subtitleForDeletion",null);case b("VideoComposerActionTypes").DELETE_SUBTITLES_SUCCESS:var k=a.get("subtitleForDeletion");if(!k)return a;j=a.get("drafts");a.get("deletionCache").add(k);j=b("VideoComposerDialogCaptionEditorUtils").filterOutDeletions(j.filter(function(a){return!k||a.id!==k.id}),a.get("deletionCache"));i=a.get("captionFiles");var l=b("VideoComposerDialogCaptionEditorUtils").getHeadLocale(k.locale);i=i["delete"](l!==""?l:k.locale);l=a.get("composerID");if(l){var m=b("VideoComposerDialogCaptionEditorUtils").getPublishedCaptionFiles(i,j);b("ComposerVideoUploadActions").updateCaptions(l,Array.from(m.values()))}this.$VideoComposerCaptionsStoreClass2(b("VideoCaptionsLoggerEvents").CAPTION_DRAFT_DELETED,{},null,k.id);return a.set("drafts",j).set("subtitleForDeletion",null).set("captionFiles",i).set("publishedStateChangeset",a.get("publishedStateChangeset")["delete"](k.id));case b("VideoComposerCaptionsTabActionTypes").SELECT_SPOKEN_LANGUAGE:this.$VideoComposerCaptionsStoreClass2(b("VideoCaptionsLoggerEvents").VIDEO_LANGUAGE_SELECTED);a=a.set("spokenLanguage",c.language).set("isSpokenLanguageSelected",!0);return a;case b("VideoComposerCaptionsTabActionTypes").SELECT_SPOKEN_LOCALE:a=a.set("spokenLocale",c.locale);return a;case b("VideoComposerCaptionsTabActionTypes").CANCEL_GENERATE:var n=a.autoGeneratingLanguage,o=a.video_id;if(!n||!o)return a;b("setTimeout")(function(){return b("VideoComposerDialogCaptionEditorUtils").fetchCaptions(o,function(a){d.$VideoComposerCaptionsStoreClass13(a,o,n)})},b("VideoComposerDialogCaptionEditorConstants").AUTO_GENERATION_CANCEL_FETCH);a=a.set("autoGenerateCanceled",!0);a=a.set("isAutoGenerating",!1);this.$VideoComposerCaptionsStoreClass2(b("VideoCaptionsLoggerEvents").CAPTION_GENERATE_CANCEL);return a;case b("VideoComposerCaptionsTabActionTypes").START_SRT_UPLOAD:a=a.set("isSRTUploading",!0);a=a.set("partialUploadError",c.partialUploadError);l=a.get("video_id");m=a.get("accessToken");l&&m&&this.$VideoComposerCaptionsStoreClass14(l,c.captions,m);return a;case b("VideoComposerActionTypes").FETCHED_AUTO_GEN_V1_SUBTITLE:a=a.set("autoGenV1Subtitle",c.autoGenV1Subtitle);return a;case b("VideoComposerActionTypes").UPLOAD_LOCAL_CAPTIONS:a=a.set("localCaptionFiles",a.get("localCaptionFiles").concat(c.captions));a=a.set("partialUploadError",c.partialUploadError);return a;case b("VideoComposerActionTypes").UPDATE_ALL_LOCAL_CAPTIONS:a=a.set("localCaptionFiles",b("immutable").List(c.captions));return a;case b("VideoComposerCaptionsTabActionTypes").FINISH_SRT_UPLOAD:a=a.set("isSRTUploading",!1);this.$VideoComposerCaptionsStoreClass2(b("VideoCaptionsLoggerEvents").CAPTION_UPLOAD_COMPLETE,{},c.error?c.error.toString():"");(!c.success||c.error)&&(a=a.set("errors",a.errors.push(c.error||"")));j=c.uploadedVideoSubtitles.size>0;if(!j)return a;c.uploadedVideoSubtitles.forEach(function(c,e){a=d.$VideoComposerCaptionsStoreClass9(a,c.subtitlesID),f=b("VideoComposerDialogCaptionEditorUtils").makeNewCaptionFile(b("immutable").List(c.captions),e,h[e],!1),f&&(a=d.$VideoComposerCaptionsStoreClass10(a,f,e))});return a;case b("VideoComposerCaptionsTabActionTypes").UPDATE_CAPTION_FILES:f=b("VideoComposerStores").getCaptionEditorStore().getState().get("captionFile");i=b("VideoComposerStores").getCaptionEditorStore().getState().get("locale");l=i!==b("VideoComposerDialogCaptionEditorConstants").EMPTY_LOCALE&&i!==b("VideoComposerDialogCaptionEditorConstants").INITIAL_SPOKEN_LOCALE;l&&(a=this.$VideoComposerCaptionsStoreClass9(a,b("VideoComposerStores").getCaptionEditorStore().getState().get("captionID")));m=f!==null;if(m&&l)return this.$VideoComposerCaptionsStoreClass10(a,f,i);return l?this.$VideoComposerCaptionsStoreClass15(a,i):a;case b("VideoComposerCaptionsTabActionTypes").UPDATE_ERROR_STATE:a=a.set("errors",c.errors).set("show_caption_editor",!1);return a;case b("VideoComposerCaptionsTabActionTypes").RETRY_AUTO_GENERATION:j=b("VideoComposerDialogCaptionEditorUtils").getCaptionErrorMessage(b("VideoUploadUIError").AUTOGENERATE_FAIL_RETRY);a=a.set("isAutoGenerating",!1).set("autoGenProcessRate",b("VideoComposerDialogCaptionEditorConstants").DEFAULT_PROCESSING_SPEED).set("progress",0).set("numAutoGenerationRetries",a.get("numAutoGenerationRetries")+1).set("errors",b("immutable").List([j]));this.$VideoComposerCaptionsStoreClass2(b("VideoCaptionsLoggerEvents").CAPTION_GENERATE_RETRY,{},j.toString());b("setTimeout")(b("VideoComposerCaptionsTabActions").generate,b("VideoComposerDialogCaptionEditorConstants").POLL_FAKE_FREQUENCY_GENERATE_MS);return a;case b("VideoComposerCaptionsTabActionTypes").RESUME_AUTO_GENERATION:m=a.get("video_id");l=a.get("autoGeneratingLanguage");m&&l&&(this.$VideoComposerCaptionsStoreClass16(m),this.$VideoComposerCaptionsStoreClass17(m,l),this.$VideoComposerCaptionsStoreClass18());return a;case b("VideoComposerCaptionsTabActionTypes").INITIALIZE_ALL_CAPTION_FILES:a=a.set("serverCaptionLocales",c.subtitles.keySeq());c.subtitles.forEach(function(c,e){if(c.locale===b("VideoComposerDialogCaptionEditorConstants").EMPTY_LOCALE)return;f=b("VideoComposerDialogCaptionEditorUtils").makeNewCaptionFile(b("immutable").List(c.captions),e,h[e],c.creationMethod===b("VideoComposerDialogCaptionEditorConstants").AUTO_GENERATED);f&&(a=d.$VideoComposerCaptionsStoreClass10(a,f,e))});return a;case b("VideoComposerCaptionsTabActionTypes").BOOTLOAD_PARAMETERS_CAPTIONS_TAB:a=a.set("captionsFeaturesMode",c.data.captionsFeaturesMode).set("isDefaultLangugeSectionEnabled",c.data.enableCaptionsDefaultLanguageSection!=null?c.data.enableCaptionsDefaultLanguageSection:!0).set("isNewCaptionsTabTextAndLayoutEnabled",c.data.enableNewCaptionsTabTextAndLayout===!0).set("shouldShowNuxPill",c.data.shouldShowNuxPill===!0).set("enableAddCaptionWhenUploading",c.data.enableAddCaptionWhenUploading===!0).set("autogeneratableHeadLocales",c.data.autogeneratableHeadLocales!=null?b("immutable").Set(c.data.autogeneratableHeadLocales):b("VideoComposerDialogCaptionEditorConstants").AUTO_GENERATABLE_HEAD_LOCALES).set("showAutopublishCaptionsFeature",c.data.showAutopublishCaptionsFeature===!0).set("shouldAutopublishCaptions",c.data.shouldAutopublishCaptions===!0).set("enableNullStateForCaptionsAdded",c.data.enableNullStateForCaptionsAdded===!0).set("showEditAndReviewButton",c.data.showEditAndReviewButton===!0).set("fakeAutogenerateProgressRate",c.data.fakeAutogenerateProgressRate!=null?c.data.fakeAutogenerateProgressRate:0);return a;case b("VideoComposerCaptionsTabActionTypes").CHANGE_PUBLISHED_STATE:g=a.get("drafts");e=g.get(c.id);i=e.publishedState;j=b("VideoComposerDialogCaptionEditorUtils").getUpdatedPublishState(e.publishedState);e.publishedState=j;g=b("VideoComposerDialogCaptionEditorUtils").filterOutDeletions(g.splice(c.id,1,e),a.get("deletionCache"));m=a.get("publishedStateChangeset").set(e.id,e.publishedState);if(a.get("composerID")){l=b("VideoComposerDialogCaptionEditorUtils").getPublishedCaptionFiles(a.get("captionFiles"),a.get("drafts")||b("immutable").List());b("ComposerVideoUploadActions").updateCaptions(a.get("composerID"),Array.from(l.values()))}this.$VideoComposerCaptionsStoreClass2(b("VideoCaptionsLoggerEvents").CHANGE_PUBLISHED_STATE,{previous_state:i,new_state:e.publishedState},null,e.id);return a.set("drafts",g).set("publishedStateChangeset",m);case b("VideoComposerCaptionsTabActionTypes").PENDING_TO_PUBLISHED:return a.set("drafts",b("VideoComposerDialogCaptionEditorUtils").changeAllPendingToPublished(a.get("drafts"))).set("publishedStateChangeset",b("immutable").Map());case b("VideoComposerActionTypes").SET_DEFAULT_CAPTION_LOCALE:var p=c.locale;return a.set("captionFiles",a.get("captionFiles").map(function(a){a.setIsDefault(p==a.getLocale());return a})).set("localCaptionFiles",a.get("localCaptionFiles").map(function(a){a.setIsDefault(p==a.getLocale());return a}));case b("VideoComposerActionTypes").SET_DISMISS_CAPTIONS_NUX:return a.set("shouldShowNuxPill",!1);case b("VideoComposerActionTypes").FETCH_CAPTION_EDITOR_CROSSPOST_PARAMS:j=b("VideoComposerDialogCaptionEditorUtils").getConvertedCaptionURLs(c.captions);l=this.getInitialState();c.spokenLocale!==""&&c.spokenLanguage!==""&&(l=l.set("spokenLocale",c.spokenLocale).set("spokenLanguage",c.spokenLanguage));return l.set("captionsFeaturesMode",c.captionsFeaturesMode).set("composerMode",b("VideoComposerDialogMode").VIDEO_CROSSPOST).set("captionURLs",j);case b("VideoComposerActionTypes").CAPTIONS_EDIT_PARAMS_FETCHED:i=b("VideoComposerDialogCaptionEditorUtils").getConvertedCaptionURLs(c.data.localCaptionURLs);return a.set("captionsFeaturesMode",c.data.captionsFeaturesMode).set("hasAutoGenV1",c.data.hasAutoGenV1).set("composerMode",b("VideoComposerDialogMode").VIDEO_EDIT).set("captionURLsForEdit",i).set("localCaptionFiles",a.get("localCaptionFiles").concat(i));case b("VideoComposerActionTypes").DELETE_CAPTIONS_URL:return a.set("captionURLs",a.get("captionURLs").splice(c.id,1));case b("VideoComposerActionTypes").DELETE_LOCAL_CAPTION_FILE:return a.set("localCaptionFiles",a.get("localCaptionFiles").splice(c.id,1));case b("VideoComposerActionTypes").DELETE_LOCALE_WITHOUT_SUBTITLE:return a.set("localesWithoutSubtitlesToDelete",a.get("localesWithoutSubtitlesToDelete").push(c.locale));case b("VideoComposerActionTypes").CHANGE_PUBLISHED_STATE_URL:e=a.get("captionURLs").get(c.id);e.setPublishState(b("VideoComposerDialogCaptionEditorUtils").getUpdatedPublishState(e.getPublishState()));return a.set("captionURLs",a.get("captionURLs").splice(c.id,1,e));case b("VideoComposerActionTypes").UPDATE_SHOULD_AUTOPUBLISH_CAPTIONS:return a.set("shouldAutopublishCaptions",c.value);default:return a}};d.getCrosspostPostData=function(){this.logComposerSaveEvent();return b("Promise").resolve({})};d.getPostRequestDataToSend=function(){__p&&__p();var a=this.getState();if(this.shouldEnableOldDataModel())return b("Promise").resolve({captions:Array.from(a.get("localCaptionFiles"))});var c=a.get("video_id");c&&b("VideoComposerDialogCaptionEditorUtils").updatePublishedStatesOnServer(a.videoComposerID,c,a.get("pageID"),this.getpublishedStateChangeset());c=a.get("drafts");a=b("VideoComposerDialogCaptionEditorUtils").getPublishedCaptionFiles(a.get("captionFiles"),c||b("immutable").List());this.logComposerSaveEvent();if(this.getSpokenLocale()===b("VideoComposerDialogCaptionEditorConstants").INITIAL_SPOKEN_LOCALE)return b("Promise").resolve({captions:Array.from(a.values()),autopublish_captions:this.getShouldAutopublishCaptions()});else return b("Promise").resolve({captions:Array.from(a.values()),spoken_locale:this.getSpokenLocale(),autopublish_captions:this.getShouldAutopublishCaptions()})};d.getPostDataForEdit=function(){__p&&__p();var a=this.getState();if(this.shouldEnableOldDataModel())return b("Promise").resolve(b("VideoComposerDialogCaptionEditorUtils").getOldCaptionsDataModelForEdit(a.localCaptionFiles,a.captionURLsForEdit));var c=a.get("video_id");c&&b("VideoComposerDialogCaptionEditorUtils").updatePublishedStatesOnServer(a.videoComposerID,c,a.get("pageID"),this.getpublishedStateChangeset());c=a.get("drafts");c=b("VideoComposerDialogCaptionEditorUtils").getPublishedCaptionFilesForEdit(a.get("captionFiles"),c||b("immutable").List());var d={};a.get("serverCaptionLocales").concat(a.get("localesWithoutSubtitlesToDelete")).forEach(function(a,b){d["remove_caption["+b+"]"]=a});this.getSpokenLocale()!==b("VideoComposerDialogCaptionEditorConstants").INITIAL_SPOKEN_LOCALE&&(d.spoken_locale=this.getSpokenLocale());d.autopublish_captions=this.getShouldAutopublishCaptions();return b("Promise").resolve(c.merge(d).toObject())};d.initialize=function(a,b,c,d,e,f,g,h,i){a=this.$VideoComposerCaptionsStoreClass19(a,b,c,d,e,f,g,h,i);this.$VideoComposerCaptionsStoreClass20(c);this.$VideoComposerCaptionsStoreClass21(c,!0);return a};d.$VideoComposerCaptionsStoreClass19=function(a,c,d,e,f,g,h,i,j){a=a.set("videoFile",c);c&&(a=a.set("videoData",b("VideoComposerDialogUploadUtils").createVideoData(c)));return a.set("video_id",d).set("accessToken",e).set("composerID",f||"").set("pageID",g).set("videoDurationInSec",h?h:0).set("composerMode",i).set("isOldComposer",j)};d.$VideoComposerCaptionsStoreClass5=function(a){__p&&__p();var c=b("VideoComposerStores").getCaptionEditorStore().getState().get("locale"),d=b("VideoComposerStores").getCaptionEditorStore().getState().get("language"),e=b("VideoComposerStores").getCaptionEditorStore().getState().get("captionID"),f=a.get("drafts"),g=f.toArray();for(var h=0;h<f.size;h++){var i=f.get(h);if(i.id===e){i.locale=c;i.language=d;g[h]=i;break}}i=b("VideoComposerDialogCaptionEditorUtils").filterOutDeletions(b("immutable").List(g),a.get("deletionCache"));return a.set("drafts",i)};d.$VideoComposerCaptionsStoreClass4=function(a){var c=a.get("drafts"),d=b("immutable").List();for(var e=0;e<c.size;e++){var f=c.get(e);f.locale===b("VideoComposerDialogCaptionEditorConstants").EMPTY_LOCALE?b("VideoComposerDialogCaptionEditorUtils").silentlyDeleteSubtitle(a.get("video_id"),f,a.get("pageID")):d=d.push(f)}return a.set("drafts",d)};d.$VideoComposerCaptionsStoreClass9=function(a,c){c=b("VideoComposerDialogCaptionEditorUtils").addLocaleAsPublishPending(a.get("publishedStateChangeset"),c);var d=b("VideoComposerDialogCaptionEditorUtils").updateToChangesetValues(a.get("drafts"),c);return a.set("publishedStateChangeset",c).set("drafts",d)};d.$VideoComposerCaptionsStoreClass2=function(a,b,c,d){a=this.getLogger().setEvent(a).setError(c).setSubtitleID(d);if(b!==null)for(var e in b){if(e===null||b[e]===null)return;a.addToExtraData(e,b[e])}a.log()};d.$VideoComposerCaptionsStoreClass11=function(a,b){__p&&__p();var c=a.get("videoDurationInSec");if(c===0)return a;c=100*b/c;c=Math.min(c,99);c>a.get("progress")&&(a=a.set("progress",c));if(a.fakeAutogenerateProgressRate!==0)return a.set("autoGenProcessRate",a.fakeAutogenerateProgressRate);else{c=(Date.now()-a.get("generateStarted"))/1e3;return a.set("autoGenProcessRate",b/c)}};d.$VideoComposerCaptionsStoreClass10=function(a,c,d){d=b("VideoComposerDialogCaptionEditorUtils").getHeadLocale(d);d=a.get("captionFiles").set(d,c);c=a.get("composerID");if(c){var e=a.get("drafts");e=b("VideoComposerDialogCaptionEditorUtils").getPublishedCaptionFiles(d,e||b("immutable").List());b("ComposerVideoUploadActions").updateCaptions(c,Array.from(e.values()))}return a.set("captionFiles",d)};d.$VideoComposerCaptionsStoreClass15=function(a,c){c=b("VideoComposerDialogCaptionEditorUtils").getHeadLocale(c);c=a.get("captionFiles")["delete"](c);var d=a.get("composerID");if(d){var e=a.get("drafts");e=b("VideoComposerDialogCaptionEditorUtils").getPublishedCaptionFiles(c,e||b("immutable").List());b("ComposerVideoUploadActions").updateCaptions(d,Array.from(e.values()))}return a.set("captionFiles",c)};d.$VideoComposerCaptionsStoreClass20=function(a){__p&&__p();var c=this;b("VideoComposerDialogCaptionEditorUtils").fetchCaptions(a,function(d){__p&&__p();d&&d.video&&d.video.spoken_language&&(b("VideoComposerCaptionsTabActions").selectSpokenLanguage(c.getState().videoComposerID,d.video.spoken_language),b("VideoComposerCaptionsTabActions").selectSpokenLocale(c.getState().videoComposerID,d.video.spoken_locale+"_XX")),b("VideoComposerDialogCaptionEditorUtils").convertFetchToObject(a,!1,d,function(a){__p&&__p();a=b("VideoComposerDialogCaptionEditorUtils").makeAllSRTCaptionPromises(a);b("promiseDone")(b("Promise").all(a).then(function(a){var d=b("immutable").Map(),e="";a.forEach(function(a){if(!a)return;d=d.set(a.locale,{captions:a.captions,locale:a.locale,publishedState:a.publishedState,subtitlesID:a.subtitlesID,isDefault:a.isDefault,creationMethod:a.creationMethod});a.isDefault&&(e=a.locale)});b("VideoComposerCaptionsTabActions").initializeAllCaptionFiles(c.getState().videoComposerID,d);e!==""&&b("VideoComposerCaptionsTabActions").setDefaultLocale(c.getState().videoComposerID,e)}))})})};d.$VideoComposerCaptionsStoreClass12=function(a){a=a.payload;a=a&&a.success;if(!a){a=b("VideoComposerDialogCaptionEditorUtils").getCaptionErrorMessage(b("VideoUploadUIError").CAPTION_ERROR_DELETE_FAIL);this.$VideoComposerCaptionsStoreClass22(a);b("VideoComposerCaptionsTabActions").deleteSubtitlesFailure(this.getState().videoComposerID)}};d.$VideoComposerCaptionsStoreClass23=function(a,c,d){a=b("XVideoCaptionGenerateAsyncController").getURIBuilder().setInt("video_id",a).setBool("regenerate",!0).setBool("is_new_editor",!0);c!==b("VideoComposerDialogCaptionEditorConstants").INITIAL_SPOKEN_LOCALE&&(a=a.setString("locale",c));c=a.getURI();a=b("ActorURI").create(c,this.getState().get("pageID"));new(b("AsyncRequest"))(a).setMethod("POST").setHandler(d).send()};d.$VideoComposerCaptionsStoreClass7=function(a,c,d){__p&&__p();var e=this;if(!b("VideoComposerDialogCaptionEditorUtils").isAutoGenerateable(d))return b("VideoUploadUIError").CAPTION_ERROR_GENERATE_FAIL;this.$VideoComposerCaptionsStoreClass2(b("VideoCaptionsLoggerEvents").CAPTION_GENERATE_BUTTON_CLICKED);var f=!1,g=b("VideoComposerDialogCaptionEditorUtils").getHeadLocale(d);this.getState().get("drafts").forEach(function(a){a=b("VideoComposerDialogCaptionEditorUtils").getHeadLocale(a.locale);a===g&&(f=!0)});if(f)return b("VideoUploadUIError").CAPTION_ERROR_DUPLICATE_LOCALE;this.$VideoComposerCaptionsStoreClass23(a,d,function(b){b=b.payload;b=b&&b.status!==0;b?(e.$VideoComposerCaptionsStoreClass16(a),e.$VideoComposerCaptionsStoreClass17(a,c),e.$VideoComposerCaptionsStoreClass18()):e.$VideoComposerCaptionsStoreClass24(c)});return null};d.$VideoComposerCaptionsStoreClass13=function(a,b,c){a=this.$VideoComposerCaptionsStoreClass25(a,b,c);if(a){this.$VideoComposerCaptionsStoreClass21(b,!1);this.$VideoComposerCaptionsStoreClass26(a.id,a.locale);return}};d.$VideoComposerCaptionsStoreClass25=function(a,c,d){a=(c=a)!=null?(c=c.video)!=null?c.video_subtitles:c:c;if(!a)return null;c=a.map(function(a,b){return{id:a.id,language:a.display_language,locale:a.locale,creationMethod:a.subtitle_creation_method}});return b("VideoComposerDialogCaptionEditorUtils").findAutoGeneratedCaption(c,d)};d.$VideoComposerCaptionsStoreClass16=function(a){a&&b("SkywalkerManager").subscribe("shortwave/captions/"+a,this.$VideoComposerCaptionsStoreClass27.bind(this))};d.$VideoComposerCaptionsStoreClass27=function(a){var c=a&&a.payload;if(!c)return;c=JSON.parse(a.payload);if(!c.progress_ms)return;b("VideoComposerCaptionsTabActions").updateGenerateProgress(this.getState().videoComposerID,c.progress_ms/1e3)};d.$VideoComposerCaptionsStoreClass28=function(){var a=(new Date()-this.getState().get("generateStarted"))/1e3;return b("VideoComposerDialogCaptionEditorUtils").shouldRetryAutoGeneration(this.getState().get("videoDurationInSec"),a)};d.$VideoComposerCaptionsStoreClass29=function(){return this.getState().get("numAutoGenerationRetries")>0};d.$VideoComposerCaptionsStoreClass30=function(a){if(this.$VideoComposerCaptionsStoreClass29()){this.$VideoComposerCaptionsStoreClass24(a);b("VideoComposerCaptionsTabActions").generateComplete(this.getState().videoComposerID,b("immutable").List(),this.getState().get("spokenLocale"),null);return}b("VideoComposerCaptionsTabActions").retryAutoGeneration(this.getState().videoComposerID)};d.$VideoComposerCaptionsStoreClass17=function(a,c){__p&&__p();var d=this,e=!1,f=0,g=b("setInterval")(function(){__p&&__p();f++;if(e)return;if(!d.getState().get("isAutoGenerating")&&!d.getState().get("autoGenerateCanceled")){b("clearInterval")(g);return}e=!0;if(d.$VideoComposerCaptionsStoreClass28()){b("clearInterval")(g);d.$VideoComposerCaptionsStoreClass30(c);return}b("VideoComposerDialogCaptionEditorUtils").fetchCaptions(a,function(h){__p&&__p();var i=h&&h.video&&h.video.video_subtitles;if(i){i=d.$VideoComposerCaptionsStoreClass25(h,a,c);if(i){b("clearInterval")(g);d.$VideoComposerCaptionsStoreClass21(a,!1);d.$VideoComposerCaptionsStoreClass26(i.id,i.locale);return}if(f===l){d.$VideoComposerCaptionsStoreClass24(c);b("VideoComposerCaptionsTabActions").generateComplete(d.getState().videoComposerID,b("immutable").List(),d.getState().get("spokenLocale"),null);b("clearInterval")(g);return}e=!1}})},m)};d.$VideoComposerCaptionsStoreClass18=function(){__p&&__p();var a=this,c=0,d=this.getState().get("videoDurationInSec"),e=b("setInterval")(function(){__p&&__p();c++;var f=!a.getState().get("isAutoGenerating")||c>=b("VideoComposerDialogCaptionEditorConstants").MAX_FAKE_POLL_ITERATIONS;if(f){b("clearInterval")(e);return}f=a.getState().get("progress");f=f*d/100;var g=a.getState().get("autoGenProcessRate");f=f+g*b("VideoComposerDialogCaptionEditorConstants").POLL_FAKE_FREQUENCY_GENERATE_MS*b("VideoComposerDialogCaptionEditorConstants").AUTO_GEN_PROGRESS_RATE_FACTOR/1e3;b("VideoComposerCaptionsTabActions").updateGenerateProgress(a.getState().videoComposerID,f)},b("VideoComposerDialogCaptionEditorConstants").POLL_FAKE_FREQUENCY_GENERATE_MS)};d.$VideoComposerCaptionsStoreClass8=function(a){__p&&__p();var c=this;this.$VideoComposerCaptionsStoreClass23(a,b("VideoComposerDialogCaptionEditorConstants").INITIAL_SPOKEN_LOCALE,function(b){b=b.payload;var d=b&&b.status!==0;if(d)c.$VideoComposerCaptionsStoreClass31(a);else{d="Speech non speech request error";b.error&&(d=d+": "+b.error);c.$VideoComposerCaptionsStoreClass32(d)}})};d.$VideoComposerCaptionsStoreClass31=function(a){__p&&__p();var c=this,d=!1,e=0,f=b("setInterval")(function(){__p&&__p();e++;if(d)return;var g=b("XVideoCaptionSpeechDetectionAsyncController").getURIBuilder().setInt("video_id",a);d=!0;g=g.getURI();g=b("ActorURI").create(g,c.getState().get("pageID"));new(b("AsyncRequest"))(g).setMethod("POST").setHandler(function(g){__p&&__p();g=g.payload;var h=g&&g.status===2;if(h){b("clearInterval")(f);g.error==="speech_non_speech_fallback"?c.$VideoComposerCaptionsStoreClass2(b("VideoCaptionsLoggerEvents").CAPTION_CREATE_COMPLETE,{},"Speech non speech fallback path."):c.$VideoComposerCaptionsStoreClass2(b("VideoCaptionsLoggerEvents").CAPTION_CREATE_COMPLETE);b("VideoComposerDialogCaptionEditorUtils").fetchCaptionedLocales(b("nullthrows")(a),!1,function(a,d){b("VideoComposerDialogCaptionEditorUtils").finishCaptionsFetch(c.getState().videoComposerID,a,d);b("VideoComposerCaptionsTabActions").createComplete(c.getState().videoComposerID);if(c.getState().show_caption_editor){d=a.findIndex(function(a){return a.language===b("VideoComposerDialogCaptionEditorConstants").EMPTY_LOCALE});b("VideoComposerCaptionsTabActions").editCaptionsDraft(c.getState().videoComposerID,d)}else a.forEach(function(a,d){a.language===b("VideoComposerDialogCaptionEditorConstants").EMPTY_LOCALE&&b("VideoComposerCaptionsTabActions").deleteCaptionsDraft(c.getState().videoComposerID,d)})});return}h=g===null||g&&g.status===0;if(h){c.$VideoComposerCaptionsStoreClass33();b("clearInterval")(f);return}if(e===k){c.$VideoComposerCaptionsStoreClass32("Speech non speech timeout.");b("clearInterval")(f);return}d=!1}).send()},j)};d.$VideoComposerCaptionsStoreClass21=function(a,c){var d=this;b("VideoComposerDialogCaptionEditorUtils").fetchCaptionedLocales(a,c,function(a,c){return b("VideoComposerDialogCaptionEditorUtils").finishCaptionsFetch(d.getState().videoComposerID,a,c)})};d.$VideoComposerCaptionsStoreClass6=function(a,c){var d=this;b("VideoComposerDialogCaptionEditorUtils").fetchCaptionedLocales(a,!1,function(a,e){var f=c!==null;f&&d.$VideoComposerCaptionsStoreClass34(a,c);b("VideoComposerDialogCaptionEditorUtils").finishCaptionsFetch(d.getState().videoComposerID,a,e)})};d.$VideoComposerCaptionsStoreClass34=function(a,c){a=a.some(function(a){a.locale===c});a?b("VideoComposerCaptionsTabActions").resetAutoGeneratingLocale(this.getState().videoComposerID):b("VideoComposerCaptionsTabActions").resumeAutoGeneration(this.getState().videoComposerID)};d.uploadCaptionsForSRT=function(a,b,c){this.$VideoComposerCaptionsStoreClass14(a,b,c)};d.$VideoComposerCaptionsStoreClass14=function(a,c,d){__p&&__p();var e=this;d=b("XVideoCaptionUploadAsyncController").getURIBuilder().setInt("video_id",a);d=d.getURI();var f=b("ActorURI").create(d,this.getState().get("pageID")),h=c.length,i=[],j=function(b,d){var f=b.payload,j=f&&f.success==="true"&&f.error==="";if(j)i.push(d),c.length===0?e.$VideoComposerCaptionsStoreClass35(a,h,i,null):k();else{j=i.length;b.getError()!==0?d=b.getErrorDescriptionString():d=f?f.error:g._("We are unable to upload your SRT file at this time. Please try again later.");h===1?b=d:b=g._("Uploaded {uploadedCaptions} of {captionsToUpload}. Reason: {reason}",[g._param("uploadedCaptions",j),g._param("captionsToUpload",h),g._param("reason",d)]);e.$VideoComposerCaptionsStoreClass35(a,h,i,b)}},k=function(){var a=c.pop(),d=new FormData(),e=a.getIsDefault()?"captions_default":"captions_file0";d.append(e,a.getFile());new(b("AsyncRequest"))(f).setMethod("POST").setHandler(function(b){j(b,a)}).setErrorHandler(function(b){j(b,a)}).setRawData(d).send()};k()};d.$VideoComposerCaptionsStoreClass35=function(a,c,d,e){__p&&__p();var f=this,g=d.length===c;if(!g&&d.length===0){b("VideoComposerCaptionsTabActions").finishSRTUpload(this.getState().videoComposerID,!1,e,b("immutable").Map());return}b("VideoComposerDialogCaptionEditorUtils").fetchCaptions(a,function(c){__p&&__p();b("VideoComposerDialogCaptionEditorUtils").convertFetchToObject(a,!1,c,function(a,c){b("VideoComposerDialogCaptionEditorUtils").finishCaptionsFetch(f.getState().videoComposerID,a,c);c=b("VideoComposerDialogCaptionEditorUtils").makeSRTCaptionPromises(d,a);b("promiseDone")(b("Promise").all(c).then(function(a){var c=b("immutable").Map();a.forEach(function(a){if(!a)return;c=c.set(a.locale,{subtitlesID:a.subtitlesID,captions:a.captions})});b("VideoComposerCaptionsTabActions").finishSRTUpload(f.getState().videoComposerID,g,e,c)}))})})};d.$VideoComposerCaptionsStoreClass24=function(a){a=b("VideoComposerDialogCaptionEditorUtils").getCaptionErrorMessage(b("VideoUploadUIError").CAPTION_ERROR_GENERATE_FAIL,a);this.$VideoComposerCaptionsStoreClass2(b("VideoCaptionsLoggerEvents").CAPTION_GENERATE_COMPLETE,{},a.toString());this.$VideoComposerCaptionsStoreClass22(a)};d.$VideoComposerCaptionsStoreClass33=function(){var a=b("VideoComposerDialogCaptionEditorUtils").getCaptionErrorMessage(b("VideoUploadUIError").CAPTION_ERROR_CREATE_FAIL);this.$VideoComposerCaptionsStoreClass32(a.toString())};d.$VideoComposerCaptionsStoreClass32=function(a){var c=b("VideoComposerDialogCaptionEditorUtils").getCaptionErrorMessage(b("VideoUploadUIError").CAPTION_ERROR_CREATE_FAIL);this.$VideoComposerCaptionsStoreClass2(b("VideoCaptionsLoggerEvents").CAPTION_CREATE_COMPLETE,{},a);this.$VideoComposerCaptionsStoreClass22(c)};d.$VideoComposerCaptionsStoreClass22=function(a){a=b("immutable").List([a]);a={type:b("VideoComposerCaptionsTabActionTypes").UPDATE_ERROR_STATE,errors:a};b("VideoComposerDispatchers").get().dispatch(a)};d.$VideoComposerCaptionsStoreClass26=function(a,c){var d=this;this.$VideoComposerCaptionsStoreClass2(b("VideoCaptionsLoggerEvents").CAPTION_GENERATE_COMPLETE);b("VideoComposerDialogCaptionEditorUtils").fetchCaptionByID(a,function(e){var f=e&&e.video_subtitle&&e.video_subtitle.captions&&e.video_subtitle.captions.edges;if(f){f=e.video_subtitle.captions.edges;b("VideoComposerCaptionsTabActions").generateComplete(d.getState().videoComposerID,b("immutable").List(f),c,a)}})};d.isCaptionsEnabled=function(){var a=this.getState();a=a.drafts;var c=!1;a.forEach(function(a){a.publishedState!==b("VideoComposerDialogCaptionEditorPublishStateEnum").DRAFT&&(c=!0)});return c};return c}(b("VideoComposerStoreBase"));e.exports=c}),null);
__d("VideoComposerGameshowLightweightStoreClass",["Promise","ActorURI","AsyncRequest","VideoComposerActionTypes","VideoComposerGameshowLightweightActions","VideoComposerGameshowLightweightUtils","VideoComposerPollsUtils","VideoComposerStoreBase","VideoComposerStores","XVideoComposerGameshowLightweightFetchEditPostDataController","XVideoComposerGameshowLightweightLoadAvailableGamesController","XVideoComposerGameshowLightweightLoadGameDataController","flattenPHPQueryData","immutable","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(b("immutable").Record({videoComposerID:"",editingSavedGame:!1,showEditor:!1,availableGames:b("immutable").List(),draftSelectedGameID:null,draftSelectedGameData:null,savedSelectedGameID:null,savedSelectedGameData:null,enteredTimestampStringsMap:b("immutable").Map(),timestampErrorsMap:b("immutable").Map(),showRemoveGameConfirmationDialog:!1,showCloseEditorConfirmationDialog:!1}));a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new g()};d.reduceImpl=function(a,c){__p&&__p();switch(c.type){case b("VideoComposerActionTypes").INITIALIZE_UPLOAD_COMPOSER:var d=c.serverParams.common.actorID;return this.$VideoComposerGameshowLightweightStoreClass1(a,d);case b("VideoComposerActionTypes").GAMESHOW_LIGHTWEIGHT_LOAD_AVAILABLE_GAMES_SUCCESS:return a.set("availableGames",b("immutable").List(c.payload.games));case b("VideoComposerActionTypes").GAMESHOW_LIGHTWEIGHT_LOAD_GAME_SUCCESS:return this.$VideoComposerGameshowLightweightStoreClass2(a,c.payload.game);case b("VideoComposerActionTypes").GAMESHOW_LIGHTWEIGHT_LOAD_EDIT_DATA_SUCCESS:return this.$VideoComposerGameshowLightweightStoreClass3(a,c.payload.game);case b("VideoComposerActionTypes").GAMESHOW_LIGHTWEIGHT_SELECT_GAME:return this.$VideoComposerGameshowLightweightStoreClass4(a,c.gameID);case b("VideoComposerActionTypes").GAMESHOW_LIGHTWEIGHT_OPEN_EDITOR:return this.$VideoComposerGameshowLightweightStoreClass5(a);case b("VideoComposerActionTypes").GAMESHOW_LIGHTWEIGHT_CLOSE_EDITOR_ATTEMPT:return this.$VideoComposerGameshowLightweightStoreClass6(a);case b("VideoComposerActionTypes").GAMESHOW_LIGHTWEIGHT_CLOSE_EDITOR_CONFIRM:return this.$VideoComposerGameshowLightweightStoreClass7(a);case b("VideoComposerActionTypes").GAMESHOW_LIGHTWEIGHT_CLOSE_EDITOR_CANCEL:return a.set("showCloseEditorConfirmationDialog",!1);case b("VideoComposerActionTypes").GAMESHOW_LIGHTWEIGHT_UPDATE_TIMESTAMP_STRING:return this.$VideoComposerGameshowLightweightStoreClass8(a,c.questionID,c.text);case b("VideoComposerActionTypes").GAMESHOW_LIGHTWEIGHT_ATTEMPT_SAVE_EDITS:return this.$VideoComposerGameshowLightweightStoreClass9(a);case b("VideoComposerActionTypes").GAMESHOW_LIGHTWEIGHT_REMOVE_GAME_ATTEMPT:return a.set("showRemoveGameConfirmationDialog",!0);case b("VideoComposerActionTypes").GAMESHOW_LIGHTWEIGHT_REMOVE_GAME_CONFIRM:return this.$VideoComposerGameshowLightweightStoreClass10(a);case b("VideoComposerActionTypes").GAMESHOW_LIGHTWEIGHT_REMOVE_GAME_CANCEL:return a.set("showRemoveGameConfirmationDialog",!1);case b("VideoComposerActionTypes").RESET_COMPOSER:return this.getInitialState();default:return a}};d.$VideoComposerGameshowLightweightStoreClass1=function(a,c){if(c==null)return a;var d=b("XVideoComposerGameshowLightweightLoadAvailableGamesController").getURIBuilder().getURI();d=b("ActorURI").create(d,c);c=new(b("AsyncRequest"))().setURI(d).exec().then(function(c){b("VideoComposerGameshowLightweightActions").loadAvailableGamesSuccess(a.videoComposerID,c.payload)});b("promiseDone")(c);return a};d.$VideoComposerGameshowLightweightStoreClass5=function(a){a=a.set("showEditor",!0).set("draftSelectedGameID",a.savedSelectedGameID).set("draftSelectedGameData",a.savedSelectedGameData);var b=a.draftSelectedGameData;return b===null||b===void 0?a:this.$VideoComposerGameshowLightweightStoreClass11(a,b)};d.$VideoComposerGameshowLightweightStoreClass12=function(a){var c=a.draftSelectedGameData;if(!c)return null;c=c.set("questions",c.questions.map(function(c){var d=a.enteredTimestampStringsMap.get(c.id);d=b("VideoComposerPollsUtils").isValidTimeString(d)?b("VideoComposerGameshowLightweightUtils").timeStringToMilliseconds(d):-1;return c.set("releaseTimestamp",d)})).set("resultsReleaseTimestamp",b("VideoComposerPollsUtils").isValidTimeString(a.enteredTimestampStringsMap.get("results"))?b("VideoComposerGameshowLightweightUtils").timeStringToMilliseconds(a.enteredTimestampStringsMap.get("results")):-1);return c};d.$VideoComposerGameshowLightweightStoreClass6=function(a){var c=this.$VideoComposerGameshowLightweightStoreClass12(a);return b("immutable").is(c,a.savedSelectedGameData)?this.$VideoComposerGameshowLightweightStoreClass7(a):a.set("showCloseEditorConfirmationDialog",!0)};d.$VideoComposerGameshowLightweightStoreClass7=function(a){a=a.set("showEditor",!1).set("showCloseEditorConfirmationDialog",!1);return this.$VideoComposerGameshowLightweightStoreClass13(a)};d.$VideoComposerGameshowLightweightStoreClass13=function(a){return a.set("draftSelectedGameID",null).set("draftSelectedGameData",null).set("enteredTimestampStringsMap",b("immutable").Map()).set("timestampErrorsMap",b("immutable").Map())};d.$VideoComposerGameshowLightweightStoreClass11=function(a,c){var d=b("immutable").Map();c.questions.forEach(function(a){d=d.set(a.id,b("VideoComposerGameshowLightweightUtils").millisecondsToTimeString(a.releaseTimestamp))});d=d.set("results",b("VideoComposerGameshowLightweightUtils").millisecondsToTimeString(c.resultsReleaseTimestamp));return a.set("enteredTimestampStringsMap",d).set("timestampErrorsMap",b("immutable").Map())};d.$VideoComposerGameshowLightweightStoreClass4=function(a,b){if(b===a.draftSelectedGameID)return a;this.$VideoComposerGameshowLightweightStoreClass14(b);return a.set("draftSelectedGameID",b)};d.$VideoComposerGameshowLightweightStoreClass14=function(a){var c=this;a=b("XVideoComposerGameshowLightweightLoadGameDataController").getURIBuilder().setFBID("game_id",a).getURI();a=new(b("AsyncRequest"))().setURI(a).exec().then(function(a){b("VideoComposerGameshowLightweightActions").loadGameDataSuccess(c.getState().videoComposerID,a.payload)});b("promiseDone")(a)};d.$VideoComposerGameshowLightweightStoreClass2=function(a,c){if(!c)return a.set("draftSelectedGameData",null);c=b("VideoComposerGameshowLightweightUtils").mapGameDataPayloadToGameDataRecord(c);return this.$VideoComposerGameshowLightweightStoreClass11(a.set("draftSelectedGameData",c),c)};d.fetchEditPostData=function(a,c){var d=b("XVideoComposerGameshowLightweightFetchEditPostDataController").getURIBuilder().setFBID("video_id",c.videoID).getURI();c=c.common.actorID;d=b("ActorURI").create(d,c);return new(b("AsyncRequest"))().setURI(d).exec().then(function(c){b("VideoComposerGameshowLightweightActions").loadEditDataSuccess(a,c.payload)})};d.$VideoComposerGameshowLightweightStoreClass3=function(a,c){if(!c)return a;c=b("VideoComposerGameshowLightweightUtils").mapGameDataPayloadToGameDataRecord(c);return a.set("savedSelectedGameData",c).set("savedSelectedGameID",c.id).set("editingSavedGame",!0)};d.$VideoComposerGameshowLightweightStoreClass8=function(a,b,c){var d=a.enteredTimestampStringsMap;d=d.set(b,c);return a.set("enteredTimestampStringsMap",d)};d.$VideoComposerGameshowLightweightStoreClass9=function(a){__p&&__p();var c=a.draftSelectedGameData;if(!c)return a.set("showEditor",!1);c=b("VideoComposerStores").getMetadataStore().getState();c=c.videoDuration;c=b("VideoComposerGameshowLightweightUtils").checkForTimestampErrors(a.enteredTimestampStringsMap,c);var d=a.set("timestampErrorsMap",c);if(!c.isEmpty())return d;d=d.set("showEditor",!1).set("savedSelectedGameID",a.draftSelectedGameID).set("savedSelectedGameData",this.$VideoComposerGameshowLightweightStoreClass12(a));return this.$VideoComposerGameshowLightweightStoreClass13(d)};d.$VideoComposerGameshowLightweightStoreClass10=function(a){return a.set("showRemoveGameConfirmationDialog",!1).set("savedSelectedGameID",null).set("savedSelectedGameData",null)};d.getPostRequestDataToSend=function(){var a=this.getState().savedSelectedGameData;if(a===null||a===void 0)return b("Promise").resolve();a=this.$VideoComposerGameshowLightweightStoreClass15(a);a=b("flattenPHPQueryData")({gameshow_lightweight:a});return b("Promise").resolve(a)};d.$VideoComposerGameshowLightweightStoreClass15=function(a){var b=[];a.questions.forEach(function(a){b.push({id:parseInt(a.id,10),releaseTimestamp:a.releaseTimestamp})});return{id:parseInt(a.id,10),questions:b,resultsReleaseTimestamp:a.resultsReleaseTimestamp}};return c}(b("VideoComposerStoreBase"));e.exports=a}),null);
__d("VideoComposerPollsStoreClass",["invariant","Promise","ImmutableRecordWithV4Types","VideoComposerActionTypes","VideoComposerPollsConstants","VideoComposerPollsTypes","VideoComposerPollsUtils","VideoComposerStoreBase","VideoComposerStores","VideoPollsOptionType","VideoPollType","flattenPHPQueryData","gkx","immutable","uuid"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("ImmutableRecordWithV4Types").Record;var h=b("VideoComposerPollsTypes").EditorState,i=b("VideoComposerPollsTypes").PollDataRecordFactory,j=b("VideoComposerPollsTypes").PollOptionDataRecordFactory,k=b("VideoComposerPollsTypes").SliderDataRecordFactory,l=3600,m="START",n="END",o=a({videoComposerID:"",isAdBreaksPollCreationEnabled:!1,isImageAttachmentEnabled:!1,savedStateLoaded:!1,draftPoll:i(),editAttemptPollID:"",deleteAttemptPollID:null,editorState:h.CLOSED,persistedPolls:[],polls:b("immutable").List(),showEditor:!1,showCancelConfirmDialog:!1,showCloseEditorConfirmDialog:!1,showEditAttemptDialog:!1,isLiveVideo:!1,enableWasLiveVoting:!1,showWasLiveVotingToggle:!1,canSeeSlidersSection:!1,showOpenPollsFormSectionConfirmationDialog:!1,showOpenSlidersFormSectionConfirmationDialog:!1,draftSlider:k(),sliders:b("immutable").List(),editAttemptSliderID:"",deleteAttemptSliderID:null});c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.mapPollRecordToNewPollRequestData=function(a,c){var e=[],f=[];a.options.forEach(function(a,b){b=a.imageFile!==null?this.constructImageFileKey(c,b):null;f.push({text:a.text,imageFileKey:b});e.push(a.stickerID)},babelHelpers.assertThisInitialized(d));return{question_text:a.questionText,display_results_after_voting:a.showResults,display_results_timestamp:a.displayResultsTimestamp,voting_closed_timestamp:a.votingClosedTimestamp,options:[],sticker_options:a.optionType===b("VideoPollsOptionType").STICKER?e:[],options_with_images:a.optionType===b("VideoPollsOptionType").TEXT?f:[],start_time:d.$VideoComposerPollsStoreClass29(a.startTime),end_time:d.$VideoComposerPollsStoreClass29(a.endTime),is_ad_break_poll:a.isAdBreakPoll,poll_type:a.pollType}},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.getInitialState=function(){return o()};d.reduceImpl=function(a,c){__p&&__p();switch(c.type){case b("VideoComposerActionTypes").INITIALIZE_UPLOAD_COMPOSER:a=a.set("isImageAttachmentEnabled",c.serverParams.isImageAttachmentEnabled);a=a.set("canSeeSlidersSection",this.$VideoComposerPollsStoreClass1(a));return a.set("isAdBreaksPollCreationEnabled",c.serverParams.isAdBreaksPollCreationEnabled);case b("VideoComposerActionTypes").POLLS_BOOTLOAD_EDIT:a=a.set("isImageAttachmentEnabled",c.data.isImageAttachmentEnabled);a=a.set("isAdBreaksPollCreationEnabled",c.data.isAdBreaksPollCreationEnabled);a=a.set("persistedPolls",c.data.polls);a=a.set("isLiveVideo",c.data.isLiveVideo);a=a.set("showWasLiveVotingToggle",c.data.showWasLiveVotingToggle);a=a.set("enableWasLiveVoting",c.data.enableWasLiveVoting);a=a.set("polls",b("immutable").List(c.data.polls.map(b("VideoComposerPollsUtils").mapPersistedPollToLocalPoll)));a=a.set("canSeeSlidersSection",this.$VideoComposerPollsStoreClass1(a));return a;case b("VideoComposerActionTypes").POLLS_ADD_NEW:var d=this.$VideoComposerPollsStoreClass2(a,c.isAdBreakPoll);return a.set("showEditor",!0).set("editorState",h.ADDING_NEW_POLL).set("draftPoll",d);case b("VideoComposerActionTypes").POLLS_CLOSE_EDITOR_ATTEMPT:if(this.$VideoComposerPollsStoreClass3(a))return a.set("showCloseEditorConfirmDialog",!0);else return this.$VideoComposerPollsStoreClass4(a,!0);case b("VideoComposerActionTypes").POLLS_CLOSE_EDITOR_ABANDON:return a.set("showCloseEditorConfirmDialog",!1);case b("VideoComposerActionTypes").POLLS_CLOSE_EDITOR_CONFIRM:return this.$VideoComposerPollsStoreClass4(a,!0);case b("VideoComposerActionTypes").POLLS_CANCEL_CHANGES_ATTEMPT:if(this.$VideoComposerPollsStoreClass3(a))return a.set("showCancelConfirmDialog",!0);else return this.$VideoComposerPollsStoreClass4(a,a.polls.size===0);case b("VideoComposerActionTypes").POLLS_CANCEL_CHANGES_ABANDON:return a.set("showCancelConfirmDialog",!1);case b("VideoComposerActionTypes").POLLS_CANCEL_CHANGES_CONFIRM:return this.$VideoComposerPollsStoreClass4(a,a.polls.size===0);case b("VideoComposerActionTypes").POLLS_DELETE_ATTEMPT:return a.set("deleteAttemptPollID",c.pollID);case b("VideoComposerActionTypes").POLLS_DELETE_INTERACTION_CANCEL:return this.$VideoComposerPollsStoreClass5(a);case b("VideoComposerActionTypes").POLLS_DELETE_CONFIRM:d=a.polls.findIndex(function(b){return b.id===a.deleteAttemptPollID});return a.set("polls",a.polls["delete"](d)).set("deleteAttemptPollID",null);case b("VideoComposerActionTypes").POLLS_DRAFT_ADD_OPTION:return a.set("draftPoll",a.draftPoll.set("options",a.draftPoll.options.push(j())));case b("VideoComposerActionTypes").POLLS_DRAFT_DELETE_OPTION:return a.set("draftPoll",a.draftPoll.set("options",a.draftPoll.options.deleteIn([c.optionIndex])));case b("VideoComposerActionTypes").POLLS_DRAFT_SET_RESULTS_VISIBLE:return a.set("draftPoll",a.draftPoll.set("showResults",c.showResultsAfterVote));case b("VideoComposerActionTypes").POLLS_DRAFT_SET_DISPLAY_RESULTS_TIMESTAMP:return a.set("draftPoll",a.draftPoll.set("displayResultsTimestamp",c.time));case b("VideoComposerActionTypes").POLLS_DRAFT_SET_VOTING_CLOSED_TIMESTAMP:return a.set("draftPoll",a.draftPoll.set("votingClosedTimestamp",c.time));case b("VideoComposerActionTypes").POLLS_DRAFT_TOGGLE_AD_BREAK_POLL:d=!a.draftPoll.isAdBreakPoll;var e=a.draftPoll;e=e.set("isAdBreakPoll",d);e=e.set("pollType",d?b("VideoPollType").AD_BREAK_POLL:b("VideoPollType").SCHEDULED);return a.set("draftPoll",e);case b("VideoComposerActionTypes").POLLS_DRAFT_UPDATE_START_TIME:return this.$VideoComposerPollsStoreClass6(a,"startTime",c.time);case b("VideoComposerActionTypes").POLLS_DRAFT_UPDATE_END_TIME:return this.$VideoComposerPollsStoreClass6(a,"endTime",c.time);case b("VideoComposerActionTypes").POLLS_DRAFT_UPDATE_OPTION_TEXT:d=a.draftPoll.options;d=d.setIn([c.optionIndex],d.get(c.optionIndex).set("text",c.text));return a.set("draftPoll",a.draftPoll.set("options",d));case b("VideoComposerActionTypes").POLLS_DRAFT_STICKER_SELECT:d=a.draftPoll.options;d=d.setIn([c.optionIndex],d.get(c.optionIndex).set("stickerID",c.stickerID));e=d.filter(function(a){return a.stickerID!==""}).size;a=a.set("draftPoll",a.draftPoll.set("options",d));a=a.set("draftPoll",a.draftPoll.set("optionType",e===0?b("VideoPollsOptionType").TEXT:b("VideoPollsOptionType").STICKER));return a;case b("VideoComposerActionTypes").POLLS_DRAFT_UPDATE_IMAGE_ATTACHMENT:d=a.draftPoll.options;d=d.setIn([c.optionIndex],d.get(c.optionIndex).set("imageURL",c.imageURL));d=d.setIn([c.optionIndex],d.get(c.optionIndex).set("imageFile",c.imageFile));return a.set("draftPoll",a.draftPoll.set("options",d));case b("VideoComposerActionTypes").POLLS_DRAFT_UPDATE_QUESTION:return a.set("draftPoll",a.draftPoll.set("questionText",c.text));case b("VideoComposerActionTypes").POLLS_EDIT_ATTEMPT:if(this.$VideoComposerPollsStoreClass3(a))return this.$VideoComposerPollsStoreClass7(a,c.pollID);else return this.$VideoComposerPollsStoreClass8(a,c.pollID);case b("VideoComposerActionTypes").POLLS_EDIT_ATTEMPT_DISCARD_PREVIOUS:return this.$VideoComposerPollsStoreClass9(a);case b("VideoComposerActionTypes").POLLS_EDIT_ATTEMPT_HIDE_DIALOG:return this.$VideoComposerPollsStoreClass10(a);case b("VideoComposerActionTypes").POLLS_EDIT_ATTEMPT_SAVE_PREVIOUS:return this.$VideoComposerPollsStoreClass11(a);case b("VideoComposerActionTypes").POLLS_TOGGLE_WAS_LIVE_VOTING:return a.set("enableWasLiveVoting",c.enableWasLiveVoting);case b("VideoComposerActionTypes").POLLS_OPEN_POLLS_FORM_SECTION_ATTEMPT:return this.$VideoComposerPollsStoreClass12(a);case b("VideoComposerActionTypes").POLLS_OPEN_POLLS_FORM_SECTION_CONFIRM:return this.$VideoComposerPollsStoreClass13(a);case b("VideoComposerActionTypes").POLLS_OPEN_POLLS_FORM_SECTION_CANCEL:return a.set("showOpenPollsFormSectionConfirmationDialog",!1);case b("VideoComposerActionTypes").POLLS_OPEN_SLIDERS_FORM_SECTION_ATTEMPT:return this.$VideoComposerPollsStoreClass14(a);case b("VideoComposerActionTypes").POLLS_OPEN_SLIDERS_FORM_SECTION_CONFIRM:return this.$VideoComposerPollsStoreClass15(a);case b("VideoComposerActionTypes").POLLS_OPEN_SLIDERS_FORM_SECTION_CANCEL:return a.set("showOpenSlidersFormSectionConfirmationDialog",!1);case b("VideoComposerActionTypes").POLLS_DRAFT_UPDATE_SLIDER_QUESTION:return a.set("draftSlider",a.draftSlider.set("questionText",c.text));case b("VideoComposerActionTypes").POLLS_DRAFT_UPDATE_SLIDER_EMOJI:return a.set("draftSlider",a.draftSlider.set("emoji",c.emoji));case b("VideoComposerActionTypes").POLLS_EDIT_SLIDER_ATTEMPT:return this.$VideoComposerPollsStoreClass16(a,c.sliderID);case b("VideoComposerActionTypes").POLLS_DELETE_SLIDER_ATTEMPT:return a.set("deleteAttemptSliderID",c.sliderID);case b("VideoComposerActionTypes").POLLS_DELETE_SLIDER_CONFIRM:return this.$VideoComposerPollsStoreClass17(a);case b("VideoComposerActionTypes").POLLS_SAVE:return this.$VideoComposerPollsStoreClass18(a);case b("VideoComposerActionTypes").POLLS_SAVE_SLIDER:return this.$VideoComposerPollsStoreClass19(a);case b("VideoComposerActionTypes").RESET_COMPOSER:return this.getInitialState();default:return a}};d.$VideoComposerPollsStoreClass1=function(a){return b("gkx")("976432")&&!a.isLiveVideo};d.$VideoComposerPollsStoreClass6=function(a,b,c){switch(a.editorState){case h.ADDING_NEW_POLL:case h.EDITING_POLL:return a.set("draftPoll",a.draftPoll.set(b,c));case h.ADDING_NEW_SLIDER:case h.EDITING_SLIDER:return a.set("draftSlider",a.draftSlider.set(b,c));default:return a}};d.$VideoComposerPollsStoreClass12=function(a){if(a.editorState===h.ADDING_NEW_POLL||a.editorState===h.EDITING_POLL)return a;return this.$VideoComposerPollsStoreClass3(a)?a.set("showOpenPollsFormSectionConfirmationDialog",!0):this.$VideoComposerPollsStoreClass13(a)};d.$VideoComposerPollsStoreClass13=function(a){var b=this.$VideoComposerPollsStoreClass2(a,!1);return a.set("showOpenPollsFormSectionConfirmationDialog",!1).set("editorState",h.ADDING_NEW_POLL).set("draftPoll",b)};d.$VideoComposerPollsStoreClass14=function(a){if(a.editorState===h.ADDING_NEW_SLIDER||a.editorState===h.EDITING_SLIDER)return a;return this.$VideoComposerPollsStoreClass3(a)?a.set("showOpenSlidersFormSectionConfirmationDialog",!0):this.$VideoComposerPollsStoreClass15(a)};d.$VideoComposerPollsStoreClass15=function(a){return a.set("showOpenSlidersFormSectionConfirmationDialog",!1).set("editorState",h.ADDING_NEW_SLIDER).set("draftSlider",this.$VideoComposerPollsStoreClass20(a))};d.$VideoComposerPollsStoreClass3=function(a){__p&&__p();switch(a.editorState){case h.EDITING_POLL:var c=a.polls.find(function(b){return b.id===a.draftPoll.id});return!b("immutable").is(c,a.draftPoll);case h.ADDING_NEW_POLL:return!!a.draftPoll.questionText.trim()||a.draftPoll.options.some(function(a){return!!a.text.trim()});case h.EDITING_SLIDER:return!1;case h.ADDING_NEW_SLIDER:return this.$VideoComposerPollsStoreClass21(a);case h.LIST_VIEW:case h.CLOSED:return!1}return!1};d.$VideoComposerPollsStoreClass21=function(a){return!!a.draftSlider.questionText.trim()||!!a.draftSlider.emoji.trim()};d.$VideoComposerPollsStoreClass18=function(a){__p&&__p();var c=a.draftPoll;c=c.set("questionText",c.questionText.trim()).set("options",c.options.map(function(a){return a.set("text",a.text.trim())}).map(function(a){return a.set("stickerID",a.stickerID)}).map(function(a){return a.set("imageURL",a.imageURL)}).map(function(a){return a.set("imageFile",a.imageFile)}).filter(function(a){return!!a.text||!!a.stickerID}));c.options.size>=b("VideoComposerPollsConstants").MIN_OPTIONS_COUNT&&c.options.size<=b("VideoComposerPollsConstants").MAX_OPTIONS_COUNT||g(0,4514);a=a.set("draftPoll",c);c=a.editorState===h.ADDING_NEW_POLL?a.polls.push(a.draftPoll.set("id",b("uuid")())):a.polls.set(a.polls.findIndex(function(b){return b.id===a.draftPoll.id}),a.draftPoll);c=c.sortBy(function(a){return b("VideoComposerPollsUtils").timeStringToSeconds(a.startTime)});var d=a.draftPoll.isAdBreakPoll;a=this.$VideoComposerPollsStoreClass22(a).set("polls",c);d&&(a=this.$VideoComposerPollsStoreClass4(a,!0));return a};d.$VideoComposerPollsStoreClass19=function(a){var c=a.draftSlider;c=c.set("questionText",c.questionText.trim());a=a.set("draftSlider",c);c=a.editorState===h.ADDING_NEW_SLIDER?a.sliders.push(a.draftSlider.set("id",b("uuid")())):a.sliders.set(a.sliders.findIndex(function(b){return b.id===a.draftSlider.id}),a.draftSlider);c=c.sortBy(function(a){return b("VideoComposerPollsUtils").timeStringToSeconds(a.startTime)});return this.$VideoComposerPollsStoreClass22(a).set("sliders",c)};d.$VideoComposerPollsStoreClass16=function(a,b){return this.$VideoComposerPollsStoreClass3(a)?this.$VideoComposerPollsStoreClass23(a,b):this.$VideoComposerPollsStoreClass24(a,b)};d.$VideoComposerPollsStoreClass17=function(a){var b=a.sliders.findIndex(function(b){return b.id===a.deleteAttemptSliderID});return a.set("sliders",a.sliders["delete"](b)).set("deleteAttemptSliderID",null)};d.$VideoComposerPollsStoreClass5=function(a){return a.set("deleteAttemptPollID",null).set("deleteAttemptSliderID",null)};d.$VideoComposerPollsStoreClass4=function(a,b){a=this.$VideoComposerPollsStoreClass22(a);a=a.set("showCancelConfirmDialog",!1);a=a.set("showCloseEditorConfirmDialog",!1);b&&(a=this.$VideoComposerPollsStoreClass25(a));return a};d.$VideoComposerPollsStoreClass7=function(a,b){return a.set("showEditAttemptDialog",!0).set("editAttemptPollID",b)};d.$VideoComposerPollsStoreClass23=function(a,b){return a.set("showEditAttemptDialog",!0).set("editAttemptSliderID",b)};d.$VideoComposerPollsStoreClass10=function(a){return a.set("showEditAttemptDialog",!1).set("editAttemptPollID","").set("editAttemptSliderID","")};d.$VideoComposerPollsStoreClass11=function(a){a=this.$VideoComposerPollsStoreClass26(a);return this.$VideoComposerPollsStoreClass9(a)};d.$VideoComposerPollsStoreClass26=function(a){switch(a.editorState){case h.ADDING_NEW_POLL:case h.EDITING_POLL:return this.$VideoComposerPollsStoreClass18(a);case h.ADDING_NEW_SLIDER:case h.EDITING_SLIDER:return this.$VideoComposerPollsStoreClass19(a)}return a};d.$VideoComposerPollsStoreClass9=function(a){a=a.editAttemptSliderID.length>0?this.$VideoComposerPollsStoreClass24(a,a.editAttemptSliderID):this.$VideoComposerPollsStoreClass8(a,a.editAttemptPollID);return this.$VideoComposerPollsStoreClass10(a)};d.$VideoComposerPollsStoreClass8=function(a,b){var c=a.polls.find(function(a){return a.id===b});return a.set("showEditor",!0).set("editorState",h.EDITING_POLL).set("draftPoll",c)};d.$VideoComposerPollsStoreClass24=function(a,b){var c=a.sliders.find(function(a){return a.id===b});return!c?a:a.set("showEditor",!0).set("editorState",h.EDITING_SLIDER).set("draftSlider",c)};d.$VideoComposerPollsStoreClass22=function(a){return a.set("editorState",h.LIST_VIEW)};d.$VideoComposerPollsStoreClass25=function(a){return a.set("showEditor",!1).set("editorState",h.CLOSED)};d.$VideoComposerPollsStoreClass2=function(a,c){var d=i();d=d.set("options",d.options.push(j()).push(j())).set("isAdBreakPoll",c).set("pollType",c?b("VideoPollType").AD_BREAK_POLL:b("VideoPollType").SCHEDULED);c&&(d=d.set("canChangePollType",!1));c=this.$VideoComposerPollsStoreClass27(a);c&&(d=d.set("startTime",this.$VideoComposerPollsStoreClass28(c.interactionStartTime,c.videoDuration)),d=d.set("endTime",this.$VideoComposerPollsStoreClass28(c.interactionEndTime,c.videoDuration)));d=d.set("showResults",!0);d=d.set("displayResultsTimestamp",b("VideoComposerPollsConstants").AFTER_VOTE_TIMESTAMP);return d};d.$VideoComposerPollsStoreClass20=function(a){var b=k();a=this.$VideoComposerPollsStoreClass27(a);a&&(b=b.set("startTime",this.$VideoComposerPollsStoreClass28(a.interactionStartTime,a.videoDuration)),b=b.set("endTime",this.$VideoComposerPollsStoreClass28(a.interactionEndTime,a.videoDuration)));return b};d.$VideoComposerPollsStoreClass27=function(a){var c=b("VideoComposerStores").getMetadataStore().getVideoPreviewTimeData();c=c.videoDuration;if(!c||c<b("VideoComposerPollsConstants").MIN_POLL_DURATION||this.getNonAdBreakPolls(a.polls).size>0||a.sliders.size>0)return null;a=0;var d=c>=b("VideoComposerPollsConstants").INITIAL_POLL_DEFAULT_DURATION?b("VideoComposerPollsConstants").INITIAL_POLL_DEFAULT_DURATION:b("VideoComposerPollsConstants").MIN_POLL_DURATION;return{videoDuration:c,interactionStartTime:a,interactionEndTime:a+d}};d.$VideoComposerPollsStoreClass28=function(a,c){a=b("VideoComposerPollsUtils").secondsToTimeString(a);return c>=l&&a.split(":").length===2?"00:"+a:a};d.getPostRequestDataToSend=function(){var a=this,c=this.getState().polls.toArray().map(this.mapPollRecordToNewPollRequestData),d={};this.getState().polls.forEach(function(b,c){b=a.constructPollImageDataMap(b,c);d=Object.assign(d,b)});c=b("flattenPHPQueryData")({polls:c});c.pollImages=d;return b("Promise").resolve(c)};d.getEditRequestDataToSend=function(){__p&&__p();var a=this,c=this.getState(),d=c.persistedPolls.filter(function(a){return c.polls.findIndex(function(b){return b.id===a.id})===-1}).map(function(a){return a.id}),e=[],f=[],g={};c.polls.forEach(function(b,c){if(b.isPersisted)e.push(a.mapPollRecordToEditPollRequestData(b));else{f.push(a.mapPollRecordToNewPollRequestData(b,c));b=a.constructPollImageDataMap(b,c);g=Object.assign(g,b)}});d=b("flattenPHPQueryData")({deleted_poll_ids:d,updated_polls:e,new_polls:f,enable_was_live_voting:c.enableWasLiveVoting});Object.assign(d,g);return b("Promise").resolve(d)};d.constructImageFileKey=function(a,b){return"poll_"+a+"_"+b};d.constructPollImageDataMap=function(a,b){var c={};a.options.forEach(function(a,d){if(a.imageFile){d=this.constructImageFileKey(b,d);c[d]=a.imageFile}},this);return c};d.mapPollRecordToEditPollRequestData=function(a){return{id:a.id,display_results_after_voting:a.showResults,display_results_timestamp:a.displayResultsTimestamp,voting_closed_timestamp:a.votingClosedTimestamp,start_time:this.$VideoComposerPollsStoreClass29(a.startTime),end_time:this.$VideoComposerPollsStoreClass29(a.endTime),is_ad_break_poll:a.isAdBreakPoll,poll_type:a.pollType}};d.isSufficientTimeSpanForPoll=function(a,c){return!c?!0:this.findMaxiumTimeSpanAvailableForPoll(a,c)>=b("VideoComposerPollsConstants").MIN_POLL_DURATION};d.numAdBreakPolls=function(a){return this.getAdBreakPolls(a).size};d.getNonAdBreakPolls=function(a){return a.filter(function(a){return a.pollType!==b("VideoPollType").AD_BREAK_POLL})};d.getAdBreakPolls=function(a){return a.filter(function(a){return a.pollType===b("VideoPollType").AD_BREAK_POLL})};d.findMaxiumTimeSpanAvailableForPoll=function(a,c){__p&&__p();var d=this;if(a.size==0)return c||0;var e=b("immutable").List();a.forEach(function(a){var b={timeStampType:m,timestamp:d.$VideoComposerPollsStoreClass29(a.get("startTime"))||0};a={timeStampType:n,timestamp:d.$VideoComposerPollsStoreClass29(a.get("endTime"))||0};e=e.push(b);e=e.push(a)});a=e.sortBy(function(a){return a.timestamp});c=Math.max(a.first().timestamp-0,c-a.last().timestamp);var f=1;while(2*f<a.size)c=Math.max(c,a.get(2*f).timestamp-a.get(2*f-1).timestamp),f++;return c};d.hasValidationErrors=function(a){__p&&__p();var c=this.getState();switch(c.editorState){case h.ADDING_NEW_POLL:case h.EDITING_POLL:if(b("VideoComposerPollsUtils").arePollQuestionAndOptionsInvalid(c.draftPoll))return!0;break;case h.ADDING_NEW_SLIDER:case h.EDITING_SLIDER:if(!c.draftSlider.questionText.trim())return!0;break}var d=b("VideoComposerStores").getMetadataStore().getVideoPreviewTimeData();d=d.videoDuration;a=b("VideoComposerPollsUtils").validateDraftInteractionTimeWindow(this.$VideoComposerPollsStoreClass30(c),a,c.sliders,d);c=a.commonError;d=a.startTimeError;a=a.endTimeError;return!!d||!!a||!!c};d.$VideoComposerPollsStoreClass30=function(a){return a.editorState===h.ADDING_NEW_SLIDER||a.editorState===h.EDITING_SLIDER?a.draftSlider:a.draftPoll};d.$VideoComposerPollsStoreClass29=function(a){return a===""?null:b("VideoComposerPollsUtils").timeStringToSeconds(a)};return c}(b("VideoComposerStoreBase"));e.exports=c}),null);
__d("VideoComposerQuestionsTypes",["ImmutableRecordWithV4Types"],(function(a,b,c,d,e,f){"use strict";a=b("ImmutableRecordWithV4Types").Record;c=a({id:"",isPersisted:!1,questionText:"",startTime:"",endTime:""});e.exports={TextQuestionDataRecordFactory:c}}),null);
__d("VideoComposerQuestionsStoreClass",["Promise","ImmutableRecordWithV4Types","VideoComposerActionTypes","VideoComposerPollsUtils","VideoComposerQuestionsConstants","VideoComposerQuestionsTypes","VideoComposerStoreBase","VideoComposerStores","flattenPHPQueryData","immutable","uuid"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("ImmutableRecordWithV4Types").Record;var g=b("VideoComposerQuestionsTypes").TextQuestionDataRecordFactory,h=3600,i=a({videoComposerID:"",draftQuestion:g(),isAddingNewQuestion:!1,isEditingQuestion:!1,questions:b("immutable").List(),showEditor:!1,showCancelConfirmDialog:!1,showCloseEditorConfirmDialog:!1});c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.mapQuestionRecordToNewQuestionRequestData=function(a,c){return{question_text:a.questionText,start_time:b("VideoComposerPollsUtils").timeStringToSeconds(a.startTime),end_time:b("VideoComposerPollsUtils").timeStringToSeconds(a.endTime)}},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.getInitialState=function(){return i()};d.reduceImpl=function(a,c){__p&&__p();switch(c.type){case b("VideoComposerActionTypes").QUESTIONS_ADD_NEW:var d=this.$VideoComposerQuestionsStoreClass1(a);return a.set("showEditor",!0).set("isAddingNewQuestion",!0).set("isEditingQuestion",!1).set("draftQuestion",d);case b("VideoComposerActionTypes").QUESTIONS_CLOSE_EDITOR_ATTEMPT:if(this.$VideoComposerQuestionsStoreClass2(a))return a.set("showCloseEditorConfirmDialog",!0);else return this.$VideoComposerQuestionsStoreClass3(a,!0);case b("VideoComposerActionTypes").QUESTIONS_CANCEL_CHANGES_ATTEMPT:if(this.$VideoComposerQuestionsStoreClass2(a))return a.set("showCancelConfirmDialog",!0);else return this.$VideoComposerQuestionsStoreClass3(a,a.questions.size===0);case b("VideoComposerActionTypes").QUESTIONS_DRAFT_UPDATE_END_TIME:return a.set("draftQuestion",a.draftQuestion.set("endTime",c.time));case b("VideoComposerActionTypes").QUESTIONS_DRAFT_UPDATE_QUESTION:return a.set("draftQuestion",a.draftQuestion.set("questionText",c.text));case b("VideoComposerActionTypes").QUESTIONS_DRAFT_UPDATE_START_TIME:return a.set("draftQuestion",a.draftQuestion.set("startTime",c.time));case b("VideoComposerActionTypes").QUESTIONS_EDIT_ATTEMPT:return a;case b("VideoComposerActionTypes").QUESTIONS_SAVE:return this.$VideoComposerQuestionsStoreClass4(a);case b("VideoComposerActionTypes").QUESTIONS_DELETE_ATTEMPT:var e=c.questionID;d=a.questions.findIndex(function(a){return a.id===e});return a.set("questions",a.questions["delete"](d));case b("VideoComposerActionTypes").QUESTIONS_CANCEL_CHANGES_ABANDON:return a.set("showCancelConfirmDialog",!1);case b("VideoComposerActionTypes").QUESTIONS_CANCEL_CHANGES_CONFIRM:return this.$VideoComposerQuestionsStoreClass3(a,!1);case b("VideoComposerActionTypes").QUESTIONS_CLOSE_EDITOR_ABANDON:return a.set("showCloseEditorConfirmDialog",!1);case b("VideoComposerActionTypes").QUESTIONS_CLOSE_EDITOR_CONFIRM:return this.$VideoComposerQuestionsStoreClass3(a,!0);default:return a}};d.$VideoComposerQuestionsStoreClass4=function(a){var c=a.draftQuestion;c=c.set("questionText",c.questionText.trim());var d=a.isAddingNewQuestion?a.questions.push(a.draftQuestion.set("id",b("uuid")())):a.questions.set(a.questions.findIndex(function(b){return b.id===a.draftQuestion.id}),a.draftQuestion);d=d.sortBy(function(a){return b("VideoComposerPollsUtils").timeStringToSeconds(a.startTime)});return this.$VideoComposerQuestionsStoreClass5(a.set("draftQuestion",c)).set("questions",d)};d.$VideoComposerQuestionsStoreClass2=function(a){if(a.isEditingQuestion){var c=a.questions.find(function(b){return b.id===a.draftQuestion.id});return!b("immutable").is(c,a.draftQuestion)}return a.isAddingNewQuestion?!!a.draftQuestion.questionText.trim():!1};d.$VideoComposerQuestionsStoreClass3=function(a,b){if(b)return this.$VideoComposerQuestionsStoreClass6(this.$VideoComposerQuestionsStoreClass5(a).set("showCancelConfirmDialog",!1).set("showCloseEditorConfirmDialog",!1));else return this.$VideoComposerQuestionsStoreClass5(a).set("showCancelConfirmDialog",!1).set("showCloseEditorConfirmDialog",!1)};d.$VideoComposerQuestionsStoreClass5=function(a){return a.set("isAddingNewQuestion",!1).set("isEditingQuestion",!1)};d.$VideoComposerQuestionsStoreClass6=function(a){return a.set("showEditor",!1)};d.$VideoComposerQuestionsStoreClass1=function(a){__p&&__p();a=g();var c=b("VideoComposerStores").getMetadataStore().getState();c=c.videoDuration;if(c!=null){var d=c;d=c>=b("VideoComposerQuestionsConstants").INITIAL_QUESTION_DEFAULT_DURATION?b("VideoComposerQuestionsConstants").INITIAL_QUESTION_DEFAULT_DURATION:b("VideoComposerQuestionsConstants").MIN_QUESTION_DURATION;c=b("VideoComposerStores").getTrimmingEditorStore().getState();var e=c.endTime;c=c.startTime;e=e!=null?e:d;c=c||0;d=e-c;e=Math.ceil(d);a=a.set("startTime",e>=h?"00:00:00":"00:00");a=a.set("endTime",b("VideoComposerPollsUtils").secondsToTimeString(e))}return a};d.getPostRequestDataToSend=function(){var a=this.getState().questions.toArray().map(this.mapQuestionRecordToNewQuestionRequestData);a=b("flattenPHPQueryData")({questions:a});return b("Promise").resolve(a)};return c}(b("VideoComposerStoreBase"));e.exports=c}),null);
__d("VideoComposerSoundEditorSoundCollectionStoreClass",["invariant","DateConsts","ImmutableRecordWithV4Types","MediaManagerAudioAssetTypeEnum","MediaManagerLoadingPromiseTypes","MediaManagerUtils","SoundCollectionConstants","SoundCollectionTabState","SoundCollectionTabStateToStoreKey","VideoComposerActionTypes","VideoComposerSoundEditorActions","VideoComposerSoundEditorUtils","VideoComposerStoreBase","VideoComposerStores","immutable","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("ImmutableRecordWithV4Types").Record;var h=b("SoundCollectionConstants").TAB_KEYS,i=["categorySelected","genreSelected","moodSelected","vocalSelected"],j=a({videoComposerID:"",audioPlayer:null,categorySelected:null,effectTab:new(b("SoundCollectionTabState"))(b("MediaManagerAudioAssetTypeEnum").SOUND_EFFECTS),genreSelected:null,isPlaying:!1,moodSelected:null,playTrack:null,selectedTab:b("MediaManagerAudioAssetTypeEnum").SOUND_TRACKS,selectedTracks:b("immutable").OrderedMap(),trackTab:new(b("SoundCollectionTabState"))(b("MediaManagerAudioAssetTypeEnum").SOUND_TRACKS),vocalSelected:null});c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$VideoComposerSoundEditorSoundCollectionStoreClass5=function(a,c,e){var f=[];e.data.forEach(function(a){a.title&&f.push({artistName:a.display_artist,downloadLink:a.download_hd_url,id:a.id,lengthInSec:Math.round(a.duration_in_ms/b("DateConsts").MS_PER_SEC),mediaTags:a.media_tags?a.media_tags.data:[],title:a.title,type:c})});e.next&&b("VideoComposerSoundEditorActions").setSoundCollectionNextPagePromise(d.getState().videoComposerID,e.next(),c);b("VideoComposerSoundEditorActions").setSoundCollectionSearchResults(d.getState().videoComposerID,a.concat(f),c,e.summary.total_count)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.getInitialState=function(){return j()};d.reduceImpl=function(a,c){__p&&__p();var d=c.soundCollectionTab||c.resultType||a.selectedTab;d==="sound_tracks"||d==="sound_effects"||g(0,3191);var e=b("SoundCollectionTabStateToStoreKey")[d],f=a.get(e);switch(c.type){case b("VideoComposerActionTypes").OPEN_SOUND_EDITOR:a=this.$VideoComposerSoundEditorSoundCollectionStoreClass1(a);return a;case b("VideoComposerActionTypes").CONFIRM_CLOSE_SOUND_EDITOR:case b("VideoComposerActionTypes").SOUND_EDITOR_SAVE_DRAFT:a=this.$VideoComposerSoundEditorSoundCollectionStoreClass2(a);return this.$VideoComposerSoundEditorSoundCollectionStoreClass3(a);case b("VideoComposerActionTypes").RESET_COMPOSER:a=this.getInitialState();return a;case b("VideoComposerActionTypes").SOUND_EDITOR_SET_SOUND_COLLECTION_AUDIO_PLAYER:a=a.set("audioPlayer",c.audioPlayer);return a;case b("VideoComposerActionTypes").SOUND_EDITOR_SET_SOUND_COLLECTION_FILTER_SELECTION:if(i.indexOf(c.tagtype)!==-1){var j=c.tagtype;a=a.set(j,c.value)}else f=f.set(c.tagtype,c.value),a=a.set(e,f);return this.$VideoComposerSoundEditorSoundCollectionStoreClass4(a,e);case b("VideoComposerActionTypes").SOUND_EDITOR_SET_SOUND_COLLECTION_IS_PLAYING:a=a.set("isPlaying",c.isPlaying);j=a.get("audioPlayer");j&&j.setPlayPauseTo(c.isPlaying);return a;case b("VideoComposerActionTypes").SOUND_EDITOR_SET_SOUND_COLLECTION_NEXT_PAGE_PROMISE:if(!e)return a;f=f.set("nextPagePromise",c.promise);return a.set(e,f);case b("VideoComposerActionTypes").SOUND_EDITOR_SET_SOUND_COLLECTION_PLAY_TRACK:a=a.set("playTrack",c.track?c.track:null).set("isPlaying",!0);return a;case b("VideoComposerActionTypes").SOUND_EDITOR_SET_SOUND_COLLECTION_SEARCH_RESULTS:if(!e)return a;f=f.set("results",c.results).set("totalResultsCount",c.totalResultsCount);return a.set(e,f);case b("VideoComposerActionTypes").SOUND_EDITOR_SET_SOUND_COLLECTION_TAB:return a.set("selectedTab",c.soundCollectionTab);case b("VideoComposerActionTypes").SOUND_EDITOR_SET_SOUND_COLLECTION_TAB_LOADING_DONE:f=f.set("loading",!1);return a.set(e,f);case b("VideoComposerActionTypes").SOUND_EDITOR_SET_SOUND_COLLECTION_TAB_LOADING_ERROR:f=f.set("errorInTab",!0).set("loading",!1);return a.set(e,f);case b("VideoComposerActionTypes").SOUND_EDITOR_SOUND_COLLECTION_INIT:j=b("MediaManagerUtils").getNewPromiseID();var k=[];for(var l=h,m=Array.isArray(l),n=0,l=m?l:l[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var o;if(m){if(n>=l.length)break;o=l[n++]}else{n=l.next();if(n.done)break;o=n.value}o=o;var p=a.get(o),q=b("VideoComposerSoundEditorUtils").getSoundCollectionTabQueryPromise(b("VideoComposerStores").getMetadataStore().getAccessToken(),this.$VideoComposerSoundEditorSoundCollectionStoreClass5,j,this.$VideoComposerSoundEditorSoundCollectionStoreClass6(a),p);p=a.get(o).set("loading",!0).set("currentPromise",q).set("errorInTab",!1);a=a.set(o,p);k.push({currentPromise:q,tabKey:o})}this.$VideoComposerSoundEditorSoundCollectionStoreClass7(k,j);return a;case b("VideoComposerActionTypes").SOUND_EDITOR_SOUND_COLLECTION_LOAD_NEXT_PAGE:return this.$VideoComposerSoundEditorSoundCollectionStoreClass8(a,f,e,d);case b("VideoComposerActionTypes").SOUND_EDITOR_SOUND_COLLECTION_LOAD_TABS_DONE:for(var p=h,q=Array.isArray(p),o=0,p=q?p:p[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(q){if(o>=p.length)break;n=p[o++]}else{o=p.next();if(o.done)break;n=o.value}m=n;f=a.get(m).set("loading",!1);a=a.set(m,f)}return a;case b("VideoComposerActionTypes").SOUND_EDITOR_SOUND_COLLECTION_LOAD_TABS_ERROR:return a;case b("VideoComposerActionTypes").SOUND_EDITOR_SOUND_COLLECTION_SELECT_TRACK:return this.$VideoComposerSoundEditorSoundCollectionStoreClass9(a,c);case b("VideoComposerActionTypes").SOUND_EDITOR_SOUND_COLLECTION_UNSELECT_TRACK:return this.$VideoComposerSoundEditorSoundCollectionStoreClass10(a,c);case b("VideoComposerActionTypes").SOUND_EDITOR_ADD_NESTING_TRACK_ITEM:l=c.trackId;k=c.trackData;return this.$VideoComposerSoundEditorSoundCollectionStoreClass11(a,l,k);case b("VideoComposerActionTypes").SOUND_EDITOR_DELETE_ADDED_TRACK:return this.$VideoComposerSoundEditorSoundCollectionStoreClass12(a,c);case b("VideoComposerActionTypes").SOUND_EDITOR_SUBMIT_EFFECTS_SEARCHSTRING:a=this.$VideoComposerSoundEditorSoundCollectionStoreClass13(a,"effectTab",c.value);return this.$VideoComposerSoundEditorSoundCollectionStoreClass4(a,"effectTab");case b("VideoComposerActionTypes").SOUND_EDITOR_SUBMIT_TRACKS_SEARCHSTRING:a=this.$VideoComposerSoundEditorSoundCollectionStoreClass13(a,"trackTab",c.value);return this.$VideoComposerSoundEditorSoundCollectionStoreClass4(a,"trackTab");case b("VideoComposerActionTypes").SOUND_EDITOR_UPDATE_SELECTED_TRACK_NESTING_ITEM_ORDER:return this.$VideoComposerSoundEditorSoundCollectionStoreClass14(a,c.trackId);default:return a}};d.$VideoComposerSoundEditorSoundCollectionStoreClass2=function(a){__p&&__p();for(var b=h,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e=a.get(e).get("currentPromise");e&&e.isOngoing()&&e.cancel()}return a};d.$VideoComposerSoundEditorSoundCollectionStoreClass3=function(a){var b=a;b=b.selectedTracks;b=b.map(function(a){a.nestingItems=a.nestingItems.clear();return a});a=this.getInitialState();return a.set("selectedTracks",b)};d.$VideoComposerSoundEditorSoundCollectionStoreClass1=function(a){__p&&__p();var c=b("VideoComposerStores").getSoundEditorStore().getState();c=c.addedTracks;var d=a.selectedTracks;c.forEach(function(a){if(d.has(a.sourceId)){var b=d.get(a.sourceId);b.nestingItems=b.nestingItems.set(a.id,a)}});d=d.map(function(a){a.nestingItems.sort(function(a,c){return b("VideoComposerSoundEditorUtils").compareSelectedTracks(a,c)});return babelHelpers["extends"]({},a)});return a.set("selectedTracks",d)};d.$VideoComposerSoundEditorSoundCollectionStoreClass6=function(a){return{category:a.categorySelected,genre:a.genreSelected,mood:a.moodSelected,vocal:a.vocalSelected}};d.$VideoComposerSoundEditorSoundCollectionStoreClass8=function(a,c,d,e){if(!d)return a;var f=c.get("nextPagePromise");f&&(c=c.set("nextPagePromise",null).set("loading",!0),f.then(this.$VideoComposerSoundEditorSoundCollectionStoreClass5.bind(this,c.get("results"),e)).done(function(){b("VideoComposerSoundEditorActions").setSoundCollectionTabLoadingDone(a.videoComposerID,e)},function(){b("VideoComposerSoundEditorActions").setSoundCollectionTabLoadingError(a.videoComposerID,e)}));return a.set(d,c)};d.$VideoComposerSoundEditorSoundCollectionStoreClass15=function(a,c){var d=this,e=a,f=e.type,g=b("SoundCollectionTabStateToStoreKey")[f];a=a.set("results",[]).set("totalResultsCount",0).set("nextPagePromise",null).set("loading",!0);b("promiseDone")(c.promise,function(){c.id===d.getState().get(g).get("currentPromise").id?b("VideoComposerSoundEditorActions").setSoundCollectionTabLoadingDone(d.getState().videoComposerID,f):c.cancel()},function(a){a.isCanceled||b("VideoComposerSoundEditorActions").setSoundCollectionTabLoadingError(d.getState().videoComposerID,f)});return a};d.$VideoComposerSoundEditorSoundCollectionStoreClass7=function(a,c){__p&&__p();var d=this,e=b("MediaManagerUtils").combineCancelablePromises(c,[].concat(a.map(function(a){return a.currentPromise})),b("MediaManagerLoadingPromiseTypes").SOUND_COLLECTION_TAB,[]);b("promiseDone")(e.promise,function(){__p&&__p();var c=!0;for(var f=a,g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;if(i.currentPromise.id!==d.getState().get(i.tabKey).get("currentPromise").id){c=!1;break}}c?b("VideoComposerSoundEditorActions").loadSoundCollectionTabsDone(d.getState().videoComposerID):e.cancel()},function(a){a.isCanceled||b("VideoComposerSoundEditorActions").loadSoundCollectionTabsError(d.getState().videoComposerID,a)})};d.$VideoComposerSoundEditorSoundCollectionStoreClass11=function(a,c,d){__p&&__p();var e=a.get("selectedTracks");if(e.has(c)){var f=e.get(c);d=f.nestingItems.set(d.id,d).sort(function(a,c){return b("VideoComposerSoundEditorUtils").compareSelectedTracks(a,c)});f={orderNumber:f.orderNumber,trackResult:f.trackResult,nestingItems:d};e=e.set(c,f);a=a.set("selectedTracks",e)}return a};d.$VideoComposerSoundEditorSoundCollectionStoreClass12=function(a,b){__p&&__p();var c=b.trackResultId;b=b.addedTrackId;var d=a.get("selectedTracks");if(d.has(c)){var e=d.get(c);b=e.nestingItems["delete"](b);e={orderNumber:e.orderNumber,trackResult:e.trackResult,nestingItems:b};d=d.set(c,e);a=a.set("selectedTracks",d)}return a};d.$VideoComposerSoundEditorSoundCollectionStoreClass9=function(a,c){var d=a.get("selectedTracks"),e={orderNumber:d.size+1,trackResult:c.track,nestingItems:b("immutable").OrderedMap()};d=d.set(c.track.id,e);return a.set("selectedTracks",d)};d.$VideoComposerSoundEditorSoundCollectionStoreClass10=function(a,b){var c=a.get("selectedTracks"),d=c.get(b.trackId);c=c["delete"](b.trackId);c=c.map(function(a){a.orderNumber>d.orderNumber&&(a.orderNumber-=1);return a});return a.set("selectedTracks",c)};d.$VideoComposerSoundEditorSoundCollectionStoreClass13=function(a,b,c){return c===void 0?a:a.set(b,a.get(b).set("searchString",c))};d.$VideoComposerSoundEditorSoundCollectionStoreClass14=function(a,c){var d=a.get("selectedTracks");if(d.has(c)){var e=d.get(c),f=e.nestingItems.sort(function(a,c){return b("VideoComposerSoundEditorUtils").compareSelectedTracks(a,c)});e={orderNumber:e.orderNumber,trackResult:e.trackResult,nestingItems:f};d=d.set(c,e);a=a.set("selectedTracks",d)}return a};d.$VideoComposerSoundEditorSoundCollectionStoreClass4=function(a,c){var d=a.get(c),e=d.get("currentPromise");e&&e.isOngoing()&&e.cancel();var f=b("MediaManagerUtils").getNewPromiseID();e=b("VideoComposerSoundEditorUtils").getSoundCollectionTabQueryPromise(b("VideoComposerStores").getMetadataStore().getAccessToken(),this.$VideoComposerSoundEditorSoundCollectionStoreClass5,f,this.$VideoComposerSoundEditorSoundCollectionStoreClass6(a),a.get(c));d=this.$VideoComposerSoundEditorSoundCollectionStoreClass15(d,e);return a.set(c,d.set("currentPromise",e))};d.getSelectedTrackDataById=function(a){var b=this.getState();b=b.selectedTracks;return b.has(a)?b.get(a):null};return c}(b("VideoComposerStoreBase"));e.exports=c}),null);
__d("VideoComposerSoundEditorStoreClass",["DateConsts","ImmutableRecordWithV4Types","MediaManagerAudioAssetTypeEnum","SubscriptionsHandler","VideoComposerActionTypes","VideoComposerDragAndDropScrubberConstants","VideoComposerDragAndDropScrubberTypes","VideoComposerSoundEditorActions","VideoComposerStoreBase","VideoComposerStores","immutable","uuid"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("ImmutableRecordWithV4Types").Record;var g=b("VideoComposerDragAndDropScrubberTypes").VideoComposerDragAndDropScrubberActionTypes,h=b("VideoComposerDragAndDropScrubberTypes").VideoComposerDragAndDropScrubberItemSourceNumberShapeTypes,i=b("VideoComposerDragAndDropScrubberTypes").VideoComposerDragAndDropScrubberItemSourceTypes,j={downloadLink:"",id:"0",lengthInSec:0,mediaTags:[],title:"",type:b("MediaManagerAudioAssetTypeEnum").SOUND_TRACKS},k=a({videoComposerID:"",addedTracks:b("immutable").List(),audioPlayer:null,draftAddedTracks:b("immutable").List(),editingTrackData:null,hasChanged:!1,isPlaying:!1,playTrack:j,scrubber:null,showCancelConfirmDialog:!1,showEditor:!1,showTrackSelector:!0,showVideoVolumeEditor:!1,videoPlayerController:null,videoVolume:null}),l=1;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return k()};d.reduceImpl=function(a,c){__p&&__p();switch(c.type){case b("VideoComposerActionTypes").FINISH_TRACK_SELECTION:return a.set("showTrackSelector",!1);case b("VideoComposerActionTypes").OPEN_SOUND_EDITOR:a=this.$VideoComposerSoundEditorStoreClass2(a);return a.set("showEditor",!0);case b("VideoComposerActionTypes").OPEN_TRACK_SELECTOR:return a.set("editingTrackData",null).set("showTrackSelector",!0);case b("VideoComposerActionTypes").ATTEMPT_CLOSE_SOUND_EDITOR:return a.set("showCancelConfirmDialog",!0);case b("VideoComposerActionTypes").CANCEL_CLOSE_SOUND_EDITOR:return a.set("showCancelConfirmDialog",!1);case b("VideoComposerActionTypes").CONFIRM_CLOSE_SOUND_EDITOR:return this.$VideoComposerSoundEditorStoreClass3(a);case b("VideoComposerActionTypes").RESET_COMPOSER:a=this.getInitialState();return a;case b("VideoComposerActionTypes").SOUND_EDITOR_SET_VIDEO_PLAYER_VOLUME:var d=a;d=d.videoPlayerController;d&&d.setVolume(c.volume);return a;case b("VideoComposerActionTypes").SOUND_EDITOR_SET_VIDEO_VOLUME:return a.set("videoVolume",c.volume);case b("VideoComposerActionTypes").SOUND_EDITOR_SHOW_VIDEO_VOLUME_EDITOR:return a.set("showVideoVolumeEditor",c.show);case b("VideoComposerActionTypes").SOUND_EDITOR_EDIT_ADDED_TRACK:return this.$VideoComposerSoundEditorStoreClass4(a,c);case b("VideoComposerActionTypes").SOUND_EDITOR_DELETE_ADDED_TRACK:d=c.index;var e=c.trackResultId,f=c.addedTrackId;return this.$VideoComposerSoundEditorStoreClass5(a,d,e,f);case b("VideoComposerActionTypes").SOUND_EDITOR_REGISTER_SCRUBBER:return a.set("scrubber",c.scrubber);case b("VideoComposerActionTypes").SOUND_EDITOR_UPDATE_ADDED_TRACK:a=this.$VideoComposerSoundEditorStoreClass6(a,c);return a;case b("VideoComposerActionTypes").SOUND_EDITOR_UPDATE_ADDED_TRACK_VOLUME:return this.$VideoComposerSoundEditorStoreClass6(a,c);case b("VideoComposerActionTypes").SOUND_EDITOR_UPDATE_VIDEO_PLAYER_CONTROLLER:return this.$VideoComposerSoundEditorStoreClass7(a,c.vpc);case b("VideoComposerActionTypes").SOUND_EDITOR_SAVE_DRAFT:a=this.$VideoComposerSoundEditorStoreClass8(a);a=this.$VideoComposerSoundEditorStoreClass3(a);return a.set("showTrackSelector",!1);case b("VideoComposerActionTypes").SOUND_EDITOR_SCRUBBER_ADD_TRACK:return this.$VideoComposerSoundEditorStoreClass9(a,c);case b("VideoComposerActionTypes").SOUND_EDITOR_SET_SCRUBBER_FOCUS_POSITION:d=a;e=d.scrubber;e&&e.scrollToTimePosition(c.positionInMs);return a;case b("VideoComposerActionTypes").SOUND_EDITOR_SET_SOUND_COLLECTION_AUDIO_PLAYER:a=a.set("audioPlayer",c.audioPlayer);return a;case b("VideoComposerActionTypes").SOUND_EDITOR_SET_SOUND_COLLECTION_IS_PLAYING:a=a.set("isPlaying",c.isPlaying);f=a.get("audioPlayer");f&&f.setPlayPauseTo(c.isPlaying);return a;case b("VideoComposerActionTypes").SOUND_EDITOR_SET_SOUND_COLLECTION_PLAY_TRACK:a=a.set("playTrack",c.track?c.track:j).set("isPlaying",!0);return a;default:return a}};d.hasUnsavedDraftChanges=function(){return this.getState().hasChanged};d.$VideoComposerSoundEditorStoreClass7=function(a,c){this.$VideoComposerSoundEditorStoreClass1&&this.$VideoComposerSoundEditorStoreClass1.release();c&&(this.$VideoComposerSoundEditorStoreClass1=new(b("SubscriptionsHandler"))(),this.$VideoComposerSoundEditorStoreClass1.addSubscriptions(c.addListener("changeVolume",function(c){b("VideoComposerSoundEditorActions").setVideoVolume(a.videoComposerID,c.volume)}),c.addListener("muteVideo",function(c){b("VideoComposerSoundEditorActions").setVideoVolume(a.videoComposerID,0)}),c.addListener("unmuteVideo",function(d){b("VideoComposerSoundEditorActions").setVideoVolume(a.videoComposerID,c?c.getVolume():null)})),a=a.set("videoVolume",c.getVolume()));return a.set("videoPlayerController",c)};d.$VideoComposerSoundEditorStoreClass3=function(a){this.$VideoComposerSoundEditorStoreClass1&&this.$VideoComposerSoundEditorStoreClass1.release();var b=a,c=b.addedTracks;b=b.videoVolume;a=this.getInitialState();return a.set("addedTracks",c).set("videoVolume",b)};d.$VideoComposerSoundEditorStoreClass2=function(a){var b=a.addedTracks;b=b.map(function(a){return babelHelpers["extends"]({},a)});return a.set("draftAddedTracks",b)};d.$VideoComposerSoundEditorStoreClass8=function(a){var c=a.draftAddedTracks;return a.set("addedTracks",b("immutable").List(c))};d.$VideoComposerSoundEditorStoreClass4=function(a,b){return a.set("editingTrackData",b.addedTrackData)};d.$VideoComposerSoundEditorStoreClass10=function(a,c,d,e,f){var g=f.trackResult.lengthInSec*b("DateConsts").MS_PER_SEC,j=f.trackResult,k=j.artistName,m=j.downloadLink;j=j.title;return{lastModifiedTimestamp:Date.now(),endTimeInMs:a,id:b("uuid")(),maxEndTimeInMs:d?d.startTimeInMs-l:null,minStartTimeInMs:c?c.endTimeInMs+l:null,startTimeInMs:e,itemDurationInMs:g,itemStartTimeInMs:0,itemEndTimeInMs:g,itemVolume:b("VideoComposerDragAndDropScrubberConstants").DEFAULT_TRACK_VOLUME,sourceId:f.trackResult.id,sourceOrderNumberShape:f.trackResult.type===b("MediaManagerAudioAssetTypeEnum").SOUND_EFFECTS?h.SQUARE:h.CIRCLE,sourceSubtitle:k?k:"",sourceTitle:j,sourceType:i.AUDIO,sourceURL:m}};d.$VideoComposerSoundEditorStoreClass11=function(a,b,c){a=c.findLastIndex(function(a){return a.startTimeInMs<b});var d=c.findIndex(function(a){return a.startTimeInMs>b}),e=a==-1?null:c.get(a);c=d==-1?null:c.get(d);return{leftItemIndex:a,leftItem:e,rightItemIndex:d,rightItem:c}};d.$VideoComposerSoundEditorStoreClass9=function(a,c){__p&&__p();var d=b("VideoComposerStores").getSoundEditorSoundCollectionStore().getSelectedTrackDataById(c.trackId);if(!d)return a;var e=a.get("draftAddedTracks"),f=c.startTimeInMs;c=c.endTimeInMs;var g=this.$VideoComposerSoundEditorStoreClass11(c,f,e),h=g.leftItemIndex,i=g.leftItem;g=g.rightItem;var j=Date.now();i&&(f=Math.max(i.endTimeInMs+l,f),i.maxEndTimeInMs=f-l,i.lastModifiedTimestamp=j++);g&&(c=Math.min(g.startTimeInMs-l,c),g.minStartTimeInMs=c+l,g.lastModifiedTimestamp=j++);if(c-f<b("VideoComposerDragAndDropScrubberConstants").MINIMUM_DURATION_IN_MS)return a;d=this.$VideoComposerSoundEditorStoreClass10(c,i,g,f,d);d.itemEndTimeInMs=c-f;d.lastModifiedTimestamp=j++;c=[];i&&c.push(i);c.push(d);g&&c.push(g);e=(f=e).splice.apply(f,[Math.max(h,0),c.length-1].concat(c));return a.set("draftAddedTracks",e).set("editingTrackData",d).set("hasChanged",!0)};d.$VideoComposerSoundEditorStoreClass6=function(a,b){b.actionType===g.RESIZE?a=this.$VideoComposerSoundEditorStoreClass12(a,b):b.actionType===g.MOVE?a=this.$VideoComposerSoundEditorStoreClass13(a,b):b.actionType===g.TRACK_VOLUME&&(a=this.$VideoComposerSoundEditorStoreClass14(a,b));if(a.editingTrackData){b=a.draftAddedTracks.get(b.index);a.editingTrackData&&a.editingTrackData.id===b.id&&(a=a.set("editingTrackData",b))}return a.set("hasChanged",!0)};d.$VideoComposerSoundEditorStoreClass5=function(a,b,c,d){__p&&__p();c=a.get("draftAddedTracks");if(b===null||b==void 0){b=c.findIndex(function(b,a){return b.id===d});if(b===-1)return a}var e=Date.now(),f=b>0?c.get(b-1):null,g=b<c.size-1?c.get(b+1):null;f&&(f.maxEndTimeInMs=g?g.startTimeInMs:null,f.lastModifiedTimestamp=e++);g&&(g.minStartTimeInMs=f?f.endTimeInMs:0,g.lastModifiedTimestamp=e++);c=c.splice(b,1);e=[];f&&e.push(f);g&&e.push(g);c=(f=c).splice.apply(f,[Math.max(b-1,0),e.length].concat(e));return a.set("draftAddedTracks",c).set("hasChanged",!0)};d.$VideoComposerSoundEditorStoreClass14=function(a,b){var c=a.get("draftAddedTracks"),d=c.get(b.index);d.itemVolume=b.volume;d.lastModifiedTimestamp=Date.now();c=c.splice(b.index,1,d);return a.set("draftAddedTracks",c)};d.$VideoComposerSoundEditorStoreClass12=function(a,b){__p&&__p();var c=a.get("draftAddedTracks"),d=b.startTimeInMs,e=b.endTimeInMs,f=c.get(b.index),g=f.startTimeInMs,h=f.endTimeInMs;f.startTimeInMs=d;f.endTimeInMs=e;var i=Date.now();f.itemStartTimeInMs-=g-d;f.itemEndTimeInMs-=h-e;f.lastModifiedTimestamp=i++;g=b.index>0?c.get(b.index-1):null;d=b.index<c.size-1?c.get(b.index+1):null;g&&(g.maxEndTimeInMs=f.startTimeInMs-l,g.lastModifiedTimestamp=i++);d&&(d.minStartTimeInMs=f.endTimeInMs+l,d.lastModifiedTimestamp=i++);h=[];g&&h.push(g);h.push(f);d&&h.push(d);c=(e=c).splice.apply(e,[Math.max(b.index-1,0),h.length].concat(h));return a.set("draftAddedTracks",c)};d.$VideoComposerSoundEditorStoreClass13=function(a,b){__p&&__p();var c=a.get("draftAddedTracks"),d=b.startTimeInMs,e=b.endTimeInMs,f=c.findIndex(function(a,c){return c!=b.index&&a.endTimeInMs>=d&&a.startTimeInMs<=e}),g=Date.now();if(f===-1){f=c.get(b.index);f.startTimeInMs=b.startTimeInMs;f.endTimeInMs=b.endTimeInMs;f.lastModifiedTimestamp=g++;var h=b.index>0?c.get(b.index-1):null,i=b.index<c.size-1?c.get(b.index+1):null;h&&(h.maxEndTimeInMs=i?i.startTimeInMs:null,h.lastModifiedTimestamp=g++);i&&(i.minStartTimeInMs=h?h.endTimeInMs:0,i.lastModifiedTimestamp=g++);c=c.splice(b.index,1);var j=[];h&&j.push(h);i&&j.push(i);c=(h=c).splice.apply(h,[Math.max(b.index-1,0),j.length].concat(j));i=this.$VideoComposerSoundEditorStoreClass11(e,d,c);h=i.leftItemIndex;j=i.leftItem;i=i.rightItem;f.minStartTimeInMs=j?j.endTimeInMs+l:null;f.maxEndTimeInMs=i?i.startTimeInMs+l:null;j&&(j.maxEndTimeInMs=f.startTimeInMs-l,j.lastModifiedTimestamp=g++);i&&(i.minStartTimeInMs=f.endTimeInMs+l,i.lastModifiedTimestamp=g++);var k=[];j&&k.push(j);k.push(f);i&&k.push(i);c=(j=c).splice.apply(j,[Math.max(h,0),k.length-1].concat(k))}else{f=c.get(b.index);f.lastModifiedTimestamp=g++;c=c.splice(b.index,1,f)}return a.set("draftAddedTracks",c)};d.getAddedTrackIndexById=function(a){var b=this.getState();b=b.draftAddedTracks;return b.findIndex(function(b){return b.id===a})};d.getEditingTrackData=function(){var a=this.getState();a=a.editingTrackData;return a};d.getVideoEditorConfigData=function(){var a=this.getState(),b=a.addedTracks;a=a.videoVolume;b=b.size>0?b:null;a=a!=null&&a>=0?a:null;return{addedTracks:b,videoVolume:a}};return c}(b("VideoComposerStoreBase"));e.exports=c}),null);
__d("VideoComposerSphericalDirectorStoreClass",["Promise","ImmutableRecordWithV4Types","SphericalDirectorAction","SphericalDirectorMetadataUtils","SphericalDirectorStore","VideoComposerActions","VideoComposerActionTypes","VideoComposerStoreBase","VideoSphericalMetadataReaderController","flattenPHPQueryData","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("ImmutableRecordWithV4Types").Record;c={videoComposerID:"",bootloadedParams:null,contextConfig:null,metadata:null,omnistabEnabled:!1,showOmnistabSection:!1,spherical:!1};var g=a(c);d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return g()};d.reduceImpl=function(a,c){__p&&__p();switch(c.type){case b("VideoComposerActionTypes").RESET_COMPOSER:a=this.$VideoComposerSphericalDirectorStoreClass1(a);return a;case b("VideoComposerActionTypes").BOOTLOAD_SPHERICAL_DIRECTOR_CROSSPOST_PARAMETERS:a=this.$VideoComposerSphericalDirectorStoreClass2(a,c.data);return a;case b("VideoComposerActionTypes").BOOTLOAD_SPHERICAL_DIRECTOR_EDIT_PARAMETERS:var d=c.data,e=d.showOmnistabSection,f=d.hasOmnistabEncoding,g=d.omnistabEnabled;d=babelHelpers.objectWithoutPropertiesLoose(d,["showOmnistabSection","hasOmnistabEncoding","omnistabEnabled"]);a=a.set("omnistabEnabled",g);a=a.set("showOmnistabSection",e&&f);a=this.$VideoComposerSphericalDirectorStoreClass2(a,d);return a;case b("VideoComposerActionTypes").BOOTLOAD_SPHERICAL_DIRECTOR_UPLOAD_PARAMETERS:a=a.set("showOmnistabSection",c.data.showOmnistabSection);return a;case b("VideoComposerActionTypes").BOOTLOAD_CROSSPOST_DEFAULT_TAB:a=this.$VideoComposerSphericalDirectorStoreClass3(a,c.data.composerConfig.contextConfig);return a;case b("VideoComposerActionTypes").BOOTLOAD_DEFAULT_EDIT_PARAMS:a=this.$VideoComposerSphericalDirectorStoreClass3(a,c.data.composerConfig.contextConfig);return a;case b("VideoComposerActionTypes").BOOTLOAD_SPHERICAL_CONTEXT_CONFIG:a=this.$VideoComposerSphericalDirectorStoreClass4(a,c.data);return a;case b("VideoComposerActionTypes").METADATA_LOADED_FROM_VIDEO_UPLOADER:a=this.$VideoComposerSphericalDirectorStoreClass5(a,c.data);return a;case b("VideoComposerActionTypes").TOGGLE_SPHERICAL:a=a.set("spherical",c.data);return a;default:return a}};d.$VideoComposerSphericalDirectorStoreClass3=function(a,b){a=a.set("contextConfig",b);var c=this.getState().get("bootloadedParams");c&&(a=this.$VideoComposerSphericalDirectorStoreClass6(a,b.composerID,c));return a};d.$VideoComposerSphericalDirectorStoreClass4=function(a,b){a=a.set("contextConfig",b);var c=this.getState().get("metadata");c&&(a=this.$VideoComposerSphericalDirectorStoreClass7(a,b.composerID,c));return a};d.$VideoComposerSphericalDirectorStoreClass2=function(a,b){a=a.set("bootloadedParams",b);var c=this.getState().get("contextConfig");c&&(a=this.$VideoComposerSphericalDirectorStoreClass6(a,c.composerID,b));return a};d.$VideoComposerSphericalDirectorStoreClass5=function(a,b){a=a.set("metadata",b);var c=this.getState().get("contextConfig");c&&(a=this.$VideoComposerSphericalDirectorStoreClass7(a,c.composerID,b));return a};d.$VideoComposerSphericalDirectorStoreClass1=function(a){var c=this.getState().get("contextConfig");c&&b("SphericalDirectorAction").clearSphericalDirector();a=this.getInitialState();return a};d.$VideoComposerSphericalDirectorStoreClass6=function(a,c,d){c=this.getState().get("omnistabEnabled");b("SphericalDirectorMetadataUtils").initWithParams(d.initialHeading,d.initialPitch,d.fov,d.guideEnabled,d.guideKeyframes,d.projection,d.stereoMode,d.hasSpatialAudio,c);return a};d.$VideoComposerSphericalDirectorStoreClass7=function(a,c,d){__p&&__p();if(d&&d.format){c=d.format.isSpherical;a=a.set("spherical",c);if(c){c=b("VideoSphericalMetadataReaderController").objectToRawSphericalMetadata(d);b("promiseDone")(new(b("VideoSphericalMetadataReaderController"))({sourceType:"metadata",metadata:c}).getFileMetadata().then(function(a){b("SphericalDirectorMetadataUtils").initWithOriginalSphericalMetadata(a),b("VideoComposerActions").sphericalMetadataParsed(a)}))}}return a};d.getEditAndCrosspostRequestData=function(a){__p&&__p();var c=this.getState().get("contextConfig"),d=this.getState().get("spherical");if(!c||!d)return b("Promise").resolve({});c=b("SphericalDirectorStore").getPostData();var e={};e.spherical=d;e.initial_heading=c.initialHeading;e.initial_pitch=c.initialPitch;e.fov=c.fov;e.guide_enabled=!!c.guide_enabled;e.enable_omnistab=!!c.enable_omnistab;var f;a?f=b("flattenPHPQueryData")({guide_keyframes:c.guide_keyframes}):f=b("flattenPHPQueryData")({guide:c.guide_keyframes});Object.keys(f).forEach(function(a){e[a]=f[a]});return b("Promise").resolve(e)};d.getPostRequestDataToSend=function(){__p&&__p();var a=this.getState().get("contextConfig");if(!a)return b("Promise").resolve({});a=["enable_omnistab","guide_enabled","guide_keyframes","fov","initialHeading","initialPitch","projection","spherical","stereoMode"];var c=Object.assign({},b("SphericalDirectorStore").getPostData());c.spherical=this.getState().get("spherical");a=a.reduce(function(a,b){b in c&&(a[b]=c[b]);return a},{});return b("Promise").resolve(a)};d.getSpherical=function(){return this.getState().spherical};return c}(b("VideoComposerStoreBase"));e.exports=d}),null);
__d("VideoComposerTrimmingEditorStoreClass",["Promise","ActorURI","AsyncRequest","ImmutableRecordWithV4Types","VideoComposerActionTypes","VideoComposerStoreBase","VideoComposerStores","VideoComposerTrimmingActions","XVideoComposerWasLiveTrimmingTabController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("ImmutableRecordWithV4Types").Record;var g=a({videoComposerID:"",draftEndTime:null,draftStartTime:null,endTime:null,isPlaying:!1,isWasLiveTrimmed:!1,showCancelConfirmDialog:!1,showEditor:!1,startTime:null,vpc:null});c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return g()};d.reduceImpl=function(a,c){__p&&__p();switch(c.type){case b("VideoComposerActionTypes").ATTEMPT_CLOSE_TRIMMING_EDITOR:if(this.$VideoComposerTrimmingEditorStoreClass1(a))return a.set("showCancelConfirmDialog",!0);else return a.set("showEditor",!1);case b("VideoComposerActionTypes").CANCEL_CLOSE_TRIMMING_EDITOR:return a.set("showCancelConfirmDialog",!1);case b("VideoComposerActionTypes").CONFIRM_CLOSE_TRIMMING_EDITOR:a=a.set("showCancelConfirmDialog",!1);return a.set("showEditor",!1);case b("VideoComposerActionTypes").OPEN_TRIMMING_EDITOR:a=this.$VideoComposerTrimmingEditorStoreClass2(a);return a.set("showEditor",!0);case b("VideoComposerActionTypes").RESET_COMPOSER:return this.getInitialState();case b("VideoComposerActionTypes").TRIMMING_SAVE_DRAFT:a=this.$VideoComposerTrimmingEditorStoreClass3(a);return a.set("showEditor",!1);case b("VideoComposerActionTypes").TRIMMING_PREVIEW_BY_START_END:return this.$VideoComposerTrimmingEditorStoreClass4(a,c);case b("VideoComposerActionTypes").TRIMMING_SET_END_TIME:this.$VideoComposerTrimmingEditorStoreClass5(a.vpc,c.endTime);return a.set("draftEndTime",c.endTime);case b("VideoComposerActionTypes").TRIMMING_SET_PLAYER_STATE:return a.set("isPlaying",c.isPlaying);case b("VideoComposerActionTypes").TRIMMING_SET_START_TIME:this.$VideoComposerTrimmingEditorStoreClass5(a.vpc,c.startTime);return a.set("draftStartTime",c.startTime);case b("VideoComposerActionTypes").TRIMMING_SET_VPC:return a.set("vpc",c.vpc);case b("VideoComposerActionTypes").TRIMMING_SET_IS_WAS_LIVE_TRIMMED:return a.set("isWasLiveTrimmed",c.isWasLiveTrimmed);default:return a}};d.$VideoComposerTrimmingEditorStoreClass1=function(a){var b=a.draftEndTime,c=a.draftStartTime,d=a.endTime;a=a.startTime;return b!=d||c!=a};d.$VideoComposerTrimmingEditorStoreClass2=function(a){var b=a,c=b.endTime;b=b.startTime;a=a.set("draftEndTime",c).set("draftStartTime",b);return a};d.$VideoComposerTrimmingEditorStoreClass4=function(a,b){var c=a.get("vpc");c&&c.emit("previewByStartEndTime",{endTime:b.endTime?b.endTime:0,startTime:b.startTime?b.startTime:0});a=a.set("isPlaying",!0);return a};d.$VideoComposerTrimmingEditorStoreClass3=function(a){var b=a,c=b.draftEndTime;b=b.draftStartTime;a=a.set("endTime",c);a=a.set("startTime",b);return a};d.$VideoComposerTrimmingEditorStoreClass5=function(a,b){a&&a.seek(b)};d.getPostDataForEdit=function(){var a=this.getState(),c=a.draftStartTime;a=a.draftEndTime;var d={};c!=null&&(d.new_start_time=c);a!=null&&(d.new_end_time=a);return b("Promise").resolve(d)};d.fetchEditPostDataForWasLiveTrimming=function(a,c){var d=this;a=b("XVideoComposerWasLiveTrimmingTabController").getURIBuilder().setFBID("video_id",a).getURI();var e=b("ActorURI").create(a,c);return new(b("Promise"))(function(a,c){new(b("AsyncRequest"))(e).setHandler(function(c){b("VideoComposerTrimmingActions").setIsWasLiveTrimmed(d.getState().videoComposerID,c.payload.isWasLiveTrimmed);return a()}).setErrorHandler(function(a){c(a)}).send()})};d.isVideoTrimmed=function(){var a=this.getState(),b=a.endTime,c=a.startTime;a=a.vpc;if(!a)return!1;a=a.getPlaybackDuration();return!c&&(!b||b===a)?!1:!0};d.getVideoEditorConfigData=function(){var a=this.getState(),b=a.endTime,c=a.startTime;a=a.vpc;if(this.isVideoTrimmed()&&a){a=a.getPlaybackDuration();c=c?c:0;b=b?b:a;return{trim_before_start:c,trim_after_end:b}}return null};d.getTrimmedVideoDuration=function(){var a=b("VideoComposerStores").getMetadataStore().getState();a=a.videoDuration;var c=this.getState(),d=c.endTime;c=c.startTime;d=d==null?a==null?0:a:d;c=c||0;return d-c};return c}(b("VideoComposerStoreBase"));e.exports=c}),null);
__d("VideoComposerBestPracticesChecklistUtils",["VideoComposerStores","getMentionsTextForContentState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=180;function a(a,c,d){d=c.isVideoHighQuality;c=a.contentTags;a=a.descriptionEditorState;var e=b("VideoComposerStores").getTrimmingEditorStore().getTrimmedVideoDuration();a=b("getMentionsTextForContentState")(a.getCurrentContent());c=c.length>0;a=a.trim()!=="";e=e>g;return{hasMinVideoDuration:e,isDescriptionAdded:a,isTagAdded:c,isVideoHighQuality:d}}e.exports={getBestPracticesChecklistConfig:a}}),null);
__d("VideoComposerCrosspostCaptionsUploadUtils",["Promise","ActorURI","AsyncRequest","GraphAPI","VideoComposerStores","XVideoCaptionUploadAsyncController","killswitch","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,c,d,e,f,i,j,k){__p&&__p();if(f.length===0){j(d,a.id,e);return}if(b("killswitch")("PUBX_VIDEO_CROSSPOST_CREATE_SUBTITLES")){g(a,c,d,e,i,j,k);return}var l=a.id,m=b("XVideoCaptionUploadAsyncController").getURIBuilder().setInt("video_id",l).setBool("set_immediate_publish",!0),n=new FormData();f.forEach(function(a,b){b=a.getIsDefault()?"captions_default":"captions_file"+b;n.append(b,a.getFile())});f=m.getURI();m=b("ActorURI").create(f,d);new(b("AsyncRequest"))(m).setMethod("POST").setRawData(n).setHandler(function(b){b=b.payload;if(b&&b.success==="true"&&b.error===""){g(a,c,d,e,i,j,k);return}h(l);k(d,b.error)}).send()}function g(a,c,d,f,g,i,j){__p&&__p();g=b("VideoComposerStores").getCaptionsStore().getState();g=g.localCaptionFiles;g=g.toArray();var k=a.id;if(g.length===0){i(d,k,f);return}b("promiseDone")(b("Promise").all(g.map(function(a){var f=new FormData();f.append("access_token",c);f.append("captions_file",a.getFile());a.getIsDefault()&&f.append("default_locale",a.getLocale());a=b("GraphAPI")("2.11",e.id).object("video",k).edge("captions").post(f);b("promiseDone")(a,function(){},function(a){h(k),j(d,a)});return a})),function(a){i(d,k,f)},function(a){h(k),j(d,a)})}function h(a){new(b("AsyncRequest"))().setURI("/ajax/video/actions/delete/").setData({fbid:a,redirect:!1}).send()}e.exports={postCaptionsFilesAndSubtitles:a}}),null);
__d("VideoComposerDialogBasicUtils",["Promise","ActorURI","AsyncRequest","EditorState","MentionsInputUtility","ReactComposerTaggerActions","ReactComposerTaggerStore","ReactComposerTaggerType","SearchableEntry","VideoComposerBasicActions","VideoComposerSphericalDirectorActions","VideoComposerTaggingUtils","XPagesVideoListsController","XVideoComposerBootloadDefaultTabController","XVideoComposerCrosspostBootloadDefaultController","XVideoComposerEditDefaultTabController","getMentionsInputDecorator","isEmpty"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a,c){var d=b("XVideoComposerBootloadDefaultTabController").getURIBuilder().setFBID("target_id",c).setString("video_composer_id",a).getURI();d=b("ActorURI").create(d,c);d=[new(b("AsyncRequest"))(d).exec(),b("VideoComposerTaggingUtils").getSuggestedContentTags(c).then(function(c){b("VideoComposerBasicActions").updateHistoryTags(a,c.history),b("VideoComposerBasicActions").updateSuggestedTags(a,c.suggested)}),b("VideoComposerTaggingUtils").getBrowseTags().then(function(c){b("VideoComposerBasicActions").updateBrowseTags(a,c)}),h(c,a)];return b("Promise").all(d)};c=function(a,c){var d=b("XVideoComposerEditDefaultTabController").getURIBuilder().setFBID("video_id",c.videoID).setString("video_composer_id",a).getURI();d=b("ActorURI").create(d,c.common.actorID);d=[new(b("AsyncRequest"))(d).exec(),b("VideoComposerTaggingUtils").getSuggestedContentTags(c.common.actorID).then(function(c){b("VideoComposerBasicActions").updateHistoryTags(a,c.history),b("VideoComposerBasicActions").updateSuggestedTags(a,c.suggested)}),b("VideoComposerTaggingUtils").getBrowseTags().then(function(c){b("VideoComposerBasicActions").updateBrowseTags(a,c)})];return b("Promise").all(d)};d=function(a,c,d,e){d=b("XVideoComposerCrosspostBootloadDefaultController").getURIBuilder().setFBID("video_asset_id",d).setFBID("source_video_id",e).setString("video_composer_id",a).getURI();e=b("ActorURI").create(d,c);d=[new(b("AsyncRequest"))(e).exec(),b("VideoComposerTaggingUtils").getSuggestedContentTags(c).then(function(c){b("VideoComposerBasicActions").updateHistoryTags(a,c.history),b("VideoComposerBasicActions").updateSuggestedTags(a,c.suggested)}),b("VideoComposerTaggingUtils").getBrowseTags().then(function(c){b("VideoComposerBasicActions").updateBrowseTags(a,c)})];return b("Promise").all(d)};f=function(a,c){b("VideoComposerBasicActions").changeGame(a,c)};var g=function(a,c){return c&&!b("isEmpty")(c)?a.concat(c.map(function(a){return new(b("SearchableEntry"))({uniqueID:a,title:a,auxiliaryData:{isFreeForm:!0}})})):a},h=function(a,c){var d=b("XPagesVideoListsController").getURIBuilder().setFBID("page_id",a).getURI();return new(b("Promise"))(function(a,e){new(b("AsyncRequest"))(d).setHandler(function(d){var e=d.payload.seasonOptions||{},f=d.payload.playlistOptions||{};b("VideoComposerBasicActions").updateVideoListOptions(c,f,e);a(d)}).setErrorHandler(function(a){e(a)}).send()})},i=function(a){return a.length<=0?[]:a.filter(function(a){return!a.getAuxiliaryData().isFreeForm}).map(function(a){return a.getUniqueID()})},j=function(a){__p&&__p();var c={},d=b("ReactComposerTaggerStore").getTaggerData(a,b("ReactComposerTaggerType").PEOPLE)||[];d=d.map(function(a){return a.getUniqueID()});Object.assign(c,{tags:d});d=b("ReactComposerTaggerStore").getTaggerData(a,b("ReactComposerTaggerType").LOCATION)||{};d=d?d.place:{};var e=d?d.getUniqueID():null;d=d&&!d.getUniqueID()?d.getTitle():null;e?Object.assign(c,{place_id:e}):d&&Object.assign(c,{place_name:d});e=b("ReactComposerTaggerStore").getTaggerData(a,b("ReactComposerTaggerType").BACKDATE);e.year&&Object.assign(c,{backtime_year:e.year});e.month&&Object.assign(c,{backtime_month:e.month});e.day&&Object.assign(c,{backtime_day:e.day});e.hour&&Object.assign(c,{backtime_hour:e.hour});e.minute&&Object.assign(c,{backtime_minute:e.minute});d=b("ReactComposerTaggerStore").getTaggerData(a,b("ReactComposerTaggerType").SPONSOR)||{};var f={directShareStatus:d.directShareStatus,sponsorRelationship:d.sponsorRelationship,sponsors:[]};(d.sponsors||[]).map(function(a){f.sponsors.push(a.getUniqueID())});f&&f.sponsors&&Object.assign(c,{sponsor_tags:f.sponsors,direct_share_status:f.directShareStatus,sponsor_relationship:f.sponsorRelationship});e=b("ReactComposerTaggerStore").getTaggerData(a,b("ReactComposerTaggerType").PRODUCT)||[];d=e.map(function(a){return a.getUniqueID()});d&&Object.assign(c,{product_tags:d});e=b("ReactComposerTaggerStore").getTaggerData(a,b("ReactComposerTaggerType").SUPPORT_NOW);e&&Object.assign(c,{has_support_now_cta:e.hasSupportNowCTA,fan_funding_promotion_payload:e.fanFundingPromotionPayload});Object.assign(c,{external_movie_data:b("ReactComposerTaggerStore").getTaggerData(a,b("ReactComposerTaggerType").GET_SHOWTIMES)});return c},k=function(a){a=b("MentionsInputUtility").createFromTextWithMentions(a,b("getMentionsInputDecorator")());b("EditorState").moveFocusToEnd(a);return a},l=function(a){return a.length<=0?[]:a.filter(function(a){return a.getAuxiliaryData().isFreeForm}).map(function(a){return a.getUniqueID()})},m=function(a,c,d,e,f,g,h,i){b("ReactComposerTaggerActions").setTaggerDataWithoutLogging(a,b("ReactComposerTaggerType").PEOPLE,c),d=d?new(b("SearchableEntry"))(d):null,d=d?{place:d,implicitLocation:{}}:null,d&&b("ReactComposerTaggerActions").setTaggerDataWithoutLogging(a,b("ReactComposerTaggerType").LOCATION,d),e&&b("ReactComposerTaggerActions").setTaggerDataWithoutLogging(a,b("ReactComposerTaggerType").BACKDATE,e),f&&b("ReactComposerTaggerActions").setTaggerDataWithoutLogging(a,b("ReactComposerTaggerType").SPONSOR,f),g&&b("ReactComposerTaggerActions").setTaggerDataWithoutLogging(a,b("ReactComposerTaggerType").PRODUCT,g),i&&b("ReactComposerTaggerActions").setTaggerDataWithoutLogging(a,b("ReactComposerTaggerType").SUPPORT_NOW,{hasSupportNowCTA:i})},n=function(a,c,d){__p&&__p();for(var d=d,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;b("ReactComposerTaggerActions").setTaggerDataWithoutLogging(c,g,b("ReactComposerTaggerStore").getTaggerData(a,g))}};e.exports={beginBootloadingDefaultTab:a,beginBootloadingCrosspostDefaultTab:d,bootloadDefaultTab:function(a){b("VideoComposerBasicActions").bootloadDefaultTabParameters(a.videoComposerID,a),b("VideoComposerSphericalDirectorActions").bootloadSphericalContextConfig(a.videoComposerID,a.composerConfig.contextConfig)},bootloadCrosspostDefaultTab:function(a){b("VideoComposerBasicActions").bootloadCrosspostDefaultTabParameters(a.videoComposerID,a)},bootloadDefaultEditParams:function(a){b("VideoComposerBasicActions").bootloadDefaultEditParameters(a.videoComposerID,a)},changeGame:f,convertVideoTagsToEntryArray:g,beginBootloadingEditDefaultTab:c,fetchVideoListOptions:function(a,b){h(a,b)},getComposerTaggerData:j,getContentTagEntryIDs:i,getEditorStateForText:k,getFreeFormContentTags:l,setComposerTaggerData:m,setComposerTaggerDataFromOriginalComposer:n}}),null);
__d("VideoComposerDialogBasicVideoController",["SubscriptionsHandler","VideoComposerBasicActions","VideoPlayerReason"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1=new(b("SubscriptionsHandler"))()}var c=a.prototype;c.updateVPC=function(a){if(this.$2===a)return;this.$1.release();if(!a)return;this.$2=a;this.$1=new(b("SubscriptionsHandler"))();this.$1.addSubscriptions(a.addListener("playRequested",function(a){a===b("VideoPlayerReason").USER&&b("VideoComposerBasicActions").userPlayedVideoPreview()}))};c.unmount=function(){this.$1.release(),this.$2=null};return a}();e.exports=new a()}),null);
__d("VideoComposerDialogCrosspostUtils",["Promise","Arbiter","ErrorUtils","GraphAPI","VideoComposerActions","VideoComposerCrosspostCaptionsUploadUtils","VideoComposerDialogTab","VideoComposerStores","VideoComposerTabs","WoodhengeCreatorOnboardingActions","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VideoComposerCrosspostCaptionsUploadUtils").postCaptionsFilesAndSubtitles;a=function(){__p&&__p();var a=b("VideoComposerStores").getMetadataStore().getState(),c=a.enabledTabs,d=a.accessToken,f=a.actorID,h=a.videoAssetID;a=b("VideoComposerStores").getCaptionsStore().getState();var k=a.captionsFeaturesMode,l=c.map(function(a){return b("VideoComposerTabs").get(a).getCrosspostRequestDataToSend()});[b("VideoComposerStores").getMetadataStore(),b("VideoComposerStores").getPublishingStore()].forEach(function(a){l.push(a.getCrosspostRequestDataToSend())});c.includes(b("VideoComposerDialogTab").DISTRIBUTION)||l.push(b("VideoComposerStores").getDistributionStore().getCrosspostRequestDataToSend());b("promiseDone")(b("Promise").all(l).then(function(a){var c={};a.forEach(function(a){return c=babelHelpers["extends"]({},c,a)});var d=new FormData();Object.keys(c).forEach(function(a){d.append(a,c[a])});delete c.video_asset_id;b("VideoComposerActions").postRequestSent(c);return b("GraphAPI")("2.12",e.id).object("page",f||"").edge("videos").post(d)}),function(a){var c=b("VideoComposerStores").getCaptionsStore().getState();c=c.localCaptionFiles;c=c.toArray();f&&h&&g(a,d,f,h,c,k,i,j)},function(a){j(f||"",a)})};var h=function(a,c,d){b("Arbiter").inform("video/newPost"+a,{videoAssetID:d,videoID:c})},i=function(a,c,d){b("VideoComposerActions").crosspostFinished(),h(a,c,d),b("WoodhengeCreatorOnboardingActions").crosspostFinished(a)},j=function(a,c){b("VideoComposerActions").crosspostFailed(b("ErrorUtils").normalizeError(c)),b("WoodhengeCreatorOnboardingActions").crosspostFailed(c,a)};e.exports={createCrosspost:a}}),null);
__d("VideoComposerDialogEditUtils",["fbt","invariant","Promise","ActorURI","AdBreakCreatorPerformanceLoggingUtils","Arbiter","AsyncRequest","DOM","ExpirationType","FBFeedLocations","FbtResultBase","PageContentTabConfig","PagesComposer","PostExpireDialog.react","PostScheduleDialog.react","React","ReactDOM","ReloadPage","UserAgent","VideoComposerActions","VideoComposerStores","VideoComposerTabs","VideoEditEvent","VideoEditFlow","VideoEditPublishingAction","VideoEditPublishingStatus","VideoEditSource","VideoEditTypedLogger","XVideoEditDialogSaveController","XVideoEditMakeFeaturedController","XVideoGenerateStoryController","ge","promiseDone"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=this,j=b("AdBreakCreatorPerformanceLoggingUtils").logAdBreakEditActionOnCrosspost,k=1e3,l=60*k;a=function(a,b){if(!a)return!1;var c=a-l;a=a+l;return b>c&&b<a};var m=function(a){var c=b("DOM").create("a");c.download="";c.href=a;c.target="_blank";c.click()};c=function(a){return b("UserAgent").isBrowser("Firefox")?{href:a,target:"_blank"}:{onclick:m.bind(i,a)}};d=function(a,c,d){a=b("XVideoEditMakeFeaturedController").getURIBuilder().setFBID("v",a).setBool("is_videos_tab",b("ge")("video_hub_featured_video_container")!=null).getURI();c&&(a=b("ActorURI").create(a,c));new(b("AsyncRequest"))(a).setHandler(function(a){d(a.payload)}).send()};f=function(a,c){a=a.value;a===b("VideoEditPublishingAction").MAKE_DRAFT.value||a===b("VideoEditPublishingAction").PUBLISH_WITH_SERIES.value||a===b("VideoEditPublishingAction").PUBLISH_WITH_SEASON.value?n():a===b("VideoEditPublishingAction").PUBLISH.value?o():a===b("VideoEditPublishingStatus").SCHEDULED.value?p(c):a===b("VideoEditPublishingStatus").DRAFT.value?q():a===b("VideoEditPublishingAction").EXPIRE.value?r():a===b("VideoEditPublishingStatus").PUBLISHED.value?s():a===b("VideoEditPublishingAction").SCHEDULE_PUBLISH.value?u():a===b("VideoEditPublishingAction").CANCEL_EXPIRATION.value?w():a===b("VideoEditPublishingStatus").EXPIRING.value?x(c):a===b("VideoEditPublishingAction").REPUBLISH.value?y():a===b("VideoEditPublishingStatus").EXPIRED.value?z(c):a===b("VideoEditPublishingAction").SCHEDULE_EXPIRATION.value?A(c):a===b("VideoEditPublishingStatus").UNPUBLISHED.value&&t();b("VideoComposerActions").selectEditPublishAction(a)};var n=function(){b("VideoComposerActions").editShouldPublish(!1),b("VideoComposerActions").editScheduledTime(new Date(0))},o=function(){b("VideoComposerActions").editShouldPublish(!0)},p=function(a){a=a.scheduledPublishTime;b("VideoComposerActions").editScheduledTime(new Date(a));b("VideoComposerActions").editShouldPublish(!1)},q=function(){b("VideoComposerActions").editScheduledTime(new Date(0)),b("VideoComposerActions").editShouldPublish(!1)},r=function(){b("VideoComposerActions").editShouldExpire(!0)},s=function(){b("VideoComposerActions").editShouldExpire(!1),b("VideoComposerActions").editExpiration(new Date(0),b("ExpirationType").NONE)},t=function(){b("VideoComposerActions").editShouldPublish(!1)},u=function(){var a=g._("OK");a=b("React").createElement(b("PostScheduleDialog.react"),{timezoneStr:b("PageContentTabConfig").timezone_str,onSubmit:v,submitLabel:a});a=b("ReactDOM").render(a,b("DOM").create("div"));a.show()},v=function(a){b("VideoComposerActions").editScheduledTime(a),b("VideoComposerActions").editShouldPublish(!1)},w=function(){b("VideoComposerActions").editShouldExpire(!1),b("VideoComposerActions").editExpiration(new Date(0),b("ExpirationType").NONE)},x=function(a){var c=a.expirationTime;a=a.expirationType;b("VideoComposerActions").editShouldExpire(!1);b("VideoComposerActions").editExpiration(new Date(c),a)},y=function(){b("VideoComposerActions").editShouldExpire(!1),b("VideoComposerActions").editExpiration(new Date(0),b("ExpirationType").NONE)},z=function(a){var c=a.expirationTime;a=a.expirationType;b("VideoComposerActions").editExpiration(new Date(c),a)},A=function(a){var c=g._("OK"),d=b("React").createElement(b("PostExpireDialog.react"),{timezone:b("PageContentTabConfig").timezone_str,hideExpirationToggle:!0,onSubmit:function(c,e){B(a,c,e),d instanceof b("PostExpireDialog.react")||h(0,1818),d.hide()},submitLabel:c});d=b("ReactDOM").render(d,b("DOM").create("div"));d.show()},B=function(a,c,d){c?c*=k:c=a.expirationTime,b("VideoComposerActions").editExpiration(new Date(c),d)},C=function(a,c,d,e){__p&&__p();var f=new FormData(),g=[];for(var d=d,h=Array.isArray(d),i=0,d=h?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(h){if(i>=d.length)break;j=d[i++]}else{i=d.next();if(i.done)break;j=i.value}j=j;g.push(b("VideoComposerTabs").get(j).getEditRequestDataToSend().then(function(a){a&&Object.keys(a).forEach(function(b){a&&f.append(b,a[b])})}))}[b("VideoComposerStores").getMetadataStore().getEditRequestDataToSend(),b("VideoComposerStores").getPublishingStore().getEditRequestDataToSend(),b("VideoComposerStores").getPremiereStore().getEditRequestDataToSend()].forEach(function(a){return g.push(a.then(function(a){a&&Object.keys(a).forEach(function(b){f.append(b,a[b])})}))});b("promiseDone")(b("Promise").all(g),function(){f.append("edit_flow",b("VideoEditFlow").DIALOG_V2),e!=null&&f.append("composer_entry_point_ref",e),H(a,c,f)},function(a){b("VideoComposerActions").saveEditedVideoFailure(a instanceof b("FbtResultBase")||typeof a==="string"?a:E())})},D=function(a,c,d,e,f,g,h,i){__p&&__p();if(i===b("VideoEditSource").PERMALINK){b("ReloadPage").now();return}var k=b("VideoComposerStores").getMetadataStore().getState();k=k.hasAdBreaksBefore;!e&&!k&&f&&j(a,d);if(i===b("VideoEditSource").TIMELINE&&a&&h){e=b("XVideoGenerateStoryController").getURIBuilder().getURI();k={video_id:c,feed_location:b("FBFeedLocations").PAGE_TIMELINE};g&&(k.timeline_identifier=g);G(b("VideoEditEvent").REQUEST_NEW_STORY,i,c);new(b("AsyncRequest"))().setURI(e).setData(k).setHandler(function(a){F(a,h,i,c)}).setErrorHandler(function(a){G(b("VideoEditEvent").ERROR_NO_NEW_STORY,i,c)}).send();return}if(i===b("VideoEditSource").LIBRARY||i===b("VideoEditSource").VIDEO_PAGE_SPOTLIGHT_SELECTOR||i===b("VideoEditSource").MEDIA_MANAGER_CONTENT_LIBRARY){f={id:c,videoID:c};d&&(f.videoAssetID=d);b("Arbiter").inform("video/edited"+a,f)}},E=function(){return g._("Sorry, something went wrong. Please try again later.")},F=function(a,c,d,e){a=a.payload;a?(G(b("VideoEditEvent").RECEIVED_NEW_STORY,d,e),b("PagesComposer").replaceByID(c,a),G(b("VideoEditEvent").REPLACED_OLD_STORY,d,e)):G(b("VideoEditEvent").ERROR_NO_NEW_STORY,d,e)},G=function(a,c,d){new(b("VideoEditTypedLogger"))().setEvent(a).setSource(c).setFlow(b("VideoEditFlow").DIALOG_V2).setVideoID(d).log()},H=function(a,c,d){c=b("XVideoEditDialogSaveController").getURIBuilder().setInt("v",c).getURI();c=b("ActorURI").create(c,a);new(b("AsyncRequest"))(c).setRawData(d).setHandler(function(a){var c=a.payload.error;!c?b("VideoComposerActions").saveEditedVideoSuccess():b("VideoComposerActions").saveEditedVideoFailure(a.payload.unknownError?E():a.payload.errorMessage)}).setErrorHandler(function(a){b("VideoComposerActions").saveEditedVideoFailure(a.errorDescription)}).send()};e.exports={areTwoTimesAlmostTheSame:a,getDownloadMenuItemProps:c,onMakeFeaturedVideo:d,onPublishingChange:f,onSave:C,onSuccessfulSave:D}}),null);
__d("VideoComposerDialogTabUtils",["Promise","React","VideoComposerActions","VideoComposerDialogTab","VideoComposerDistributionTabConfig","VideoComposerTabs","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(a){return a.code+": "+a.summary.toString()+":"+a.descriptionString},h=function(a){return a.error!==0?g(a.toError()):"Errored while loading tab"};a=function(a,c){var d=c.common.enabledTabs.map(function(d){return b("VideoComposerTabs").get(d).fetchCrosspostData(a,c).then(function(){},function(a){b("VideoComposerActions").tabBootloadError(d,h(a))})});c.common.enabledTabs.includes(b("VideoComposerDialogTab").DISTRIBUTION)||d.push(b("VideoComposerTabs").get(b("VideoComposerDialogTab").DISTRIBUTION).fetchCrosspostData(a,c).then(function(){},function(a){b("VideoComposerActions").tabBootloadError(b("VideoComposerDialogTab").DISTRIBUTION,h(a))}));b("promiseDone")(b("Promise").all(d),function(){b("VideoComposerActions").allTabsBootloaded(),(function(){b("VideoComposerActions").allTabsBootloaded()})})};c=function(a,c){var d=c.common.enabledTabs.map(function(d){return b("VideoComposerTabs").get(d).fetchEditPostData(a,c).then(function(){},function(a){b("VideoComposerActions").tabBootloadError(d,h(a))})});b("promiseDone")(b("Promise").all(d),function(){b("VideoComposerActions").editTabsLoaded()},function(){b("VideoComposerActions").editTabsLoaded()})};d=function(a,c){__p&&__p();var d=[],e=function(){__p&&__p();if(g){if(i>=f.length)return"break";j=f[i++]}else{i=f.next();if(i.done)return"break";j=i.value}var e=j,k=b("VideoComposerTabs").get(e).fetchCreatePostData;k&&d.push(k(a,c).then(function(){},function(a){b("VideoComposerActions").tabBootloadError(e,h(a))}))};for(var f=c.common.enabledTabs,g=Array.isArray(f),i=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j,k=e();if(k==="break")break}!c.common.enabledTabs.includes(b("VideoComposerDialogTab").DISTRIBUTION)&&b("VideoComposerDistributionTabConfig").fetchCreatePostData&&d.push(b("VideoComposerDistributionTabConfig").fetchCreatePostData(a,c).then(function(){},function(a){b("VideoComposerActions").tabBootloadError(b("VideoComposerDialogTab").DISTRIBUTION,h(a))}));b("promiseDone")(b("Promise").all(d),function(){b("VideoComposerActions").allTabsBootloaded()},function(){b("VideoComposerActions").allTabsBootloaded()})};f=function(a){return a.map(function(a){var c=b("VideoComposerTabs").get(a).tabContainer;return b("React").createElement(c,{key:a})})};e.exports={fetchCreatePostParameters:d,fetchCrosspostParameters:a,fetchEditPostParameters:c,getTabContainers:f}}),null);
__d("VideoComposerDialogThumbnailUtils",["regeneratorRuntime","Promise","ActorURI","AsyncRequest","AudioContextSingleton","Bootloader","EventListener","FBLogger","SphericalDirectorSpatialAudioUtils","UserAgent","VideoComposerDialogConstants","VideoComposerDialogMode","VideoComposerThumbnailActions","XVideoComposerCrosspostBootloadThumbnailsController","XVideoComposerEditThumbnailsTabController","generateVideoThumbnails"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a,c,d){__p&&__p();var e,f,g;return b("regeneratorRuntime").async(function(i){__p&&__p();while(1)switch(i.prev=i.next){case 0:if(h(b("VideoComposerDialogMode").VIDEO_UPLOAD)){i.next=2;break}return i.abrupt("return",b("Promise").resolve());case 2:i.prev=2;if(!b("SphericalDirectorSpatialAudioUtils").getShouldUseSpatialAudioController()){i.next=6;break}i.next=6;return b("regeneratorRuntime").awrap(new(b("Promise"))(function(a,d){b("Bootloader").loadModules(["SphericalVideoSpatialAudioController","Audio360"],function(d,e){var f=b("SphericalDirectorSpatialAudioUtils").getAudioChannelLayout(),g=b("SphericalDirectorSpatialAudioUtils").getRemapChannelsForSevenPointOne(),h=b("SphericalDirectorSpatialAudioUtils").getCanUseSpatialAudio();d=d.getChannelAndHeadlockedMap(f,g);f=d.channelMap;g=d.headlockedMap;new e(c,b("AudioContextSingleton").get(),f,g,h);c.load();b("EventListener").listen(c,"loadedmetadata",function(){a()})},"VideoComposerDialogThumbnailUtils")}));case 6:b("VideoComposerThumbnailActions").generatedThumbnailsStarted;i.next=9;return b("regeneratorRuntime").awrap(b("generateVideoThumbnails")(c,c.videoWidth?c.videoWidth:0,c.videoHeight?c.videoHeight:0,b("VideoComposerDialogConstants").GENERATED_THUMBNAILS,"contain",0,d));case 9:e=i.sent;f=e.thumbnails;g=e.selectedThumbnail;return i.abrupt("return",b("VideoComposerThumbnailActions").generatedThumbnails(a,{thumbnails:f,selectedThumbnail:g}));case 15:i.prev=15;i.t0=i["catch"](2);b("FBLogger").error(i.t0);return i.abrupt("return",b("VideoComposerThumbnailActions").generatedThumbnailsFailed(a));case 19:case"end":return i.stop()}},null,this,[[2,15]])};c=function(a,c,d){d=b("XVideoComposerCrosspostBootloadThumbnailsController").getURIBuilder().setFBID("video_asset_id",d).getURI();d=b("ActorURI").create(d,c);return new(b("AsyncRequest"))().setURI(d).exec().then(function(c){b("VideoComposerThumbnailActions").bootloadCrosspostThumbnails(a,c.payload)})};d=function(a,c,d){d=b("XVideoComposerEditThumbnailsTabController").getURIBuilder().setFBID("video_id",d).getURI();d=b("ActorURI").create(d,c);return new(b("AsyncRequest"))().setURI(d).exec().then(function(c){b("VideoComposerThumbnailActions").bootloadThumbnailsForEdit(a,c.payload)})};var g=function(){return b("UserAgent").isBrowser("Firefox >= 14")||b("UserAgent").isBrowser("Chrome")};f=function(a){return g()};var h=function(a){return a===b("VideoComposerDialogMode").VIDEO_UPLOAD?g():!0},i=function(a){if(a.spherical){var b=a.projectionType;a=a.stereoMode;if(a==="left-right"||a==="top-bottom"||b==="cubemap")return"cover"}return"contain"};e.exports={beginBootloadingCrosspostThumbnailsTab:c,beginBootloadingEditThumbnailsTab:d,getThumbnailBackgroundSize:i,onMetadataLoaded:a,showGeneratedSection:h,showScrubberSection:f}}),null);
__d("VideoComposerDialogUploadUtils",["invariant","Promise","ActorURI","AdBreaksNPSSurveyUtils","Arbiter","AsyncRequest","ComposerPublisher","DateConsts","FlexLayout.react","HTML","PhotosUploadID","React","ReactComposerAudienceActions","ReactComposerMediaUploadActions","ReactComposerMediaUploadStore","ReactComposerMediaUploadType","ReactComposerStatusActions","ServerHTML.react","SharesheetDestination","SimpleNUXMessage","SimpleNUXMessageTypes","VideoComposerActions","VideoComposerDialogConstants","VideoComposerDialogTab","VideoComposerStores","VideoComposerTabs","VideoData","VideoUploader","VideoUploadFile","XBrandedContentComposerInterceptController","XVideoComposerInitUploadController","gkx","immutable","promiseDone","setTimeout"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("AdBreaksNPSSurveyUtils").renderAdBreaksNPSSurveyV1;d=function(a,c){a.addSubscriptions(c.subscribe("upload-finished",b("VideoComposerActions").uploadFinished),c.subscribe("upload-failed",function(a,c){b("setTimeout")(function(){return b("VideoComposerActions").uploadFailed(c)},0)}),c.subscribe("upload-progressed",b("VideoComposerActions").uploadProgressed),c.subscribe("post-failed",b("VideoComposerActions").postFailed),c.subscribe("post-finished",b("VideoComposerActions").postFinished),c.subscribe("metadata-parsed",function(a,c){b("setTimeout")(function(){return b("VideoComposerActions").metadataLoadedFromVideoUploader(c)},0)}))};var i=function(a){b("VideoComposerActions").createPageStoryAttempt();var c=b("VideoComposerStores").getBasicStore().getState().composerConfig,d=c?c.contextConfig:{};c=b("VideoComposerStores").getMetadataStore().getState();var e=c.videoID;return!e?b("Promise").resolve(!1):new(b("Promise"))(function(c,f){b("ComposerPublisher").publish(babelHelpers["extends"]({},d,{onPostSuccess:function(){b("VideoComposerActions").createPageStorySuccess(),c(!0)},onPostFailure:function(a){b("VideoComposerActions").createPageStoryFailure(a.getErrorDescriptionString()),c(!1)}}),babelHelpers["extends"]({},a,{composer_session_id:d.composerID,composer_unpublished_photo:[e],is_also_posting_video_to_feed:!a.no_story,xhpc_targetid:d.actorID}),{type:b("SharesheetDestination").STORIES})})};f=function(a,c,d){a=a&&a.getInput()?b("VideoUploadFile").fromFileInput(a.getInput()):b("VideoUploadFile").fromFile(c);d.upload(a)};function c(a){__p&&__p();var c=b("VideoComposerStores").getPublishingStore().getState();c=c.postData;!c&&g(0,2403);var d=babelHelpers["extends"]({},c,a);d=Object.keys(d).filter(function(a){return Object.prototype.hasOwnProperty.call(d,a)&&a!=="composer_entry_point"&&d[a]!==null}).reduce(function(a,b){a[b]=d[b];return a},{});a=b("VideoComposerStores").getUploadStore().getState();a=a.videoUploader;a&&a.post(d);b("VideoComposerActions").postRequestSent(c)}var j=function(a,c){__p&&__p();var d=[];for(var e=c,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}h=h;d.push(b("VideoComposerTabs").get(h).getPostRequestDataToSend().then(function(b){Object.assign(a,b)}))}h=b("immutable").List([b("VideoComposerStores").getMetadataStore().getPostRequestDataToSend(),b("VideoComposerStores").getPublishingStore().getPostRequestDataToSend(),b("VideoComposerStores").getPremiereStore().getPostRequestDataToSend(),n()]);c.includes(b("VideoComposerDialogTab").DISTRIBUTION)||(h=h.push(b("VideoComposerTabs").get(b("VideoComposerDialogTab").DISTRIBUTION).getPostRequestDataToSend()));h.forEach(function(b){return d.push(b.then(function(b){Object.assign(a,b)}))});return d},k=function(a,c,d){__p&&__p();d===void 0&&(d=!1);var e={};c=j(e,c);b("promiseDone")(b("Promise").all(c).then(function(){return p(a,e)}),function(c){__p&&__p();var f=l(e);if(f.length!==0){b("VideoComposerActions").postRequestInvalid(e,f);return}if(c)q(e);else if(d)w(e);else{f=b("VideoComposerStores").getDistributionStore().shouldAddToPagesStory();c=b("Promise").resolve(!1);f&&(c=i(e));b("promiseDone")(c,function(){b("VideoComposerActions").sendingPostRequest(),a.post(e),b("VideoComposerActions").postRequestSent(e)})}},function(a){b("VideoComposerActions").cancelUpload()})},l=function(a){return m().map(function(b){return b(a)}).filter(Boolean)},m=function(){return[].concat(b("VideoComposerStores").getPremiereStore().getInvalidationCheckers())},n=function(){var a=b("VideoComposerStores").getTrimmingEditorStore().getVideoEditorConfigData(),c=b("VideoComposerStores").getSoundEditorStore().getVideoEditorConfigData(),d={},e={};a&&(d.trim_before_start=a.trim_before_start,d.trim_after_end=a.trim_after_end);c&&(c.videoVolume!=null&&(d.video_volume=c.videoVolume),c.addedTracks!=null&&(d.audio_overlay_params=c.addedTracks.map(function(a){return{audio_asset_id:a.sourceId,audio_start_time:a.itemStartTimeInMs/b("DateConsts").MS_PER_SEC,audio_duration:(a.itemEndTimeInMs-a.itemStartTimeInMs)/b("DateConsts").MS_PER_SEC,audio_volume:a.itemVolume,video_start_time:a.startTimeInMs}}).toArray()));Object.keys(d).length!==0&&(e.video_editor_config_json=JSON.stringify(d));return b("Promise").resolve(e)},o=function(a,b){return a>=100&&!b?99.9:b?100:a},p=function(a,c){var d=c.composertags_sponsor[0];if(!d||c.draft||c.is_reviewable_branded_content)return b("Promise").resolve(!1);c=a.getUploadParameters().target_id;a=b("ActorURI").create(b("XBrandedContentComposerInterceptController").getURIBuilder().setString("target_id",c).setString("sponsor_id",d).getURI(),c);return new(b("AsyncRequest"))(a).exec().then(function(a){return a.getPayload()&&a.getPayload().shouldInterceptWhitelist},function(){return!1})},q=function(a){b("VideoComposerActions").cancelUpload(),a.scheduled?b("VideoComposerActions").showBrandedContentErrorDialog():b("VideoComposerActions").showReviewableBrandedContentConfirmation()},r=function(a,c,d){c=b("XVideoComposerInitUploadController").getURIBuilder().setFBID("target_id",c).setEnum("composer_entry_point_ref",d).getURI();d=b("ActorURI").create(c,a);new(b("AsyncRequest"))(d).setHandler(function(a){b("VideoComposerActions").initVideoUploader(new(b("VideoUploader"))(a.payload.videoUploader[0]))}).send()},s=function(c,d){__p&&__p();d===void 0&&(d=null);c=a.URL.createObjectURL(c);c={aspect_ratio:b("VideoComposerDialogConstants").SIXTEEN_NINE,original_height:b("VideoComposerDialogConstants").PLAYER_HEIGHT,original_width:b("VideoComposerDialogConstants").PLAYER_WIDTH,player_version_overwrite:"pleasantville",sd_src:c,stream_type:"progressive",video_id:""};if(d){d=d;var e=d.projectionType,f=d.stereoMode,g=d.initialFOV,h=d.initialYaw,i=d.initialPitch,j=d.mayHaveSpatialAudio,k=d.fbSpatialAudioMetadata;d=d.ytSpatialAudioMetadata;e={projectionType:e?e:"equirectangular",stereoFormat:f?f:"mono",fieldOfView:g?g:60,initialHeading:h?h:0,initialPitch:i?i:0,hasSpatialAudio:j?j:!1,expansionCoef:1.01};k&&(e.fbSpatialAudioMetadata=k);d&&(e.ytSpatialAudioMetadata=d);return new(b("VideoData"))(babelHelpers["extends"]({},c,{is_spherical:!0,spherical_config:e}))}return new(b("VideoData"))(c)},t=function(a,c){__p&&__p();var d=a.premiere_destination_video_id?a.premiere_destination_video_id:a.video_id,e=b("VideoComposerStores").getMetadataStore().getState(),f=e.actorID,g=e.profileDisplayName;e=e.profilePictureURI;b("Arbiter").inform("videoUpload/complete",{videoID:d,containerType:a.video_container,copyrighted:a.copyrighted,videoAssetID:a.video_asset_id,videoTitle:a.video_title,videoDescription:a.xhpc_message||a.xhpc_message_text,videoThumbnailBlob:a.thumb,isScheduledPost:!!a.scheduled,isHiddenFromTimeline:a.no_story,isSecret:a.secret,isDraft:a.draft=="true",isPageToPage:!0,isPremiere:a.should_premiere,isPremiereLivingRoom:!!((d=a.premiere_in_living_room_video_ids)==null?void 0:d.length),originalComposerID:c,pageID:f,premiereTimeMs:a.premiere_time_ms,isEpisode:a.episode_data_json!==null&&a.episode_data_json!==void 0&&JSON.parse(a.episode_data_json).isEpisode,userDisplayName:g,userProfilePictureURI:e});b("Arbiter").inform("videoUpload/"+c+"/done");b("Arbiter").inform("Pages/composeFinished",{composerID:c});d=b("VideoComposerStores").getAdBreakStore().getState();a=d.adBreaksDisabled;g=d.insertedAdBreaks;e=d.isAdBreakAutoInsertionEnabled;c=d.isNPSEligible;c&&!a&&f!=null&&(e||!g.isEmpty())&&!b("SimpleNUXMessage").hasUserSeenMessage(b("SimpleNUXMessageTypes").AD_BREAKS_NPS)&&h(f)},u=function(a){var c=b("HTML").isHTML(a.error_summary)?b("React").createElement(b("ServerHTML.react"),{blob:a.error_summary}):a.error_summary;a=b("HTML").isHTML(a.error_description)?b("React").createElement(b("ServerHTML.react"),{blob:a.error_description}):a.error_description;return b("React").createElement(b("FlexLayout.react"),{direction:"vertical",align:"start"},b("React").createElement("div",null,c),b("React").createElement("div",null,a))},v=function(a,b){b=[].concat(b);var c=b.map(function(b){if(a[b]===void 0)throw new Error("Action missing field: "+b);return a[b]});return b.length===1?c[0]:c},w=function(a){__p&&__p();b("VideoComposerActions").savePostDataForPagesComposer(a);a=b("VideoComposerStores").getMetadataStore().getState();a=a.videoID;if(!a)return;var c=b("VideoComposerStores").getUploadStore().fetchUploadDataForMediaStore();c=v(c,["composerID","videoFile","videoMetadata"]);var d=c[0],e=c[1];c=c[2];var f=b("ReactComposerMediaUploadStore").getUploads(d);b("ReactComposerMediaUploadActions").removeAllPhotoUploads(d,f);e.uploadID=b("PhotosUploadID").getNewID();b("ReactComposerAudienceActions").setStoriesSelected(d,b("VideoComposerStores").getDistributionStore().shouldAddToPagesStory());b("ReactComposerMediaUploadActions").saveVideoInPagesComposer(d,a,e.uploadID,e.name,c,0,b("ReactComposerMediaUploadType").VIDEO,URL.createObjectURL(e));b("VideoComposerActions").minimizeDialog();f=b("VideoComposerStores").getBasicStore().getState();a=f.descriptionEditorState;b("ReactComposerStatusActions").setEditorState(d,a)};e.exports={addUploadSubscriptions:d,beginUpload:f,createVideoData:s,doPost:k,doPostFromPagesComposer:c,getInvalidationReasons:l,getPercentDisplayed:o,getPostDataPromises:j,loadVideoUploader:r,postFinished:t,renderUploadErrorMessage:u,saveVideoInPagesComposer:w}}),null);
__d("VideoComposerDialogUtils",["ComposerEntryPointRef","ComposerXVideoUploadDialogController","VideoComposerActions","VideoComposerDialogShowVideo","VideoComposerInitializationUtils","XVanityURLController","formatDate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){var b=a.length;for(var c=a.length-1;c>=0;c--){var d=a.charCodeAt(c);d>127&&d<=2047?b++:d>2047&&d<=65535&&(b+=2);d>=56320&&d<=57343&&c--}return b};c=function(a){if(a===b("ComposerEntryPointRef").PAGE_CONTENT_TAB_SEASON_DETAILS||a===b("ComposerEntryPointRef").SHOWS_HOME_EPISODES_CARD||a===b("ComposerEntryPointRef").PAGE_COMPOSER_EPISODE_CARD)return b("VideoComposerDialogShowVideo").EPISODE;return a===b("ComposerEntryPointRef").PAGE_TRAILER?b("VideoComposerDialogShowVideo").TRAILER:null};d=function(a){var c=b("formatDate")(a,"m/d/Y",{skipPatternLocalization:!0});a=60*(a.getHours()*60+a.getMinutes());return{dateStr:c,timeSec:a}};f=function(a){return b("XVanityURLController").getURIBuilder().setString("vanity",a).getURI()};var g=function(a){return a&&a.format?a.format.isSpherical:!1},h=function(a){var c=b("VideoComposerInitializationUtils").setupNewComposerInstance();b("VideoComposerActions").initializeCrosspostComposer(c,a);b("VideoComposerActions").mountComposerDialog()},i=function(a){var c=b("VideoComposerInitializationUtils").setupNewComposerInstance();b("VideoComposerActions").initializeEditComposer(c,a);b("VideoComposerActions").mountComposerDialog()},j=function(a){var c=b("ComposerXVideoUploadDialogController").getComposerInstance(a.composerID).getFileInput(),d=a.composerEntryPointRef,e=a.common.actorID;e={pageID:e,fileInput:c,entryPointRef:d,eventCallbacks:{onPublishSuccess:function(a,b){return c&&c.input&&c.clear()},onExitConfirm:function(){return c&&c.input&&c.clear()}}};d=b("VideoComposerInitializationUtils").setupNewComposerInstance();b("VideoComposerActions").initializeComposer(d,e,a);b("VideoComposerActions").mountComposerDialog()};e.exports={byteLength:a,formatDateAndTime:d,getShowVideoTypeFromEntryPoint:c,getVideoPermalinkURL:f,isVideoSpherical:g,openCrosspostDialog:function(a){h(a)},openEditDialog:function(a){i(a)},openUploadDialog:function(a){j(a)},selectTab:function(a){b("VideoComposerActions").selectTab(a)}}}),null);
__d("getAllVideoComposerStoreKeys",["VideoComposerStoreKeys"],(function(a,b,c,d,e,f){"use strict";function a(){return Object.keys(b("VideoComposerStoreKeys"))}e.exports=a}),null);
__d("VideoComposerInitializationUtils",["ActorURI","AsyncRequest","PagesSettingsInstreamAdsBlockListContentStore","PagesSettingsInstreamAdsBlockListDispatcher","PagesSettingsInstreamAdsBlockListStore","SphericalDirectorDispatcher","SphericalDirectorStore","VideoComposerActions","VideoComposerDialogMode","VideoComposerDialogUIEvent","VideoComposerDialogUITypedLogger","VideoComposerDispatchers","VideoComposerStores","XVideoComposerFetchUploadInitializationDataController","getAllVideoComposerStoreKeys"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("VideoComposerDispatchers").DEFAULT_VIDEO_COMPOSER_ID,h=function(){var a=b("VideoComposerDispatchers").get(g),c=b("VideoComposerStores").getAllStores(g);a.explicitlyRegisterStores(b("getAllVideoComposerStoreKeys")().map(function(a){return c[a]}));b("PagesSettingsInstreamAdsBlockListDispatcher").explicitlyRegisterStores([b("PagesSettingsInstreamAdsBlockListContentStore"),b("PagesSettingsInstreamAdsBlockListStore")]);b("SphericalDirectorDispatcher").explicitlyRegisterStores([b("SphericalDirectorStore")]);return g};function a(a){new(b("VideoComposerDialogUITypedLogger"))().setActorID(a.pageID).setComposerEntryPoint(a.entryPointRef).setDialogMode(b("VideoComposerDialogMode").VIDEO_UPLOAD).setEvent(b("VideoComposerDialogUIEvent").DIALOG_REQUESTED).log();var c=b("XVideoComposerFetchUploadInitializationDataController").getURIBuilder().setEnum("entry_point_ref",a.entryPointRef).setFBID("target_id",a.pageID).getURI();c=b("ActorURI").create(c,a.pageID);return new(b("AsyncRequest"))().setURI(c).exec().then(function(c){var d=h();b("VideoComposerActions").initializeComposer(d,a,c.payload);return d})}e.exports={setupNewComposerInstance:h,beginUploadInitialization:a}}),null);
__d("VideoComposerPremiereUtils",["fbt","DateTime","LocalDate","ScheduleLiveVideoDialogConfig","VideoComposerDialogMode","VideoComposerStores"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=60,i=60*60,j=24*60*60,k=1e3;a=g._("Video premieres must be between 30 seconds and four hours long");c=function(a){var c=b("ScheduleLiveVideoDialogConfig").validMinStartTime/h,d=b("ScheduleLiveVideoDialogConfig").validMaxStartTime/i,e=b("ScheduleLiveVideoDialogConfig").validMaxStartTime/j;return a?g._("Premieres must be scheduled between {min start time in minutes} minutes and {max start time in days} days {max start time in hours} hours) from when you create them.",[g._param("min start time in minutes",c),g._param("max start time in days",e),g._param("max start time in hours","("+d)]):g._("Scheduled live videos must be scheduled between {min start time in minutes} minutes and {max start time in days} days {max start time in hours} hours) from when you create them.",[g._param("min start time in minutes",c),g._param("max start time in days",e),g._param("max start time in hours","("+d)])};d=function(){var a=b("VideoComposerStores").getMetadataStore().getState(),c=a.dialogMode;a=a.isSpherical;var d=b("VideoComposerStores").getSphericalDirectorStore().getSpherical();if(c===b("VideoComposerDialogMode").VIDEO_UPLOAD&&(a||d))return g._("360 videos are not supported as premieres.");return b("VideoComposerStores").getTrimmingEditorStore().isVideoTrimmed()?g._("Premieres are disabled for trimmed videos."):null};f=function(a){if(b("ScheduleLiveVideoDialogConfig").startTimeOverride)return!0;var c=b("LocalDate").fromDateTime(b("DateTime").localNow());if(a.isBefore(c))return!1;return a.isAfter(c.addDays(b("ScheduleLiveVideoDialogConfig").validMaxStartTime/j))?!1:!0};var l=function(a){if(a==null)return!1;if(b("ScheduleLiveVideoDialogConfig").startTimeOverride)return!0;a=a.getTime();var c=Date.now()+b("ScheduleLiveVideoDialogConfig").validMinStartTime*k,d=Date.now()+b("ScheduleLiveVideoDialogConfig").validMaxStartTime*k;c=a>c&&a<d;return c},m=function(a){return a==null?!1:a.getTime()-Date.now()>h*k};e.exports={INVALID_DURATION_MESSAGE:a,getPremiereDisabledReason:d,getScheduledLiveInvalidTimeNotice:c,isDateValid:f,isPremiereEditable:m,isPublishTimeValid:l}}),null);
__d("VideoComposerPublishingUtils",["fbt","ExpirationType","VideoComposerActions","VideoComposerBasicActions","VideoComposerDialogConstants","VideoComposerDialogMode","VideoComposerDialogSphericalDirectorUtils","VideoComposerDialogUtils","VideoComposerPostType","VideoComposerPremiereUtils","VideoComposerPublishingTypes","VideoComposerScheduleType","VideoComposerStores","VideoFundedContentFlagProgram"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("VideoComposerPostType").VideoComposerPostTypes,i=b("VideoComposerPublishingTypes").PublishActions,j=b("VideoComposerPublishingTypes").PublishingType,k=b("VideoComposerScheduleType").VideoComposerScheduleTypes,l=g._("Missing Title"),m=g._("To save your video, select a video type"),n=g._("To publish your video, select a video type"),o=g._("To save as draft, select a video type"),p=g._("To submit for review, select a video type"),q=g._("To save your video, give it a title"),r=g._("To publish your video, give it a title"),s=g._("To save as draft, give it a title"),t=g._("To submit for review, give it a title"),u=g._("Premieres must be distributed in news feed"),v=g._("To create a premiere, select \"News Feed\" in the Distribution tab");d=function(a,c,d,e,f,g,h){__p&&__p();var j,k;switch(a){case i.BACKDATE:case i.OPEN_DRAWER:case i.PUBLISH_NOW:case i.PREMIERE:case i.PREVIEW:case i.SCHEDULE:j=n;k=r;break;case i.SAVE_DRAFT:j=o;k=s;break;case i.SAVE_TO_COMPOSER:j=m;k=q;break;case i.AD_BREAK_SUBMIT_FOR_REVIEW:j=p;k=t;break;case i.CANCEL:h();return;default:throw new Error("New footer action type not handled here!")}if(c.trim()===""){b("VideoComposerActions").highlightTitleWithErrorTooltip(l,k);return}if(b("VideoComposerDialogUtils").byteLength(c.trim())>b("VideoComposerDialogConstants").MAX_TITLE_LENGTH){b("VideoComposerActions").highlightTitleTooLong();return}if(d){b("VideoComposerActions").highlightMissingVideoType(j);return}if(a===i.PREMIERE&&!e){b("VideoComposerActions").highlightTitleWithErrorTooltip(u,v);return}c=b("VideoComposerStores").getBasicStore().getMissingFundedContentProgramText(a);if(c!==null&&c!==void 0){g(c);return}if(a===i.PREMIERE&&b("VideoComposerStores").getPremiereStore().premieresVideoDurationIsInvalid(f)){b("VideoComposerActions").highlightPremiereVideoDurationIsInvalid();return}d=b("VideoComposerDialogSphericalDirectorUtils").maybeShowValidationError();if(d)return;h()};var w=1e3*60,x=w*60;f=x*24;var y=182*f+12*x,z=function(){return new Date(Date.now()+8*x)};f=function(a){a=a&&a.getTime()?a.getTime():z().getTime();return new Date(a+x)};var A=f,B=function(a,b){b===void 0&&(b=new Date());b=b&&b.getTime()?b:new Date();a=a.getTime();return a>=b.getTime()+w*10&&a<=b.getTime()+y},C=function(a,b){switch(a){case j.SAVE_AS_DRAFT:return g._("Save as Draft");case j.PUBLISH_FOR_DOGFOODING:return g._("Publish for Dogfooding");case j.DOGFOOD_WITH_SERIES_OR_SEASON:return g._("Dogfooding with series\/season");case j.SCHEDULE:return g._("Schedule");case j.BACKDATE:return g._("Backdate");case j.PUBLISH_WITH_SHOW_OR_SEASON:return b?g._("Publish with Season"):g._("Publish with Series");default:return g._("Publish")}};function a(a){switch(a){case k.SCHEDULE:return g._("Schedule");case k.PUBLISH_NOW:return g._("Publish");case k.BACKDATE:return g._("Backdate");default:return g._("Publish")}}var D=B,E=B,F=g._("Posts need to be expired between 10 minutes from when they are published and 6 months from now."),G=g._("Scheduled posts need to be shared between 10 minutes and 6 months from when you create them."),H=g._("News Feed distribution can only end between 10 minutes from when they are published and 6 months from now."),I=g._("You can only save a draft or schedule a post until your video has been approved for funding."),J=g._("Premiere is a video experience that lets you schedule and debut videos as live events. When your video is published, people will be able to watch and chat about the video together in real time. Afterwards, the video is saved on your Page as a video post. All of the engagement gained during the broadcast is saved to the post."),K=g._("You can only use this option if your selected series or season is in draft mode."),L=function(a){switch(a){case i.AD_BREAK_SUBMIT_FOR_REVIEW:return j.AD_BREAK_SUBMIT_FOR_REVIEW;case i.BACKDATE:return j.BACKDATE;case i.PREMIERE:return j.PREMIERE;case i.PUBLISH_NOW:return j.PUBLISH_NOW;case i.SAVE_DRAFT:return j.SAVE_AS_DRAFT;case i.SCHEDULE:return j.SCHEDULE;default:return null}},M=function(a,c,d,e){__p&&__p();a=b("VideoComposerStores").getBasicStore().getState();c=a.fundedContentProgram;d=a.hasFundedContentReviews;e=b("VideoComposerStores").getMetadataStore().getState();a=e.dialogMode;var f=e.minBackdateTime;e=e.showPremiereNowOption;var g=b("VideoComposerStores").getPremiereStore().getState(),i=g.canCreateMultiVideoPremiereLivingRoom,k=g.canCreateSingleVideoPremiereLivingRoom,l=g.canCreateSingleVideoScheduledPremiereLivingRoom,m=g.feedBackgroundImage,n=g.premiereCSType,o=g.premiereDate,p=g.shouldPremiere,q=g.shouldPremiereWithShowOrSeason,r=g.showPremiereUnderSchedule,s=g.showPremiereAudience;g=g.premiereAudience;var t=b("VideoComposerStores").getPublishingStore().getState(),u=t.backdateDay,v=t.backdateMonth,w=t.backdateYear,x=t.expireDate,y=t.expireType,z=t.hideFromNewsFeed,A=t.isComposerPostScheduleRedesign,B=t.scheduleDate,C=t.showBestPracticesChecklist,D=t.disabledScheduleTypesMap;t=t.videoComposerPremiereInfoBox;var E=b("VideoComposerStores").getPublishingStore().getState();E=E.publishingType;var F=b("VideoComposerStores").getPublishingStore().getState(),G=F.postType;F=F.scheduleType;var H=!!(x&&x.getTime()),I=!!(B&&B.getTime()),J=b("VideoComposerPremiereUtils").getPremiereDisabledReason();(H||I)&&(E=j.SCHEDULE);u={dialogMode:a,backdateDay:u,backdateMonth:v,backdateYear:w,canCreateMultiVideoPremiereLivingRoom:i,canCreateSingleVideoPremiereLivingRoom:k,canCreateSingleVideoScheduledPremiereLivingRoom:l,disabledScheduleTypesMap:D,expireDate:H?x:null,expireType:y!==null&&y!==void 0?y:b("ExpirationType").NONE,isFundedContent:c===b("VideoFundedContentFlagProgram").IS_FUNDED_CONTENT,isUsingLivingRoomPlayer:G===h.VIDEO_UPLOAD_WATCH_PARTY,hasFundedContentReviews:d,publishingType:E,postType:G,minBackdateTime:f!==null&&f!==void 0?f:0,hideFromNewsFeed:z,premiereCSType:n,premiereDate:o,premiereFeedBackgroundImageURL:m!==void 0&&m!==null?URL.createObjectURL(m):null,scheduleDate:I?B:null,scheduleType:F,shouldPremiere:J===null&&p,showPremiereOption:a===b("VideoComposerDialogMode").VIDEO_UPLOAD,showPremiereNowOption:e&&a===b("VideoComposerDialogMode").VIDEO_UPLOAD,showPremiereUnderSchedule:r,showPremiereAudience:s,premiereAudience:g,showBestPracticesChecklist:C,shouldPremiereWithShowOrSeason:q,isComposerPostScheduleRedesign:A,videoComposerPremiereInfoBox:t};J!==null&&(u.premiereDisabledReason=J);return u},N=function(a,b){return a&&a.getTime()&&!E(a,b)?{canPublish:!1,cannotPublishReason:H}:{canPublish:!0,cannotPublishReason:null}},O=function(a,b){if(b&&b.getTime()&&!D(b))return{canPublish:!1,cannotPublishReason:G};return a&&a.getTime()&&!B(a,b)?{canPublish:!1,cannotPublishReason:F}:{canPublish:!0,cannotPublishReason:null}},P=function(a,c){if(b("VideoComposerStores").getPremiereStore().premieresVideoDurationIsInvalid(c))return{canPublish:!1,cannotPublishReason:b("VideoComposerPremiereUtils").INVALID_DURATION_MESSAGE};return!b("VideoComposerPremiereUtils").isPublishTimeValid(a)?{canPublish:!1,cannotPublishReason:b("VideoComposerPremiereUtils").getScheduledLiveInvalidTimeNotice(!0)}:{canPublish:!0,cannotPublishReason:null}},Q=function(a,b,c){return a==null||a===0||b==null||b===0||c==null||c===0?{canPublish:!1,cannotPublishReason:g._("Please select a date to continue with backdate publishing")}:{canPublish:!0,cannotPublishReason:null}},R=function(a,b){__p&&__p();b=!0;var c=null,d=a.publishingType,e=a.expireDate,f=a.postEndDate,g=a.premiereDate,h=a.scheduleDate,i=!!(e&&e.getTime()),k=!!(h&&h.getTime()),l=!!(f&&f.getTime());if(d===j.BACKDATE){var m=Q(a.backdateYear,a.backdateMonth,a.backdateDay);b=m.canPublish;c=m.cannotPublishReason}else if(d===j.PREMIERE||a.shouldPremiere&&d===j.SCHEDULE){m=P(g,a.videoDuration);b=m.canPublish;c=m.cannotPublishReason}else if(i||k){d=O(e,h);b=d.canPublish;c=d.cannotPublishReason}if(l&&b){g=N(f,h);b=g.canPublish;c=g.cannotPublishReason}return{canPublish:b,cannotPublishReason:c}};function c(a,b){b={canPublish:!0,cannotPublishReason:null};var c=a.postType,d=a.scheduleType,e=a.expireDate,f=a.postEndDate,g=a.premiereDate,i=a.scheduleDate,j=e!==null,l=i!==null,m=f!==null;c===h.VIDEO_UPLOAD&&(d===k.BACKDATE?b=Q(a.backdateYear,a.backdateMonth,a.backdateDay):(j||l)&&(b=O(e,i)),m&&b.canPublish&&(b=N(f,i)));(c===h.PREMIERE||a.shouldPremiere&&d===k.SCHEDULE)&&(b=P(g,a.videoDuration));return b}e.exports={fundedContentAllowedActionTypeTooltipText:I,invalidMessageExpireDate:F,invalidMessageScheduleDate:G,invalidMessagePostEndDate:H,isExpireDateValid:B,isPostEndDateValid:E,isScheduleDateValid:D,getDefaultExpireDate:f,getDefaultPostEndDate:A,getDefaultScheduleDate:z,getFooterButtonText:C,getFooterButtonTextRedesign:a,getPublishingTypeForAction:L,getVideoPublishingDataFromStores:M,validatePublishAction:d,validatePublishingData:R,validatePublishingRedesignData:c,videoComposerPremiereOptionTooltipText:J,publishWithSeriesSeasonDisabledTooltipText:K}}),null);