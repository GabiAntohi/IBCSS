if (self.CavalryLogger) { CavalryLogger.start_js(["SXhyn"]); }

__d("MessengerMarkReadMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"MessageThreadUpdateReadStateData!",defaultValue:null}],b=[{kind:"Variable",name:"data",variableName:"input"}],c={kind:"ScalarField",alias:null,name:"unread_count",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"MessengerMarkReadMutation",type:"Mutation",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"message_thread_update_read_state",storageKey:null,args:b,concreteType:"MessageThreadUpdateReadStateResponsePayload",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"thread",storageKey:null,args:null,concreteType:"MessageThread",plural:!1,selections:[c]}]}]},operation:{kind:"Operation",name:"MessengerMarkReadMutation",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"message_thread_update_read_state",storageKey:null,args:b,concreteType:"MessageThreadUpdateReadStateResponsePayload",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"thread",storageKey:null,args:null,concreteType:"MessageThread",plural:!1,selections:[c,{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]}]}]},params:{operationKind:"mutation",name:"MessengerMarkReadMutation",id:"1717353725012289",text:null,metadata:{}}}}();e.exports=a}),null);
__d("MessengerPollStickerVotedMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"input",type:"VoteStoryCardPollData!",defaultValue:null}],b=[{kind:"LinkedField",alias:null,name:"vote_story_card_poll",storageKey:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"VoteStoryCardPollResponsePayload",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"story_card_poll",storageKey:null,args:null,concreteType:"StoryCardPoll",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"can_viewer_vote",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"poll_options",storageKey:null,args:null,concreteType:"StoryCardPollOption",plural:!0,selections:[{kind:"ScalarField",alias:null,name:"index",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"text",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"vote_count",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"viewer_vote_index",args:null,storageKey:null}]}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"MessengerPollStickerVotedMutation",type:"Mutation",metadata:null,argumentDefinitions:a,selections:b},operation:{kind:"Operation",name:"MessengerPollStickerVotedMutation",argumentDefinitions:a,selections:b},params:{operationKind:"mutation",name:"MessengerPollStickerVotedMutation",id:"2153983504634131",text:null,metadata:{}}}}();e.exports=a}),null);
__d("MontageCardGIF_gifAttachment.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"Fragment",name:"MontageCardGIF_gifAttachment",type:"MessageAnimatedImage",metadata:null,argumentDefinitions:[],selections:[{kind:"LinkedField",alias:null,name:"animated_image",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}]}]};e.exports=a}),null);
__d("MontageCardPhoto_photoAttachment.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"Fragment",name:"MontageCardPhoto_photoAttachment",type:"MessageImage",metadata:null,argumentDefinitions:[],selections:[{kind:"LinkedField",alias:null,name:"image",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}]}]};e.exports=a}),null);
__d("MontageCardSticker_sticker.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}];return{kind:"Fragment",name:"MontageCardSticker_sticker",type:"Sticker",metadata:null,argumentDefinitions:[],selections:[{kind:"LinkedField",alias:null,name:"image",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:a},{kind:"LinkedField",alias:null,name:"animated_image",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:a}]}}();e.exports=a}),null);
__d("MontageCardText_userMessage.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"Fragment",name:"MontageCardText_userMessage",type:"UserMessage",metadata:null,argumentDefinitions:[],selections:[{kind:"LinkedField",alias:null,name:"message",storageKey:null,args:null,concreteType:"TextWithEntities",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"text",args:null,storageKey:null}]}]};e.exports=a}),null);
__d("MontageCardVideo_videoAttachment.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"Fragment",name:"MontageCardVideo_videoAttachment",type:"MessageVideo",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"playable_url",args:null,storageKey:null}]};e.exports=a}),null);
__d("MontageCard_message.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={kind:"ScalarField",alias:null,name:"text",args:null,storageKey:null},b={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null};return{kind:"Fragment",name:"MontageCard_message",type:"UserMessage",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"message_id",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"message_source_data",storageKey:null,args:null,concreteType:"MessageSourceData",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"message_source",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"montage_overlays",storageKey:null,args:null,concreteType:null,plural:!0,selections:[{kind:"InlineFragment",type:"StoryOverlayPollSticker",selections:[{kind:"ScalarField",alias:null,name:"style",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"question_text",storageKey:null,args:null,concreteType:"TextWithEntities",plural:!1,selections:[a]},{kind:"LinkedField",alias:null,name:"poll",storageKey:null,args:null,concreteType:"StoryCardPoll",plural:!1,selections:[b,{kind:"ScalarField",alias:null,name:"can_viewer_vote",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewer_vote_index",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"poll_options",storageKey:null,args:null,concreteType:"StoryCardPollOption",plural:!0,selections:[a,{kind:"ScalarField",alias:null,name:"vote_count",args:null,storageKey:null}]}]},{kind:"LinkedField",alias:null,name:"voting_control_bounds",storageKey:null,args:null,concreteType:"StoryOverlayRectangle",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"x",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"y",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"width",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"rotation",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"height",args:null,storageKey:null}]}]}]},{kind:"LinkedField",alias:null,name:"message_sender",storageKey:null,args:null,concreteType:"MessagingParticipant",plural:!1,selections:[b,{kind:"LinkedField",alias:null,name:"messaging_actor",storageKey:null,args:null,concreteType:null,plural:!1,selections:[{kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"profile_picture",storageKey:"profile_picture(height:50,width:50)",args:[{kind:"Literal",name:"height",value:50},{kind:"Literal",name:"width",value:50}],concreteType:"Image",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}]}]}]},{kind:"LinkedField",alias:null,name:"montage_attribution",storageKey:null,args:null,concreteType:"TextWithEntities",plural:!1,selections:[a,{kind:"LinkedField",alias:null,name:"ranges",storageKey:null,args:null,concreteType:"EntityAtRange",plural:!0,selections:[{kind:"ScalarField",alias:null,name:"offset",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"length",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"entity",storageKey:null,args:null,concreteType:null,plural:!1,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null}]}]}]},{kind:"ScalarField",alias:null,name:"timestamp",args:null,storageKey:null}]}}();e.exports=a}),null);
__d("MontageSpotlightViewer_message.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"Fragment",name:"MontageSpotlightViewer_message",type:"UserMessage",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"message_id",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"message_sender",storageKey:null,args:null,concreteType:"MessagingParticipant",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"message_source_data",storageKey:null,args:null,concreteType:"MessageSourceData",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"message_source",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"blob_attachments",storageKey:null,args:null,concreteType:null,plural:!0,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"FragmentSpread",name:"MontageCardPhoto_photoAttachment",args:null},{kind:"FragmentSpread",name:"MontageCardVideo_videoAttachment",args:null},{kind:"FragmentSpread",name:"MontageCardGIF_gifAttachment",args:null}]},{kind:"LinkedField",alias:null,name:"sticker",storageKey:null,args:null,concreteType:"Sticker",plural:!1,selections:[{kind:"FragmentSpread",name:"MontageCardSticker_sticker",args:null}]},{kind:"FragmentSpread",name:"MontageCard_message",args:null},{kind:"FragmentSpread",name:"MontageCardText_userMessage",args:null}]};e.exports=a}),null);
__d("MontageSpotlightViewer_messages.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"Fragment",name:"MontageSpotlightViewer_messages",type:"MessagesOfThreadConnection",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"count",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"MessagesOfThreadEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:!1,selections:[{kind:"InlineFragment",type:"UserMessage",selections:[{kind:"ScalarField",alias:null,name:"message_id",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"message_sender",storageKey:null,args:null,concreteType:"MessagingParticipant",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"message_source_data",storageKey:null,args:null,concreteType:"MessageSourceData",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"message_source",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"blob_attachments",storageKey:null,args:null,concreteType:null,plural:!0,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"FragmentSpread",name:"MontageCardPhoto_photoAttachment",args:null},{kind:"FragmentSpread",name:"MontageCardVideo_videoAttachment",args:null},{kind:"FragmentSpread",name:"MontageCardGIF_gifAttachment",args:null}]},{kind:"LinkedField",alias:null,name:"sticker",storageKey:null,args:null,concreteType:"Sticker",plural:!1,selections:[{kind:"FragmentSpread",name:"MontageCardSticker_sticker",args:null}]},{kind:"FragmentSpread",name:"MontageCard_message",args:null},{kind:"FragmentSpread",name:"MontageCardText_userMessage",args:null}]}]}]}]};e.exports=a}),null);
__d("MontageThreadViewContainerImplQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"threadFBID",type:"ID!",defaultValue:null}],b=[{kind:"Variable",name:"id",variableName:"threadFBID"}],c={kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},d={kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},e=[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}],f={kind:"ScalarField",alias:null,name:"text",args:null,storageKey:null},g=[f],h={kind:"ScalarField",alias:null,name:"timestamp",args:null,storageKey:null},i={kind:"LinkedField",alias:null,name:"message",storageKey:null,args:null,concreteType:"TextWithEntities",plural:!1,selections:g},j={kind:"LinkedField",alias:null,name:"image",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:e},k={kind:"LinkedField",alias:null,name:"animated_image",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:e},l=[{kind:"Literal",name:"height",value:28},{kind:"Literal",name:"width",value:21}];return{kind:"Request",fragment:{kind:"Fragment",name:"MontageThreadViewContainerImplQuery",type:"Query",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:"threadMessages",name:"message_thread",storageKey:null,args:b,concreteType:"MessageThread",plural:!1,selections:[{kind:"FragmentSpread",name:"MontageThreadView_threadMessages",args:null}]}]},operation:{kind:"Operation",name:"MontageThreadViewContainerImplQuery",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:"threadMessages",name:"message_thread",storageKey:null,args:b,concreteType:"MessageThread",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"customization_info",storageKey:null,args:null,concreteType:"MessageThreadCustomization",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"outgoing_bubble_color",args:null,storageKey:null},c]},{kind:"LinkedField",alias:null,name:"montage_thread",storageKey:null,args:null,concreteType:"MessageThread",plural:!1,selections:[c,{kind:"LinkedField",alias:null,name:"thread_key",storageKey:null,args:null,concreteType:"MessageThreadKey",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"thread_fbid",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"messages",storageKey:"messages(last:100)",args:[{kind:"Literal",name:"last",value:100}],concreteType:"MessagesOfThreadConnection",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"count",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"MessagesOfThreadEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:!1,selections:[d,c,{kind:"InlineFragment",type:"UserMessage",selections:[{kind:"ScalarField",alias:null,name:"message_id",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"message_sender",storageKey:null,args:null,concreteType:"MessagingParticipant",plural:!1,selections:[c,{kind:"LinkedField",alias:null,name:"messaging_actor",storageKey:null,args:null,concreteType:null,plural:!1,selections:[d,{kind:"ScalarField",alias:null,name:"name",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"profile_picture",storageKey:"profile_picture(height:50,width:50)",args:[{kind:"Literal",name:"height",value:50},{kind:"Literal",name:"width",value:50}],concreteType:"Image",plural:!1,selections:e},c]}]},{kind:"LinkedField",alias:null,name:"message_source_data",storageKey:null,args:null,concreteType:"MessageSourceData",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"message_source",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"montage_overlays",storageKey:null,args:null,concreteType:null,plural:!0,selections:[d,{kind:"InlineFragment",type:"StoryOverlayPollSticker",selections:[{kind:"ScalarField",alias:null,name:"style",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"question_text",storageKey:null,args:null,concreteType:"TextWithEntities",plural:!1,selections:g},{kind:"LinkedField",alias:null,name:"poll",storageKey:null,args:null,concreteType:"StoryCardPoll",plural:!1,selections:[c,{kind:"ScalarField",alias:null,name:"can_viewer_vote",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"viewer_vote_index",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"poll_options",storageKey:null,args:null,concreteType:"StoryCardPollOption",plural:!0,selections:[f,{kind:"ScalarField",alias:null,name:"vote_count",args:null,storageKey:null}]}]},{kind:"LinkedField",alias:null,name:"voting_control_bounds",storageKey:null,args:null,concreteType:"StoryOverlayRectangle",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"x",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"y",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"width",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"rotation",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"height",args:null,storageKey:null}]}]}]},{kind:"LinkedField",alias:null,name:"montage_attribution",storageKey:null,args:null,concreteType:"TextWithEntities",plural:!1,selections:[f,{kind:"LinkedField",alias:null,name:"ranges",storageKey:null,args:null,concreteType:"EntityAtRange",plural:!0,selections:[{kind:"ScalarField",alias:null,name:"offset",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"length",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"entity",storageKey:null,args:null,concreteType:null,plural:!1,selections:[d,{kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null},c]}]}]},h,i,{kind:"LinkedField",alias:null,name:"blob_attachments",storageKey:null,args:null,concreteType:null,plural:!0,selections:[d,c,{kind:"InlineFragment",type:"MessageImage",selections:[j]},{kind:"InlineFragment",type:"MessageVideo",selections:[{kind:"ScalarField",alias:null,name:"playable_url",args:null,storageKey:null}]},{kind:"InlineFragment",type:"MessageAnimatedImage",selections:[k]}]},{kind:"LinkedField",alias:null,name:"sticker",storageKey:null,args:null,concreteType:"Sticker",plural:!1,selections:[j,k,c]}]}]}]}]},{kind:"LinkedField",alias:"montageMessages",name:"messages",storageKey:"messages(last:1)",args:[{kind:"Literal",name:"last",value:1}],concreteType:"MessagesOfThreadConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"MessagesOfThreadEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:!1,selections:[d,h,c,{kind:"InlineFragment",type:"UserMessage",selections:[i,{kind:"LinkedField",alias:null,name:"sticker",storageKey:null,args:null,concreteType:"Sticker",plural:!1,selections:[{kind:"LinkedField",alias:"stickerImage",name:"image",storageKey:"image(height:28,width:21)",args:l,concreteType:"Image",plural:!1,selections:e},c]},{kind:"LinkedField",alias:null,name:"blob_attachments",storageKey:null,args:null,concreteType:null,plural:!0,selections:[d,{kind:"LinkedField",alias:"mediaImage",name:"image",storageKey:"image(height:28,width:21)",args:l,concreteType:"Image",plural:!1,selections:e},c,{kind:"InlineFragment",type:"MessageVideo",selections:[{kind:"LinkedField",alias:"videoImage",name:"image",storageKey:"image(height:28,width:21)",args:l,concreteType:"Image",plural:!1,selections:e}]},{kind:"InlineFragment",type:"MessageImage",selections:[{kind:"LinkedField",alias:"messageImage",name:"image",storageKey:"image(height:28,width:21)",args:l,concreteType:"Image",plural:!1,selections:e}]}]}]}]}]}]},{kind:"ScalarField",alias:null,name:"unread_count",args:null,storageKey:null}]},c]}]},params:{operationKind:"query",name:"MontageThreadViewContainerImplQuery",id:"1889525527801958",text:null,metadata:{}}}}();e.exports=a}),null);
__d("MontageThreadViewV2Query.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"id",type:"ID!",defaultValue:null}],b=[{kind:"Variable",name:"id",variableName:"id"}];return{kind:"Request",fragment:{kind:"Fragment",name:"MontageThreadViewV2Query",type:"Query",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"montage_thread",storageKey:null,args:b,concreteType:"MontageThread",plural:!1,selections:[{kind:"FragmentSpread",name:"MontageViewerSingleThreadWeb_montageThread",args:null}]}]},operation:{kind:"Operation",name:"MontageThreadViewV2Query",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:null,name:"montage_thread",storageKey:null,args:b,concreteType:"MontageThread",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"montage_container_id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]}]},params:{operationKind:"query",name:"MontageThreadViewV2Query",id:"2785159824859276",text:null,metadata:{}}}}();e.exports=a}),null);
__d("MontageThreadView_threadMessages.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"Fragment",name:"MontageThreadView_threadMessages",type:"MessageThread",metadata:null,argumentDefinitions:[{kind:"LocalArgument",name:"imageHeight",type:"Int",defaultValue:28},{kind:"LocalArgument",name:"imageWidth",type:"Int",defaultValue:21}],selections:[{kind:"LinkedField",alias:null,name:"customization_info",storageKey:null,args:null,concreteType:"MessageThreadCustomization",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"outgoing_bubble_color",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"montage_thread",storageKey:null,args:null,concreteType:"MessageThread",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"thread_key",storageKey:null,args:null,concreteType:"MessageThreadKey",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"thread_fbid",args:null,storageKey:null}]},{kind:"LinkedField",alias:"montageMessages",name:"messages",storageKey:"messages(last:1)",args:[{kind:"Literal",name:"last",value:1}],concreteType:"MessagesOfThreadConnection",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"edges",storageKey:null,args:null,concreteType:"MessagesOfThreadEdge",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"node",storageKey:null,args:null,concreteType:null,plural:!1,selections:[{kind:"ScalarField",alias:null,name:"timestamp",args:null,storageKey:null},{kind:"FragmentSpread",name:"MontageThumbnail_message",args:[{kind:"Variable",name:"imageHeight",variableName:"imageHeight"},{kind:"Variable",name:"imageWidth",variableName:"imageWidth"}]}]}]}]},{kind:"ScalarField",alias:null,name:"unread_count",args:null,storageKey:null},{kind:"FragmentSpread",name:"MontageViewerSingleThread_montageThread",args:null}]}]};e.exports=a}),null);
__d("MontageThumbnail_message.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"Variable",name:"height",variableName:"imageHeight"},{kind:"Variable",name:"width",variableName:"imageWidth"}],b=[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}];return{kind:"Fragment",name:"MontageThumbnail_message",type:"UserMessage",metadata:null,argumentDefinitions:[{kind:"LocalArgument",name:"imageHeight",type:"Int",defaultValue:28},{kind:"LocalArgument",name:"imageWidth",type:"Int",defaultValue:21}],selections:[{kind:"LinkedField",alias:null,name:"message",storageKey:null,args:null,concreteType:"TextWithEntities",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"text",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"sticker",storageKey:null,args:null,concreteType:"Sticker",plural:!1,selections:[{kind:"LinkedField",alias:"stickerImage",name:"image",storageKey:null,args:a,concreteType:"Image",plural:!1,selections:b}]},{kind:"LinkedField",alias:null,name:"blob_attachments",storageKey:null,args:null,concreteType:null,plural:!0,selections:[{kind:"LinkedField",alias:"mediaImage",name:"image",storageKey:null,args:a,concreteType:"Image",plural:!1,selections:b},{kind:"InlineFragment",type:"MessageVideo",selections:[{kind:"LinkedField",alias:"videoImage",name:"image",storageKey:null,args:a,concreteType:"Image",plural:!1,selections:b}]},{kind:"InlineFragment",type:"MessageImage",selections:[{kind:"LinkedField",alias:"messageImage",name:"image",storageKey:null,args:a,concreteType:"Image",plural:!1,selections:b}]}]}]}}();e.exports=a}),null);
__d("MontageViewerSingleThreadWeb_montageThread.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"Fragment",name:"MontageViewerSingleThreadWeb_montageThread",type:"MontageThread",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"montage_container_id",args:null,storageKey:null}]};e.exports=a}),null);
__d("MontageViewerSingleThread_montageThread.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"Fragment",name:"MontageViewerSingleThread_montageThread",type:"MessageThread",metadata:null,argumentDefinitions:[{kind:"LocalArgument",name:"count",type:"Int",defaultValue:100}],selections:[{kind:"LinkedField",alias:null,name:"messages",storageKey:null,args:[{kind:"Variable",name:"last",variableName:"count"}],concreteType:"MessagesOfThreadConnection",plural:!1,selections:[{kind:"FragmentSpread",name:"MontageSpotlightViewer_messages",args:null}]}]};e.exports=a}),null);
__d("MessengerMontageClientTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerMontageClientLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerMontageClientLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerMontageClientLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setContentType=function(a){this.$1.content_type=a;return this};c.setCurrentPosition=function(a){this.$1.current_position=a;return this};c.setEntryPoint=function(a){this.$1.entry_point=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setExitAction=function(a){this.$1.exit_action=a;return this};c.setMessageDuration=function(a){this.$1.message_duration=a;return this};c.setMessageSource=function(a){this.$1.message_source=a;return this};c.setMessageStartTime=function(a){this.$1.message_start_time=a;return this};c.setMid=function(a){this.$1.mid=a;return this};c.setOwnerID=function(a){this.$1.owner_id=a;return this};c.setQueueType=function(a){this.$1.queue_type=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setTotalQueue=function(a){this.$1.total_queue=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={content_type:!0,current_position:!0,entry_point:!0,event:!0,exit_action:!0,message_duration:!0,message_source:!0,message_start_time:!0,mid:!0,owner_id:!0,queue_type:!0,time:!0,total_queue:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("MessengerMarkReadMutation",["RelayModern","MessengerMarkReadMutation.graphql"],(function(a,b,c,d,e,f){"use strict";var g=b("RelayModern").commitMutation;b("RelayModern").graphql;var h=function(){return b("MessengerMarkReadMutation.graphql")},i={thread:{unread_count:0}};function a(a,b){return g(a,{mutation:h,optimisticResponse:i,variables:{input:{thread_id:b.thread_id,update_type:b.update_type}}})}e.exports={commit:a}}),null);
__d("MessengerPollStickerVotedMutation",["RelayModern","MessengerPollStickerVotedMutation.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("RelayModern").commitMutation;b("RelayModern").graphql;var h=function(){return b("MessengerPollStickerVotedMutation.graphql")};function a(a,b,c,d){return g(a,{mutation:h,variables:c,onCompleted:d&&d.onSuccess,onError:d&&d.onError,optimisticResponse:function(){return i(b,c)}})}function i(a,b){a=a.montage_overlays.find(function(a){return a.poll==null||a.poll.id==null?!1:a.poll.id===b.input.story_card_poll_id});if(a==null||a.poll==null||a.poll.poll_options==null)return null;a=a.poll.poll_options.map(function(a,c){if(c===b.input.option)return babelHelpers["extends"]({},a,{vote_count:a.vote_count+1});else return a});return{vote_story_card_poll:{story_card_poll:{id:b.input.story_card_poll_id,can_viewer_vote:!1,poll_options:a,viewer_vote_index:b.input.option}}}}e.exports=a}),null);
__d("MessengerMobileWindow.react",["cx","MessengerPhotoViewCloseLinkReact.re","React","SpotlightViewer"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerPhotoViewCloseLinkReact.re").make;a=b("React").PropTypes;c=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props,c=a.background,d=a.fontSize,e=a.onHide,f=a.open,g=a.children,i=a.onClose,j=a.sidebar,k=a.topbar;a=babelHelpers.objectWithoutPropertiesLoose(a,["background","fontSize","onHide","open","children","onClose","sidebar","topbar"]);return b("React").createElement(b("SpotlightViewer"),{onHide:e,open:f,rootClassName:"_7yx"+(c==="light"?" _1lwq":"")},b("React").createElement("div",{className:"_3xsg"},b("React").createElement("div",babelHelpers["extends"]({className:"_7yy"},a),b("React").createElement("div",{className:"_7yz"}),b("React").createElement("div",{className:(this.props.orientation==="landscape"?"_pxe":"")+(this.props.orientation==="landscape"&&j?" _466h":"")+(this.props.orientation==="portrait"?" _pxf":"")+(this.props.orientation==="portrait"&&j?" _466r":"")+" _7y-"+(d==="auto"?" _5q__":"")},b("React").createElement("div",{className:"_5uag"},g)),k!==void 0?k:b("React").createElement(h,{onClick:i,customTooltip:null})),j))};return c}(b("React").Component);c.defaultProps={background:"light",fontSize:"auto",orientation:"portrait"};c.propTypes={background:a.string.isRequired,fontSize:a.string.isRequired,onClose:a.func.isRequired,onHide:a.func.isRequired,open:a.bool.isRequired};e.exports=c}),null);
__d("MessengerLogo.react",["React"],(function(a,b,c,d,e,f){"use strict";a=function(a){var c=a.color;a=a.size;return b("React").createElement("div",{style:{width:a,height:a}},b("React").createElement("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},b("React").createElement("g",{transform:"scale(0.02)",fill:"none"},b("React").createElement("path",{fill:c,fillRule:"evenodd",d:"M399.494079,0.00274415094 C178.859771,0.00274415094 0.000304955527,167.227237 0.000304955527,373.508113 C0.000304955527,490.856138 57.8859466,595.562774 148.414028,664.036455 L148.414028,806.983343 L284.747446,731.373854 C321.092046,741.545506 359.609962,747.013481 399.494079,747.013481 C620.128386,747.013481 798.987853,579.788988 798.987853,373.508113 C798.987853,167.227237 620.128386,0.00274415094 399.494079,0.00274415094 M441.568386,500.879189L338.245388 393.558495 139.264956 503.581669 357.419975 272.117619 460.742973 379.437297 659.722389 269.414122z"}))))};e.exports=a}),null);
__d("MessengerStoriesLoggingConstants",[],(function(a,b,c,d,e,f){"use strict";a={ACTION_SOURCE:{FACEBOOK_CHAT_TAB:"facebook_chat_tab",MESSENGER_DOT_COM:"messenger_dot_com"}};e.exports=a}),null);
__d("MontageProgressBar.react",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){var c=a.activeIndex,d=a.count;a=a.progressPercent;var e=[];for(var f=0;f<d;f++)e.push(b("React").createElement("div",{key:f,className:"_4wd4"+(f===c?" _4wd6":"")},f===c?b("React").createElement("div",{className:"_4wd4 _4wd7",style:{width:a+"%"}}):null));return b("React").createElement("div",{className:"_4wd8"},e)};e.exports=a}),null);
__d("MontageMessageReactionsWebGraphQLMutation",["WebGraphQLMutationBase"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}b.__getDocID=function(){return"1428286587248085"};b.getQueryID=function(){return"138011586785590"};return b}(b("WebGraphQLMutationBase"))}),null);
__d("MontageReplyAction",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({DOODLE:"DOODLE",MESSAGE_REACTION:"MESSAGE_REACTION",REPLY_TO_STORY_SHARE:"REPLY_TO_STORY_SHARE",PRODUCER_INITIATED:"PRODUCER_INITIATED",STORY_SHARE:"STORY_SHARE"})}),null);
__d("MontageReplyComposer.react",["React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.render=function(){return null};return b}(b("React").Component);e.exports=a}),null);
__d("MontageReplyLWRUtil",["EmojiFormat.bs"],(function(a,b,c,d,e,f){"use strict";a=[[128525],[128518],[128558],[128546],[128544]];e.exports={defaultReactions:a.map(b("EmojiFormat.bs").codeArrayToUnicode)}}),null);
__d("MontageReplyLWR.react",["cx","Bootloader","DOM","DOMContainer.react","MessengerTextWithEmoticons.react","MontageReplyLWRUtil","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={animations:{}},c.$3=function(a){c.$1[a.currentTarget.tabIndex].offsets.push(Date.now()-c.props.startedTime)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.UNSAFE_componentWillMount=function(){this.$2()};d.componentDidMount=function(){this.loadAnimation()};d.render=function(){var a=this;return b("React").createElement("div",{className:"_60yi"},b("MontageReplyLWRUtil").defaultReactions.map(function(c,d){return b("React").createElement("span",{className:"_3bih",key:c,onClick:a.$3,onMouseUp:a.$4,onMouseDown:a.$4,role:"button",tabIndex:d},a.state.animations[c]?b("React").createElement(b("DOMContainer.react"),null,a.state.animations[c]):b("React").createElement(b("MessengerTextWithEmoticons.react"),{customSize:!0,renderEmoticons:!0,renderEmoji:!0,text:c}))}))};d.componentWillUnmount=function(){var a=this.$5();a&&this.props.sendReply(a,this.$1)};d.$2=function(){var a=this;this.$1=[];b("MontageReplyLWRUtil").defaultReactions.forEach(function(b){a.$1.push({reaction:b,offsets:[]})})};d.loadAnimation=function(){var a=this;b("Bootloader").loadModules(["bodymovin","MessengerReactionEmojiLove","MessengerReactionEmojiHaha","MessengerReactionEmojiWow","MessengerReactionEmojiSad","MessengerReactionEmojiAngry"],function(c){var d=b("MontageReplyLWRUtil").defaultReactions,e={};for(var f=0;f<d.length;f++){var g=d[f];e[g]=a.$6(c,f+1<1||arguments.length<=f+1?void 0:arguments[f+1])}a.setState({animations:e})},"MontageReplyLWR.react")};d.$6=function(a,c){var d=b("DOM").create("span");a.loadAnimation({wrapper:d,animationData:c,renderer:"svg",loop:!0,autoplay:!0});return d};d.$4=function(a){a.stopPropagation()};d.$5=function(){var a="";for(var b=this.$1.length-1;b>=0;b--)this.$1[b].offsets.length>0?a+=this.$1[b].reaction+" ":this.$1.splice(b,1);return a};return c}(b("React").Component);e.exports=a}),null);
__d("MontageReplyContainer.react",["cx","CurrentUser","MercuryMessageActions","MercuryMessageObject","MercuryTriodeSourceUtil","MontageMessageReactionsWebGraphQLMutation","MontageReplyAction","MontageReplyComposer.react","MontageReplyLWR.react","React","XAsyncRequest"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.$4=function(a,c){a=d.$2.constructUserGeneratedMessageObject(a,b("MercuryTriodeSourceUtil").getMercuryTriodeSource(),d.props.threadID);a.montage_reply_data={message_id:d.props.montageMessageID,reply_action:b("MontageReplyAction").MESSAGE_REACTION};d.$1.send(a);if(c){a=b("MontageMessageReactionsWebGraphQLMutation").getURI({actor_id:d.$3,message_id:d.props.montageMessageID,actions:c});new(b("XAsyncRequest"))(a).setMethod("POST").send()}};d.$3=b("CurrentUser").getID();d.$1=b("MercuryMessageActions").getForFBID(d.$3);d.$2=b("MercuryMessageObject").getForFBID(d.$3);return d}var d=c.prototype;d.render=function(){return b("React").createElement("div",{className:"_2x5j"},b("React").createElement(b("MontageReplyComposer.react"),null),b("React").createElement(b("MontageReplyLWR.react"),{sendReply:this.$4,startedTime:this.props.startedTime}))};return c}(b("React").Component);e.exports=a}),null);
__d("MontageCard.react",["cx","fbt","AsyncRequest","CameraPostAppAttribution.react","CssBackgroundImage.react","CurrentUser","FBStoriesPollSticker.react","FBStoriesPollStickerConstants","FRXEntryPoint","FRXURI","Link.react","MercuryConfig","MercuryIDs","MessengerMenu.react","MessengerPollStickerVotedMutation","MessengerPopoverMenu.react","MontageProgressBar.react","MontageReplyContainer.react","NFXStoryLocation","React","RelayModern","Timestamp.react","gkx","MontageCard_message.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;var i=b("MessengerMenu.react").Item;c=b("React").PropTypes;var j={height:10,width:45,top:-2.7,left:-5.5},k=function(a){return a.stopPropagation()};d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={progressPercent:0,startedTime:Date.now()},d.$2=function(a,c){if(!d.props.message||!d.props.message.message_sender)return;var e=d.props.message;b("MessengerPollStickerVotedMutation")(d.props.relay.environment,e,{input:{story_card_poll_id:a,option:c}})},d.$9=function(){var a;a=(a=d.props)!=null?(a=a.message)!=null?a.message_id:a:a;if(a){a=b("FRXURI").withEntReportable({reportable_ent_token:a,story_location:b("NFXStoryLocation").DIRECT_MESSAGING,entry_point:b("FRXEntryPoint").REPORT_BUTTON});a=new(b("AsyncRequest"))().setURI(a);a.send()}},d.$4=function(a){a!==d.state.progressPercent&&d.setState({progressPercent:a})},d.$5=function(a){d.setState({startedTime:a})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$1=function(){var a=window.innerHeight,b=a*.48327+10;a=a*.888888;return{height:a,width:b}};d.$3=function(){__p&&__p();var a=this;if(!this.props.message||!this.props.message.montage_overlays||!b("gkx")("678585"))return null;var c=this.props.message.montage_overlays,d=this.$1();return c.map(function(c){if(!c.poll||!c.poll.poll_options)return null;var e=c.poll.poll_options.map(function(a){return a.vote_count==null||a.text==null?{voteCount:0,text:""}:{voteCount:a.vote_count,text:a.text}});return c.poll==null||c.poll.id==null||c.poll.can_viewer_vote==null||c.poll.viewer_vote_index==null||c.voting_control_bounds==null||c.style==null||e==null?null:b("React").createElement(l,{key:"poll_"+c.poll.id,containerHeight:d.height,containerWidth:d.width,width:b("FBStoriesPollStickerConstants").DIMENSIONS.WIDTH,height:b("FBStoriesPollStickerConstants").DIMENSIONS.HEIGHT,bounds:c.voting_control_bounds},b("React").createElement(b("FBStoriesPollSticker.react"),{canViewerVote:c.poll.can_viewer_vote,viewerVoteIndex:c.poll.viewer_vote_index,isConsumer:!0,pollId:c.poll.id,pollOptions:e,pollStyle:c.style,onOptionVoted:a.$2}))})};d.render=function(){var a=this,c=this.props,d=c.active,e=c.activeIndex,f=c.count;c=c.message;if(!c)return null;c=(c=c.message_sender)==null?void 0:c.messaging_actor;var g=b("React").Children.map(this.props.children,function(c){return b("React").cloneElement(c,{onProgress:a.$4,onStarted:a.$5})});return b("React").createElement("div",{className:"_5uag _q38",style:{zIndex:d?1:void 0}},b("React").createElement("div",{className:"_3avs"},g),b("React").createElement("div",{className:"_5uag _1pwf"},this.$3(),b("React").createElement(b("MontageProgressBar.react"),{activeIndex:e,count:f,progressPercent:this.state.progressPercent}),b("React").createElement("div",{className:"_1pwg"},b("React").createElement(b("CssBackgroundImage.react"),{className:"_3cx4",imageURI:c==null?void 0:(d=c.profile_picture)==null?void 0:d.uri}),b("React").createElement("div",{className:"_1pwn"},b("React").createElement("span",null,c==null?void 0:c.name),this.$6()),this.$7(),b("React").createElement(b("MessengerPopoverMenu.react"),{className:"_47gp",menu:this.$8()},b("React").createElement(b("Link.react"),{"aria-haspopup":"true","aria-label":h._("Message Options"),className:"_47gq",onMouseUp:k,onMouseDown:k,role:"button"})))))};d.$8=function(){var a=b("React").createElement(b("MessengerMenu.react"),null,b("React").createElement(i,{label:h._("Report"),onclick:this.$9}));return a};d.$7=function(){var a,c;a=((a=this.props.message)==null?void 0:a.message_id)||"";var d=b("CurrentUser").getID();c=(c=this.props.message)!=null?(c=c.message_sender)!=null?c.id:c:c;c=c?c:null;if(b("MercuryConfig").WWWMessengerMontageLWR&&c&&c!==d)return b("React").createElement(b("MontageReplyContainer.react"),{montageMessageID:a,threadFBID:c,threadID:b("MercuryIDs").getThreadIDFromUserID(c),startedTime:this.state.startedTime});else return null};d.$6=function(){var a,c=this.props.message;if(!c)return null;var d=b("React").createElement(b("Timestamp.react"),{className:"_13-0",minimize:!0,time:c.timestamp});a=(a=c)!=null?(a=a.message_sender)!=null?a.id:a:a;c=c==null?void 0:c.montage_attribution;return a&&c?b("React").createElement("div",{className:"_13-0"},d,"\xa0\u2022\xa0",b("React").createElement(b("CameraPostAppAttribution.react"),{currentThreadID:a,postStoryAttribution:c,stopPropagationOnClick:!0})):d};return c}(b("React").Component);d.propTypes={active:c.bool.isRequired,activeIndex:c.number.isRequired,count:c.number.isRequired,message:c.object,children:c.object};var l=function(a){__p&&__p();var c=a.bounds,d=c.height,e=c.width,f=c.x,g=c.y;c=c.rotation;d=a.containerHeight*d+j.height;e=a.containerWidth*e+j.width;d=d/a.height;e=e/a.width;g=g*100+j.top;f=f*100+j.left;g={width:a.width+"px",height:a.height+"px",top:g+"%",left:f+"%",transform:"scaleY("+d+") scaleX("+e+")"};f={transform:"rotate("+c+"deg)"};return b("React").createElement("div",{className:"_4xuv",style:g},b("React").createElement("div",{className:"_4xux",onMouseDown:function(a){a.stopPropagation()},style:f},a.children))};e.exports=a(d,{message:function(){return b("MontageCard_message.graphql")}})}),null);
__d("montageCardWithStandardTimer",["React","cancelAnimationFrame","requestAnimationFrame"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").PropTypes,h=5e3;function a(a){__p&&__p();var c,d;return d=c=function(c){__p&&__p();babelHelpers.inheritsLoose(d,c);function d(){__p&&__p();var a,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(a=d=c.call.apply(c,[this].concat(f))||this,d.state={startedTime:0,pausedTime:0},d.$1=null,d.$3=function(){if(!d.props.paused){var a=(Date.now()-d.state.startedTime)/h*100;d.props.onProgress(a);if(a>=100){d.props.onEnded();return}}d.$1=b("requestAnimationFrame")(d.$3)},a)||babelHelpers.assertThisInitialized(d)}var e=d.prototype;e.componentDidMount=function(){this.$2()};e.componentDidUpdate=function(){this.$2()};e.$2=function(){!this.props.active&&(this.$1||this.state.pausedTime)?this.$4():!this.props.paused&&!this.$1?this.$5():this.$1&&this.props.paused&&this.$6()};e.$6=function(){this.setState({pausedTime:Date.now()}),b("cancelAnimationFrame")(this.$1),this.$1=null};e.$5=function(){var a={startedTime:Date.now()};if(this.state.pausedTime){var c=a.startedTime-this.state.pausedTime;c=this.state.startedTime+c;a={pausedTime:0,startedTime:c}}this.setState(a);this.props.onStarted(a.startedTime);this.$1=b("requestAnimationFrame")(this.$3)};e.$4=function(){this.setState({pausedTime:0,startedTime:0}),b("cancelAnimationFrame")(this.$1),this.$1=null};e.componentWillUnmount=function(){b("cancelAnimationFrame")(this.$1)};e.render=function(){var c=this.props;c.paused;c.onEnded;c.onProgress;c.onStarted;c=babelHelpers.objectWithoutPropertiesLoose(c,["paused","onEnded","onProgress","onStarted"]);return b("React").createElement(a,c)};return d}(b("React").Component),c.propTypes={active:g.bool.isRequired,paused:g.bool.isRequired,onEnded:g.func.isRequired,onProgress:g.func.isRequired,onStarted:g.func.isRequired},d}e.exports=a}),null);
__d("MontageCardGIF.react",["cx","Image.react","React","RelayModern","montageCardWithStandardTimer","MontageCardGIF_gifAttachment.graphql"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;c=b("React").PropTypes;d=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a;return b("React").createElement("div",{className:"_5uag _3p9v"},b("React").createElement(b("Image.react"),{className:"_6yug",src:(a=this.props.gifAttachment.animated_image)==null?void 0:a.uri}))};return c}(b("React").Component);d.propTypes={gifAttachment:c.shape({animated_image:c.shape({uri:c.string.isRequired})}).isRequired};e.exports=a(b("montageCardWithStandardTimer")(d),{gifAttachment:function(){return b("MontageCardGIF_gifAttachment.graphql")}})}),null);
__d("MontageCardPhoto.react",["cx","Image.react","React","RelayModern","montageCardWithStandardTimer","MontageCardPhoto_photoAttachment.graphql"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;c=b("React").PropTypes;d=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a;return b("React").createElement("div",{className:"_5uag _3p9v"},b("React").createElement(b("Image.react"),{className:"_6yug",src:(a=this.props.photoAttachment.image)==null?void 0:a.uri}))};return c}(b("React").Component);d.propTypes={photoAttachment:c.shape({image:c.shape({uri:c.string.isRequired}).isRequired}).isRequired};e.exports=a(b("montageCardWithStandardTimer")(d),{photoAttachment:function(){return b("MontageCardPhoto_photoAttachment.graphql")}})}),null);
__d("MontageCardSticker.react",["cx","Image.react","React","RelayModern","montageCardWithStandardTimer","MontageCardSticker_sticker.graphql"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;c=b("React").PropTypes;d=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a;a=this.props.sticker.animated_image?this.props.sticker.animated_image.uri:(a=this.props.sticker.image)==null?void 0:a.uri;return b("React").createElement("div",{className:"_5uag _3p9v"},b("React").createElement(b("Image.react"),{className:"_6yug",src:a}))};return c}(b("React").Component);d.propTypes={sticker:c.shape({animated_image:c.shape({uri:c.string.isRequired}),image:c.shape({uri:c.string.isRequired})}).isRequired};e.exports=a(b("montageCardWithStandardTimer")(d),{sticker:function(){return b("MontageCardSticker_sticker.graphql")}})}),null);
__d("MontageCardText.react",["cx","MessengerTextWithEntities.react","React","RelayModern","montageCardWithStandardTimer","MontageCardText_userMessage.graphql"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;c=b("React").PropTypes;d=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a;return b("React").createElement(b("MessengerTextWithEntities.react"),{className:"_5uag _2zz1",customSize:!0,renderEmoji:!0,text:(a=(a=this.props.userMessage)==null?void 0:(a=a.message)==null?void 0:a.text)!=null?a:""})};return c}(b("React").Component);d.propTypes={userMessage:c.shape({message:c.shape({text:c.string.isRequired}).isRequired}).isRequired};e.exports=a(b("montageCardWithStandardTimer")(d),{userMessage:function(){return b("MontageCardText_userMessage.graphql")}})}),null);
__d("MontageCardVideo.react",["cx","React","RelayModern","Video.react","cancelAnimationFrame","requestAnimationFrame","MontageCardVideo_videoAttachment.graphql"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;c=b("React").PropTypes;d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=null,d.$5=function(){if(d.$2&&d.$2.readyState>0){var a=d.$2.currentTime/d.$2.duration*100;d.props.onProgress(a);if(a>=100){d.props.onEnded();return}}d.$1=b("requestAnimationFrame")(d.$5)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$3()};d.componentDidUpdate=function(){this.$3()};d.componentWillUnmount=function(){this.$4()};d.$3=function(){if(!this.$2)return;!this.props.paused&&this.$2.paused?(this.$2.play(),this.$1=b("requestAnimationFrame")(this.$5)):(this.$4(),!this.props.active&&this.$2&&(this.$2.currentTime=0))};d.$4=function(){b("cancelAnimationFrame")(this.$1),this.$1=null,this.$2&&this.$2.pause()};d.render=function(){var a=this;return b("React").createElement(b("Video.react"),{autoPlay:!1,className:"_5uag _3p9v _6yug",onEnded:this.props.onEnded,onError:this.props.onEnded,src:this.props.videoAttachment.playable_url,ref:function(b){return a.$2=b&&b.refs.video}})};return c}(b("React").Component);d.propTypes={paused:c.bool.isRequired,onEnded:c.func.isRequired,onProgress:c.func.isRequired,videoAttachment:c.shape({playable_url:c.string.isRequired}).isRequired};e.exports=a(d,{videoAttachment:function(){return b("MontageCardVideo_videoAttachment.graphql")}})}),null);
__d("MontageShouldUpdateReducer",["MontageActions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){a=h(a,"string");return typeof a==="symbol"?a:String(a)}function h(a,b){__p&&__p();if(typeof a!=="object"||a===null)return a;var c=a[typeof Symbol==="function"?Symbol.toPrimitive:"@@toPrimitive"];if(c!==void 0){c=c.call(a,b||"default");if(typeof c!=="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(a)}var i=b("MontageActions").Types;function a(a,b){var c;switch(b.type){case i.REQUEST_UPDATE:c=babelHelpers["extends"]({},a.needsUpdating,(c={},c[b.threadFBID]=!0,c));return babelHelpers["extends"]({},a,{needsUpdating:c});case i.HANDLE_ACTION:b=babelHelpers["extends"]({},a.needsUpdating,(c={},c[b.threadFBID]=!0,c));return babelHelpers["extends"]({},a,{needsUpdate:b})}return a}function c(a,b){switch(b.type){case i.HAS_UPDATED:var c=a.needsUpdating;c[b.threadFBID];c=babelHelpers.objectWithoutPropertiesLoose(c,[b.threadFBID].map(g));return babelHelpers["extends"]({},a,{needsUpdating:c})}return a}e.exports={requestUpdate:a,hasUpdated:c}}),null);
__d("MontageSpotlightViewer.react",["KeyEventController","MessengerMobileWindow.react","MessengerMontageClientTypedLogger","MontageCard.react","MontageCardGIF.react","MontageCardPhoto.react","MontageCardSticker.react","MontageCardText.react","MontageCardVideo.react","React","RelayModern","SubscriptionsHandler","MontageSpotlightViewer_messages.graphql","MontageSpotlightViewer_message.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;c=b("React").PropTypes;var g=150,h=300,i={auto_play:"auto_play",click:"click",arrow:"arrow",esc:"esc",click_exit_button:"click_exit_button"},j={next:"_next",prev:"_prev"},k=function(a,c){return c=="onkeyup"?b("KeyEventController").filterEventTargets(a,c)&&b("KeyEventController").filterEventModifiers(a,c):!1};d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),j=0;j<e;j++)f[j]=arguments[j];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state=d.initialState(),d.$1=new(b("SubscriptionsHandler"))(),d.$2="unknown",d.$3=null,d.$6=function(){d.setState({paused:Date.now()})},d.$7=function(a){a=a.nativeEvent.offsetX;var b=Date.now()-d.state.paused;b<h?a<g?d.$4(i.click):d.$5(i.click):d.setState({paused:0})},d.$9=function(){d.setState({cardIndex:0,paused:0,open:!1})},d.$8=function(){d.$3=Date.now()},d.$12=d.$5.bind(babelHelpers.assertThisInitialized(d),i.auto_play),c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.initialState=function(){var a;a=(a=(a=this.props.messages)==null?void 0:a.count)!=null?a:1;return{cardIndex:this.props.initialUnreadCount?a-this.props.initialUnreadCount:0,open:!0,paused:0}};d.componentDidMount=function(){__p&&__p();var a=this;this.$1.addSubscriptions(b("KeyEventController").registerKey("LEFT",function(){a.$4(i.arrow);return!1}),b("KeyEventController").registerKey("RIGHT",function(){a.$5(i.arrow);return!1}),b("KeyEventController").registerKey("SPACE",function(){a.state.paused||a.$6();return!1}),b("KeyEventController").registerKey("SPACE",function(b){a.$7(b);return!1},k));this.$8()};d.render=function(){return b("React").createElement(b("MessengerMobileWindow.react"),{onClose:this.$9,onHide:this.props.onHide,onMouseDown:this.$6,onMouseUp:this.$7,background:"dark",open:this.state.open},this.$10())};d.componentWillUnmount=function(){this.$1&&this.$1.release(),this.$1=null};d.$10=function(){__p&&__p();var a=this,c=this.props.messages||{edges:[{node:this.props.message}]};return c.edges.map(function(c,d){__p&&__p();var e,f;c=c.node;if(!c||d<a.state.cardIndex-3||d>a.state.cardIndex+3)return null;e=c==null?void 0:(e=c.blob_attachments)==null?void 0:e[0];var g=c==null?void 0:c.sticker;f=(f=(f=a.props.messages)==null?void 0:f.count)!=null?f:1;d=d===a.state.cardIndex;var h=!(d&&!a.state.paused),i=null,j=e&&e.__typename;j==="MessageImage"?(d&&a.$11("photo"),i=b("React").createElement(b("MontageCardPhoto.react"),{active:d,onEnded:a.$12,paused:h,photoAttachment:e})):j==="MessageVideo"?(d&&a.$11("video"),i=b("React").createElement(b("MontageCardVideo.react"),{active:d,onEnded:a.$12,paused:h,videoAttachment:e})):j==="MessageAnimatedImage"?(d&&a.$11("gif"),i=b("React").createElement(b("MontageCardGIF.react"),{active:d,onEnded:a.$12,paused:h,gifAttachment:e})):g?(d&&a.$11("sticker"),i=b("React").createElement(b("MontageCardSticker.react"),{active:d,onEnded:a.$12,paused:h,sticker:g})):(d&&a.$11("text"),i=b("React").createElement(b("MontageCardText.react"),{active:d,onEnded:a.$12,paused:h,userMessage:c}));return i?b("React").createElement(b("MontageCard.react"),{active:d,activeIndex:a.state.cardIndex,count:f,key:c==null?void 0:c.message_id,relay:a.props.relay,message:c},i):null}).filter(Boolean)};d.$11=function(a){this.$2=a};d.$4=function(a){this.logMessageExit(a+j.prev);a=this.state.cardIndex-1;if(a<0){this.$9();return}this.setState({cardIndex:a,paused:0},this.$8)};d.$5=function(a){this.logMessageExit(a+j.next);a=(a=(a=this.props.messages)==null?void 0:a.count)!=null?a:1;var b=this.state.cardIndex+1;if(b>=a){this.$9();return}this.props.loadMore(1);this.setState({cardIndex:b,paused:0},this.$8)};d.logMessageExit=function(a){__p&&__p();var c,d,e=Date.now();c=(c=(c=this.props.messages)==null?void 0:c.count)!=null?c:1;var f=this.props.initialUnreadCount||c;c=this.state.cardIndex-(c-f)+1;var g=this.props.initialUnreadCount?"unseen":"seen";if(this.props.messages){var h=this.props.messages.edges[this.state.cardIndex];h=h&&h.node}else h=this.props.message;if(!h||!this.$3)return;e=e-this.$3;new(b("MessengerMontageClientTypedLogger"))().setEvent("message_exit").setMid((d=h)==null?void 0:d.message_id).setOwnerID((d=h)==null?void 0:(d=d.message_sender)==null?void 0:d.id).setMessageSource((d=h)==null?void 0:(h=d.message_source_data)==null?void 0:h.message_source).setExitAction(a).setContentType(this.$2).setTotalQueue(f).setQueueType(g).setCurrentPosition(c).setEntryPoint(this.props.entryPoint).setMessageStartTime(this.$3).setMessageDuration(e).log()};return c}(b("React").Component);d.propTypes={entryPoint:c.oneOf(["thread_head","reply_context"]),initialUnreadCount:c.number,onHide:c.func.isRequired,loadMore:c.func.isRequired,message:c.object,messages:c.object,relay:c.object.isRequired};e.exports=a(d,{messages:function(){return b("MontageSpotlightViewer_messages.graphql")},message:function(){return b("MontageSpotlightViewer_message.graphql")}})}),null);
__d("MontageState",[],(function(a,b,c,d,e,f){"use strict";a={needsUpdating:{}};e.exports=a}),null);
__d("MontageStore",["FluxReduceStore","MontageDispatcher","MontageShouldUpdateReducer","MontageState"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[].concat(Object.values(b("MontageShouldUpdateReducer")));a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return b("MontageState")};d.reduce=function(a,b){return g.reduce(function(a,c){return c(a,b)},a)};return c}(b("FluxReduceStore"));a.__moduleID=e.id;e.exports=new a(b("MontageDispatcher"))}),null);
__d("MontageThumbnail.react",["cx","CssBackgroundImage.react","MessengerTextWithEntities.react","React","RelayModern","MontageThumbnail_message.graphql"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;c=b("React").PropTypes;var h=28,i=21;d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=!1,c.state={imageHeight:h,imageWidth:i},c.setDimensions=function(a,b){c.$1&&(c.state.imageHeight!==a||c.state.imageWidth!==b)&&c.setState({imageHeight:a,imageWidth:b})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){this.$1=!0};d.componentWillUnmount=function(){this.$1=!1};d.render=function(){return b("React").createElement("div",{className:"_4bj3"},this.getFirstImage(),this.renderUnreadBadge())};d.renderUnreadBadge=function(){return this.props.unread?b("React").createElement("div",{className:"_4bj5",style:{backgroundColor:this.props.customColor}}):null};d.getFirstImage=function(){__p&&__p();var a=this.props.message;if(!a)return null;if(a.sticker)return this.getImageElement(a.sticker.stickerImage);if(a.blob_attachments&&a.blob_attachments[0]){var c=a.blob_attachments[0];c=c.messageImage||c.videoImage||c.mediaImage;if(c)return this.getImageElement(c)}if(a.message&&a.message.text){return b("React").createElement(b("MessengerTextWithEntities.react"),{className:"_4bj6 _4bj9",customSize:!0,renderEmoji:!0,style:{height:this.props.imageHeight,width:this.props.imageWidth},text:a==null?void 0:(c=a.message)==null?void 0:c.text})}return null};d.getDimensions=function(a){var b=new Image(),c=this.setDimensions;b.onload=function(){c(b.height,b.width)};b.src=(a==null?void 0:a.uri)||""};d.getImageElement=function(a){this.props.shouldRecomputeDimensions&&this.getDimensions(a);return b("React").createElement(b("CssBackgroundImage.react"),{className:"_4bj6",height:this.state.imageHeight,imageURI:a==null?void 0:a.uri,width:this.state.imageWidth})};return c}(b("React").Component);d.propTypes={customColor:c.string,message:c.object.isRequired,unread:c.bool.isRequired,imageHeight:c.number.isRequired,imageWidth:c.number.isRequired,shouldRecomputeDimensions:c.bool.isRequired};e.exports=a(d,{message:function(){return b("MontageThumbnail_message.graphql")}});e.exports.test=d}),null);
__d("MontageViewerSingleThreadWeb.react",["cx","FBStoriesViewer2","Link.react","MessengerEnvironment","MessengerStoriesLoggingConstants","MontageThumbnail.react","React","RelayModern","Timestamp.react","uuid","MontageViewerSingleThreadWeb_montageThread.graphql"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;c=b("React").PropTypes;var h=28,i=21,j=216,k=56,l=857,m=1141,n=160,o=284;d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){var a=d.props.montageThread.montage_container_id;if(a==null)return;a={bucketID:a,cardID:null,openSource:b("MessengerStoriesLoggingConstants").ACTION_SOURCE.FACEBOOK_CHAT_TAB,tilePosition:{bottom:j,height:k,left:l,right:m,top:n,width:o},traySessionID:b("uuid")()};b("MessengerEnvironment").messengerdotcom?(a.openSource=b("MessengerStoriesLoggingConstants").ACTION_SOURCE.MESSENGER_DOT_COM,b("FBStoriesViewer2").getInstance().openDialogMessenger(a)):b("FBStoriesViewer2").open(a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this.props.firstMontageMessage,c=this.props.customColor,d=this.props.unread;return a==null?null:b("React").createElement("div",{className:"_1sk5"},b("React").createElement("div",{className:"_1sk6"},b("React").createElement(b("Link.react"),{className:"_5no5",href:"#",onClick:this.$1,role:"button"},b("React").createElement(b("MontageThumbnail.react"),{customColor:c,message:a,unread:d,imageHeight:h,imageWidth:i,shouldRecomputeDimensions:!1}),b("React").createElement("div",{className:"_1sui"},this.props.header,b("React").createElement("span",{className:"_1suk"},b("React").createElement(b("Timestamp.react"),{minimize:!0,time:this.props.timestamp}))),this.props.logo)))};return c}(b("React").Component);d.propTypes={threadID:c.string.isRequired,montageThread:c.object.isRequired,customColor:c.string.isRequired,unread:c.bool.isRequired,timestamp:c.number,firstMontageMessage:c.object,authorName:c.any,header:c.object,logo:c.object};e.exports=a(d,{montageThread:function(){return b("MontageViewerSingleThreadWeb_montageThread.graphql")}})}),null);
__d("MontageThreadViewV2.react",["MontageViewerSingleThreadWeb.react","React","RelayFBEnvironment","RelayModern","MontageThreadViewV2Query.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("RelayModern").graphql;var h=b("RelayModern").QueryRenderer;function a(a){var c=a.firstMontageMessage,d=a.messengerThreadFBID,e=a.threadID,f=a.customColor,i=a.unread,j=a.timestamp,k=a.firstMontageMessage,l=a.authorName,m=a.header,n=a.logo;return c==null?null:b("React").createElement(h,{environment:b("RelayFBEnvironment"),query:g||(g=function(){return b("MontageThreadViewV2Query.graphql")}),variables:{id:d},render:function(a){a=a.props;return a?b("React").createElement(b("MontageViewerSingleThreadWeb.react"),{threadID:e,montageThread:a.montage_thread,customColor:f,unread:i,timestamp:j,firstMontageMessage:k,authorName:l,header:m,logo:n}):null}})}e.exports=a}),null);
__d("MontageViewerSingleThread.react",["MontageSpotlightViewer.react","React","RelayModern","emptyFunction","MontageViewerSingleThread_montageThread.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;c=b("React").PropTypes;d=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a;a=(a=this.props.montageThread)==null?void 0:a.messages;return this.props.open&&a?b("React").createElement(b("MontageSpotlightViewer.react"),{entryPoint:"reply_context",initialUnreadCount:this.props.unreadCount,loadMore:b("emptyFunction"),onHide:this.props.onHide,messages:a}):null};return c}(b("React").Component);d.propTypes={open:c.bool.isRequired,onHide:c.func.isRequired,montageThread:c.object.isRequired,unreadCount:c.number.isRequired};e.exports=a(d,{montageThread:function(){return b("MontageViewerSingleThread_montageThread.graphql")}})}),null);
__d("MontageThreadView.react",["cssVar","cx","fbt","MercuryIDs","MessengerEnvironment","MessengerLogo.react","MessengerMarkReadMutation","MessengerParticipants.re","MontageThreadViewV2.react","MontageThumbnail.react","MontageViewerSingleThread.react","React","Timestamp.react","RelayModern","convertMIGColorToFIGColor","gkx","MontageThreadView_threadMessages.graphql"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=b("React").PropTypes;c=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;var j=28,k=21;d=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={showMontage:!1},d.$2=function(){d.setState({showMontage:!0})},d.$3=function(){var a;d.setState({showMontage:!1});a=(a=d.props.threadMessages)==null?void 0:(a=a.montage_thread)==null?void 0:a.id;a&&b("MessengerMarkReadMutation").commit(d.props.relay.environment,{thread_id:a,update_type:"MARK_READ"})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.props.threadMessages&&(this.props.onResize&&this.props.onResize());var a=this.getMontageThreadID();a&&(this.props.setThreadID&&this.props.setThreadID(a))};d.componentDidUpdate=function(a){a.threadMessages!==this.props.threadMessages&&(this.props.onResize&&this.props.onResize())};d.render=function(){var a=this.getFirstMontageMessage();return!a?null:b("React").createElement("div",{className:"_1sk5"},b("React").createElement("div",{className:"_1sk6"},this.renderContents(a)))};d.renderContents=function(a){var c=this.getCustomColor(),d=this.getUnread();if(b("gkx")("972782"))return b("React").createElement("div",null,this.$1());else return b("React").createElement("a",{className:"_5no5",href:"#",onClick:this.$2,role:"button"},b("React").createElement(b("MontageThumbnail.react"),{customColor:c,message:a,unread:d,imageHeight:j,imageWidth:k,shouldRecomputeDimensions:!1}),b("React").createElement("div",{className:"_1sui"},this.renderHeader(d,c),b("React").createElement("span",{className:"_1suk"},b("React").createElement(b("Timestamp.react"),{minimize:!0,time:this.getTimestamp()}))),this.renderLogo(),this.renderModal())};d.renderModal=function(){var a;a=(a=this.props.threadMessages)==null?void 0:a.montage_thread;return a&&this.state.showMontage?b("React").createElement(b("MontageViewerSingleThread.react"),{onHide:this.$3,open:this.state.showMontage,montageThread:a,unreadCount:a==null?void 0:a.unread_count}):null};d.$1=function(){var a;a=(a=this.props.threadMessages)==null?void 0:a.montage_thread;var c=this.getMontageThreadID(),d=this.props.threadID,e=this.getCustomColor(),f=this.getUnread(),g=this.getTimestamp(),h=this.getFirstMontageMessage(),i=this.getAuthorName(),j=this.renderHeader(f,e),k=this.renderLogo();return a?b("React").createElement(b("MontageThreadViewV2.react"),{messengerThreadFBID:c,threadID:d,customColor:e,unread:f,timestamp:g,firstMontageMessage:h,authorName:i,header:j,logo:k}):null};d.renderLogo=function(){return b("MessengerEnvironment").messengerui?null:b("React").createElement(b("MessengerLogo.react"),{color:"rgba(0, 0, 0, 0.3)",size:"17px"})};d.renderHeader=function(a,c){return a?b("React").createElement("h1",{className:"_1suj",style:{color:c}},i._("Watch {person_with_montage}'s story",[i._param("person_with_montage",this.getAuthorName())])):null};d.getAuthorName=function(){var a=b("MercuryIDs").getUserIDFromThreadID(this.props.threadID);if(!a)return null;a=b("MessengerParticipants.re").getNow(b("MercuryIDs").getParticipantIDFromUserID(a));return!a?null:a.short_name||a.name};d.getFirstMontageMessage=function(){var a;return(a=this.props)!=null?(a=a.threadMessages)!=null?(a=a.montage_thread)!=null?(a=a.montageMessages)!=null?(a=a.edges)!=null?(a=a[0])!=null?a.node:a:a:a:a:a:a};d.getTimestamp=function(){var a=this.getFirstMontageMessage();return a&&a.timestamp};d.getCustomColor=function(){var a;a=(a=this.props)!=null?(a=a.threadMessages)!=null?(a=a.customization_info)!=null?a.outgoing_bubble_color:a:a:a;var c;!a?c="#0084ff":c="#"+a.substring(2);return b("convertMIGColorToFIGColor")(c)};d.getUnread=function(){var a;return!!((a=this.props)!=null?(a=a.threadMessages)!=null?(a=a.montage_thread)!=null?a.unread_count:a:a:a)};d.getMontageThreadID=function(){var a;return(a=this.props)!=null?(a=a.threadMessages)!=null?(a=a.montage_thread)!=null?(a=a.thread_key)!=null?a.thread_fbid:a:a:a:a};return c}(b("React").PureComponent);d.propTypes={onResize:a.func,threadMessages:a.object.isRequired,threadID:a.string.isRequired};e.exports=c(d,{threadMessages:function(){return b("MontageThreadView_threadMessages.graphql")}})}),null);
__d("MontageThreadViewContainerImpl.react",["FluxContainer","MercuryIDs","MontageActions","MontageStore","MontageThreadView.react","React","RelayFBEnvironment","RelayModern","MontageThreadViewContainerImplQuery.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("RelayModern").QueryRenderer;b("RelayModern").graphql;a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.threadIDToMontageThreadID={},d.$2=function(a){a=a.props;var c=b("MercuryIDs").getThreadFBIDFromThreadID(d.props.threadID);d.$3();if(!c)return null;return!a?null:b("React").createElement(b("MontageThreadView.react"),babelHelpers["extends"]({},a,{onResize:d.props.onResize,setThreadID:d.$4,threadID:d.props.threadID}))},d.$4=function(a){var c=b("MercuryIDs").getThreadFBIDFromThreadID(d.props.threadID);d.threadIDToMontageThreadID[c]=a},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("MontageStore")]};c.calculateState=function(){return{needsUpdating:b("MontageStore").getState().needsUpdating}};var d=c.prototype;d.render=function(){var a=this.props.threadID;a=b("MercuryIDs").getThreadFBIDFromThreadID(a);return!a?null:b("React").createElement(h,{environment:b("RelayFBEnvironment"),cacheConfig:{forceFetch:this.$1(a)},query:g||(g=function(){return b("MontageThreadViewContainerImplQuery.graphql")}),render:this.$2,variables:{threadFBID:a}})};d.$3=function(){var a=b("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID),c=this.threadIDToMontageThreadID[a];this.state.needsUpdating[a]&&b("MontageActions").hasUpdated(a);this.state.needsUpdating[a]&&b("MontageActions").hasUpdated(c)};d.$1=function(a){return!!(this.state.needsUpdating[a]||this.state.needsUpdating[this.threadIDToMontageThreadID[a]])};return c}(b("React").PureComponent);c.propTypes={onResize:a.func,threadID:a.string.isRequired};e.exports=b("FluxContainer").create(c)}),null);