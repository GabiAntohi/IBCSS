if (self.CavalryLogger) { CavalryLogger.start_js(["6jOgc"]); }

__d("StoriesSuspenseCardMedia_media.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"Fragment",name:"StoriesSuspenseCardMedia_media",type:"Story",metadata:null,argumentDefinitions:[],selections:[{kind:"LinkedField",alias:"link_attachment",name:"attachments",storageKey:'attachments(if_style:"share")',args:[{kind:"Literal",name:"if_style",value:"share"}],concreteType:"StoryAttachment",plural:!0,selections:[{kind:"ScalarField",alias:null,name:"url",args:null,storageKey:null}]},{kind:"LinkedField",alias:null,name:"attachments",storageKey:null,args:null,concreteType:"StoryAttachment",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"media",storageKey:null,args:null,concreteType:null,plural:!1,selections:[{kind:"LinkedField",alias:"blurredImage",name:"image",storageKey:"image(blur:10,height:300,scale:1)",args:[{kind:"Literal",name:"blur",value:10},{kind:"Literal",name:"height",value:300},{kind:"Literal",name:"scale",value:1}],concreteType:"Image",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}]},{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"FragmentSpread",name:"StoriesCardPhotoMedia_photo",args:null},{kind:"FragmentSpread",name:"StoriesCardVideoMedia_video",args:null}]}]},{kind:"LinkedField",alias:null,name:"text_format_metadata",storageKey:null,args:null,concreteType:"TextFormatMetadata",plural:!1,selections:[{kind:"FragmentSpread",name:"StoriesCardComposerFormat_textFormatMetaData",args:null}]},{kind:"LinkedField",alias:null,name:"message",storageKey:null,args:null,concreteType:"TextWithEntities",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"text",args:null,storageKey:null},{kind:"FragmentSpread",name:"StoriesCardComposerFormat_message",args:null}]},{kind:"LinkedField",alias:null,name:"story_default_background",storageKey:null,args:null,concreteType:"StoryBackgroundInfo",plural:!1,selections:[{kind:"FragmentSpread",name:"StoriesCardComposerFormat_defaultBackground",args:null}]},{kind:"FragmentSpread",name:"StoriesCardComposerFormat_story",args:null},{kind:"FragmentSpread",name:"StoriesCardPhotoMedia_story",args:null},{kind:"FragmentSpread",name:"StoriesCardMediaLoadingBackground_story",args:null}]};e.exports=a}),null);
__d("StoriesSuspenseCardOverlays_card.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"Fragment",name:"StoriesSuspenseCardOverlays_card",type:"Story",metadata:null,argumentDefinitions:[{kind:"RootArgument",name:"scale",type:"Float"}],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"attachments",storageKey:null,args:null,concreteType:"StoryAttachment",plural:!0,selections:[{kind:"LinkedField",alias:null,name:"media",storageKey:null,args:null,concreteType:null,plural:!1,selections:[{kind:"LinkedField",alias:null,name:"image",storageKey:null,args:[{kind:"Literal",name:"height",value:1920},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:1080}],concreteType:"Image",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"height",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"width",args:null,storageKey:null}]}]}]},{kind:"LinkedField",alias:null,name:"story_overlays",storageKey:null,args:null,concreteType:null,plural:!0,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"FragmentSpread",name:"StoriesCardOverlayResharedPost_overlay",args:null},{kind:"FragmentSpread",name:"StoriesCardOverlayResharedContent_overlay",args:null},{kind:"FragmentSpread",name:"StoriesRatingStickerRoot_overlay",args:null},{kind:"FragmentSpread",name:"StoriesReactionSticker_overlay",args:null},{kind:"FragmentSpread",name:"StoriesPollSticker_overlay",args:null},{kind:"FragmentSpread",name:"StoriesTagSticker_overlay",args:null},{kind:"InlineFragment",type:"StoryOverlayPollSticker",selections:[{kind:"ScalarField",alias:null,name:"style",args:null,storageKey:null}]}]},{kind:"FragmentSpread",name:"StoriesPollSticker_story",args:null},{kind:"FragmentSpread",name:"StoriesRatingStickerRoot_story",args:null}]};e.exports=a}),null);
__d("StoriesSuspenseCardOverlays_owner.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"Fragment",name:"StoriesSuspenseCardOverlays_owner",type:"CameraPostBucketOwnerUnion",metadata:null,argumentDefinitions:[],selections:[{kind:"FragmentSpread",name:"StoriesPollSticker_owner",args:null},{kind:"FragmentSpread",name:"StoriesRatingStickerRoot_owner",args:null}]};e.exports=a}),null);
__d("StoriesSuspenseCard_animations.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"Fragment",name:"StoriesSuspenseCard_animations",type:"Query",metadata:null,argumentDefinitions:[{kind:"LocalArgument",name:"variant",type:"String",defaultValue:null}],selections:[{kind:"FragmentSpread",name:"StoriesCardReactionPlaybackLayout_animations",args:null}]};e.exports=a}),null);
__d("StoriesSuspenseCard_card.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"Fragment",name:"StoriesSuspenseCard_card",type:"Story",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"FragmentSpread",name:"StoriesSuspenseCardMedia_media",args:null},{kind:"FragmentSpread",name:"StoriesCardHeader_card",args:null},{kind:"FragmentSpread",name:"StoriesSuspenseCardOverlays_card",args:null},{kind:"FragmentSpread",name:"StoriesCardFooter_card",args:null},{kind:"FragmentSpread",name:"StoriesCardReactionPlaybackLayout_card",args:null}]};e.exports=a}),null);
__d("StoriesSuspenseCard_owner.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"Fragment",name:"StoriesSuspenseCard_owner",type:"CameraPostBucketOwnerUnion",metadata:null,argumentDefinitions:[],selections:[{kind:"FragmentSpread",name:"StoriesCardHeader_owner",args:null},{kind:"FragmentSpread",name:"StoriesCardFooter_owner",args:null},{kind:"FragmentSpread",name:"StoriesSuspenseCardOverlays_owner",args:null}]};e.exports=a}),null);
__d("TetraButtonGroup.react",["React","TetraButton.react","TetraRow.react","TetraRowItem.react","stylex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){__p&&__p();var c=a.direction;c=c===void 0?"forward":c;var d=a.paddingHorizontal,e=a.paddingTop,f=a.primary,g=a.secondary;a=babelHelpers.objectWithoutPropertiesLoose(a,["direction","paddingHorizontal","paddingTop","primary","secondary"]);var h=[],i=f.testid;f=babelHelpers.objectWithoutPropertiesLoose(f,["testid"]);h.push({hidden:b("React").createElement(b("TetraButton.react"),babelHelpers["extends"]({},f,a)),visible:b("React").createElement(b("TetraButton.react"),babelHelpers["extends"]({testid:i},f,a))});if(g!=null){i=g.testid;f=babelHelpers.objectWithoutPropertiesLoose(g,["testid"]);h.push({hidden:b("React").createElement(b("TetraButton.react"),babelHelpers["extends"]({},f,a,{type:"secondary"})),visible:b("React").createElement(b("TetraButton.react"),babelHelpers["extends"]({},f,a,{testid:i,type:"secondary"}))})}return b("React").createElement(b("TetraRow.react"),{columns:2,paddingHorizontal:d,paddingTop:e,spacing:8,wrap:c},(c==="backward"?h.reverse():h).map(function(a,c){return b("React").createElement(b("TetraRowItem.react"),{expanding:!0,key:c},h.map(function(a,d){return b("React").createElement(b("React").Fragment,{key:d},c!==d?b("React").createElement("div",{"aria-hidden":!0,className:"kr9hpln1 do00u71z"},a.hidden):a.visible)}))}))}e.exports=a}),null);
__d("withSomeContext",["React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useContext;function a(a,c,d){var e=b("React").memo(a);function f(a,f){var h=g(c);h=d(h);return b("React").createElement(e,babelHelpers["extends"]({},a,h,{ref:f}))}return b("React").forwardRef(f)}e.exports=a}),null);
__d("StoriesSuspenseImageCrossFade.react",["CometBackgroundImage.react","React","stylex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a){var c=a.imageURI,d=a.prevImageURI;a=a.onAnimationEnd;var e=c===d;if(d==null||e){a();return b("React").createElement("div",{className:"k4urcfbm l9j0dhe7 datstx6m"},b("React").createElement("div",{className:"kr520xx4 j9ispegn pmk7jnqg n7fi1qx3 i09qtzwb g5ia77u1"},b("React").createElement(b("CometBackgroundImage.react"),{src:c})))}return b("React").createElement("div",{className:"k4urcfbm l9j0dhe7 datstx6m"},b("React").createElement("div",{className:"kr520xx4 j9ispegn pmk7jnqg n7fi1qx3 i09qtzwb g5ia77u1",key:c},b("React").createElement(b("CometBackgroundImage.react"),{src:c})),b("React").createElement("div",{className:"kr520xx4 j9ispegn pmk7jnqg n7fi1qx3 i09qtzwb g5ia77u1 glx6oz2c pz0wz9f1 j1l0snac iwynql29",key:d,onAnimationEnd:a},b("React").createElement(b("CometBackgroundImage.react"),{src:d})))}e.exports=a}),null);
__d("StoriesSuspenseBackground.react",["CometBackgroundImage.react","React","ReactDOM","StoriesSuspenseImageCrossFade.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=null;function a(a){__p&&__p();var c=a.imageURI;a=b("React").useRef(document.getElementById("stories_viewer_background"));a.current===null&&(a.current=document.getElementById("stories_viewer_background"));var d=b("React").useState(!1),e=d[0],f=d[1];b("React").useEffect(function(){if(!e&&c!=null){var a=document.createElement("img");a.onload=a.onerror=function(){return f(!0)};a.src=c;return function(){a.onload=a.onerror=function(){}}}},[e,c,f]);d=b("React").useCallback(function(){c!=null&&e&&(g=c)},[e,c]);if(!a.current)return null;if(c===null||!e)return g!=null&&b("ReactDOM").createPortal(b("React").createElement(b("CometBackgroundImage.react"),{src:g}),a.current);return c!=null&&e?b("ReactDOM").createPortal(b("React").createElement(b("StoriesSuspenseImageCrossFade.react"),{imageURI:c,onAnimationEnd:d,prevImageURI:g}),a.current):null}e.exports=b("React").memo(a)}),null);
__d("StoriesSuspenseBackgroundDarkeningLayer.react",["React","stylex"],(function(a,b,c,d,e,f){"use strict";function a(a){a=a.isShowingEndCard;a=a===void 0?!1:a;return b("React").createElement("div",{className:b("stylex").dedupe({"background-color-1":"iz2mbcqi","bottom-1":"i09qtzwb","end-1":"n7fi1qx3","height-1":"datstx6m","position-1":"pmk7jnqg","start-1":"j9ispegn","top-1":"kr520xx4","width-1":"k4urcfbm"},a?{"background-color-1":"qsy8amke"}:null)})}e.exports=a}),null);
__d("StoriesSuspenseBucketLoadingView.react",["React","StoriesCardHeaderGlimmer.react","StoriesSuspenseBackground.react","stylex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement("div",{className:"k4urcfbm l9j0dhe7 jifvfom9 datstx6m cbu4d94t j83agx80 ppue9xd8 ll8tlv6m"},b("React").createElement("div",{className:"eq70wtua en0ipb6w ozuftl9m"},b("React").createElement(b("StoriesCardHeaderGlimmer.react"),null),b("React").createElement(b("StoriesSuspenseBackground.react"),null)))};return c}(b("React").PureComponent);e.exports=a}),null);
__d("StoriesSuspenseCardMedia.react",["fbt","CometErrorBoundary.react","QuickPerformanceLogger","React","StoriesCardComposerFormat.react","StoriesCardMediaLoadingBackground.react","StoriesCardPhotoMedia.react","StoriesCardTimerSourceAutoProgression","StoriesCardVideoMedia.react","StoriesConstants","StoriesEnums","StoriesLoggerContext","StoriesQuickLogModule","StoriesRelay","StoriesSuspenseBackground.react","StoriesSuspensePauseContext","gkx","usePrevious","StoriesSuspenseCardMedia_media.graphql"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("React").useCallback,i=b("React").useContext,j=b("React").useEffect,k=b("React").useRef,l=b("React").useState,m=b("StoriesEnums").STORY_MEDIA_TYPES;b("StoriesRelay").graphql;var n=b("StoriesRelay").useFragment,o=new Set(Object.values(m));function p(){b("QuickPerformanceLogger").markerEnd(b("StoriesQuickLogModule").STORY_VIEWER_LOAD_TTI_V2_WWW,b("StoriesConstants").QPL.SUCCESS),b("QuickPerformanceLogger").markerEnd(b("StoriesQuickLogModule").STORY_VIEWER_BUCKET_TRANSITION_TTI_WWW,b("StoriesConstants").QPL.SUCCESS),b("QuickPerformanceLogger").markerEnd(b("StoriesQuickLogModule").STORY_VIEWER_THREAD_TRANSITION_TTI_WWW,b("StoriesConstants").QPL.SUCCESS),b("QuickPerformanceLogger").markerEnd(b("StoriesQuickLogModule").STORY_VIEWER_NOTIF_ASYNC_TTI_WWW,b("StoriesConstants").QPL.SUCCESS)}var q=function(){return b("StoriesSuspenseCardMedia_media.graphql")};function a(a){__p&&__p();var c,d,e=a.onTimerSourceUpdate,f=a.media;a=a.isMuted;f=n(q,f);var r=i(b("StoriesLoggerContext")),s=r.logger;r=i(b("StoriesSuspensePauseContext"));var t=r.isPaused;r=r.setPause;var u=l(!1),v=u[0],w=u[1],x=k(!1),y=f==null?void 0:(u=f.attachments)==null?void 0:(u=u[0])==null?void 0:u.media,z=b("usePrevious")(y),A=h(function(a){e&&e(a),w(!0)},[e,w]);u=h(function(){b("QuickPerformanceLogger").markerPoint(b("StoriesQuickLogModule").STORY_VIEWER_LOAD_TTI_V2_WWW,"image loaded"),p(),A(new(b("StoriesCardTimerSourceAutoProgression"))())},[A]);var B=h(function(){b("QuickPerformanceLogger").markerPoint(b("StoriesQuickLogModule").STORY_VIEWER_LOAD_TTI_V2_WWW,"video loaded"),p()},[]);c=((f==null?void 0:f.link_attachment)&&(f==null?void 0:(c=f.link_attachment)==null?void 0:(c=c[0])==null?void 0:c.url))!=null;d=(f==null?void 0:(d=f.message)==null?void 0:d.text)!=null;var C=function(){b("QuickPerformanceLogger").markerEnd(b("StoriesQuickLogModule").STORY_VIEWER_LOAD_TTI_V2_WWW,b("StoriesConstants").QPL.FAIL);b("QuickPerformanceLogger").markerEnd(b("StoriesQuickLogModule").STORY_VIEWER_BUCKET_TRANSITION_TTI_WWW,b("StoriesConstants").QPL.FAIL);b("QuickPerformanceLogger").markerEnd(b("StoriesQuickLogModule").STORY_VIEWER_THREAD_TRANSITION_TTI_WWW,b("StoriesConstants").QPL.FAIL);b("QuickPerformanceLogger").markerEnd(b("StoriesQuickLogModule").STORY_VIEWER_NOTIF_ASYNC_TTI_WWW,b("StoriesConstants").QPL.FAIL);return g._("Error Rendering Media")};j(function(){z!==y&&x.current===!1&&(s!=null&&y!=null&&(s.openMediaLog(),x.current=!0))});var D=((f==null?void 0:f.attachments)||[]).filter(function(a){return o.has(a==null?void 0:(a=a.media)==null?void 0:a.__typename)});D=D==null?void 0:(D=D[0])==null?void 0:D.media;var E=D==null?void 0:D.__typename;d=d&&b("gkx")("819876");v=!v&&!d;var F=null;f&&D&&(d&&!c?F=b("React").createElement(b("StoriesCardComposerFormat.react"),{defaultBackground:f.story_default_background,message:f.message,onImageLoad:u,setPause:r,story:f,textFormatMetaData:f.text_format_metadata}):E===m.PHOTO?F=b("React").createElement(b("StoriesCardPhotoMedia.react"),{onImageLoad:u,photo:D,story:f}):E===m.VIDEO&&(F=b("React").createElement(b("StoriesCardVideoMedia.react"),{isMuted:a,isPaused:t,onTimerSourceUpdate:A,onVideoLoaded:B,setPause:r,video:D})));u=(c=D==null?void 0:(d=D.blurredImage)==null?void 0:d.uri)!=null?c:null;return b("React").createElement(b("CometErrorBoundary.react"),{fallback:C},F,v&&b("React").createElement(b("StoriesCardMediaLoadingBackground.react"),{story:f}),b("React").createElement(b("StoriesSuspenseBackground.react"),{imageURI:u}))}e.exports=b("React").memo(a)}),null);
__d("StoriesSuspenseCardOverlays.react",["React","StoriesCardOverlayResharedContent.react","StoriesCardOverlayResharedPost.react","StoriesEnums","StoriesGating","StoriesLoggerContext","StoriesPollSticker.react","StoriesRatingStickerRoot.react","StoriesReactionSticker.react","StoriesRelay","StoriesSuspenseCardModalContext","StoriesSuspensePauseContext","StoriesTagSticker.react","gkx","useStoriesOverlayPositions","stylex","StoriesSuspenseCardOverlays_card.graphql","StoriesSuspenseCardOverlays_owner.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useContext,h=b("StoriesEnums").POLL_STICKER,i=b("StoriesEnums").STORY_OVERLAY_TYPES;c=b("StoriesRelay").createFragmentContainer;b("StoriesRelay").graphql;function a(a){__p&&__p();var c=a.card,d=a.owner;a=c==null?void 0:(a=c.attachments)==null?void 0:(a=a[0])==null?void 0:(a=a.media)==null?void 0:a.image;var e=a==null?void 0:a.height,f=a==null?void 0:a.width,j=g(b("StoriesLoggerContext")),k=j.logger;j=g(b("StoriesSuspensePauseContext"));var l=j.setPause;j=g(b("StoriesSuspenseCardModalContext"));var m=j.setOpenModal;j=b("useStoriesOverlayPositions")(e,f);f=c==null?void 0:(e=c.story_overlays)==null?void 0:e.length;var n=c==null?void 0:c.id;if(c==null||n==null||f==null||f===0)return null;if(a==null||j==null)return null;var o=j.mediaHeight;e=j.mediaLeft;f=j.mediaTop;var p=j.mediaWidth,q=b("StoriesGating").isInteractiveStickersEnabled(),r=b("StoriesGating").isPollStickersEnabled(),s=b("StoriesGating").isTagStickersEnabled(),t=b("StoriesGating").shouldRatingStickerShowResult();a={height:o+"px",left:e+"px",top:f+"px",width:p+"px"};return b("React").createElement("div",{className:"k4urcfbm kr520xx4 j9ispegn pmk7jnqg hzruof5a datstx6m"},b("React").createElement("div",{className:"pmk7jnqg",style:a},c.story_overlays.map(function(a,e){__p&&__p();switch(a.__typename){case i.RESHARED_POST:return b("gkx")("821827")?b("React").createElement(b("StoriesCardOverlayResharedPost.react"),{cardID:n,containerHeight:o,containerWidth:p,key:"story_overlay_"+e,overlay:a,setPause:l}):null;case i.RESHARED_CONTENT:return b("gkx")("976402")?b("React").createElement(b("StoriesCardOverlayResharedContent.react"),{cardID:n,containerHeight:o,containerWidth:p,key:"story_overlay_"+e,overlay:a,setOpenModal:m,setPause:l}):null;case i.INTERACTIVE_STICKER:if(q)return b("React").createElement(b("StoriesReactionSticker.react"),{containerHeight:o,containerWidth:p,key:"story_overlay_"+e,logger:k,overlay:a,setPause:l});else return null;case i.POLL_STICKER:var f=a.style;if(f===h.FIVE_OPTION_STAR_RATING&&t)return b("React").createElement(b("StoriesRatingStickerRoot.react"),{cardID:n,containerHeight:o,containerWidth:p,key:"story_overlay_"+e,overlay:a,owner:d,setPause:l,story:c});else if((f===h.IG_TWO_OPTION_COMBINED||f===h.TWO_OPTION_COMBINED)&&r)return b("React").createElement(b("StoriesPollSticker.react"),{cardID:n,containerHeight:o,containerWidth:p,key:"story_overlay_"+e,overlay:a,owner:d,setPause:l,story:c});else return null;case i.TAG_STICKER:if(s)return b("React").createElement(b("StoriesTagSticker.react"),{containerHeight:o,containerWidth:p,key:"story_overlay_"+e,overlay:a,setPause:l});else return null;default:return null}})))}e.exports=c(a,{card:function(){return b("StoriesSuspenseCardOverlays_card.graphql")},owner:function(){return b("StoriesSuspenseCardOverlays_owner.graphql")}})}),null);
__d("StoriesSuspenseCard.react",["React","StoriesCardFooter.react","StoriesCardHeader.react","StoriesCardReactionPlaybackLayout.react","StoriesLoggerContext","requireCond","StoriesSuspenseCardMedia.react","StoriesSuspenseCardOverlays.react","StoriesRelay","stylex","usePrevious","cr:956987","StoriesSuspenseCard_animations.graphql","StoriesSuspenseCard_card.graphql","StoriesSuspenseCard_owner.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useEffect,h=b("React").useContext;c=b("StoriesRelay").createFragmentContainer;b("StoriesRelay").graphql;function a(a){__p&&__p();var c=a.card,d=a.onSeen,e=a.owner,f=a.animations,i=a.isSelfStory;i=i===void 0?!1:i;var j=c==null?void 0:c.id,k=b("usePrevious")(j),l=h(b("StoriesLoggerContext"));l=l.logger;g(function(){k!==j&&j!=null&&d()},[j,d,k]);if(c===null||c===void 0)return null;l=l.getImpressionConfig();return b("React").createElement("div",babelHelpers["extends"]({},l,{className:"k4urcfbm l9j0dhe7 taijpn5t datstx6m j83agx80 bp9cbjyn","data-id":c.id,"data-testid":"StoriesSuspenseCard",key:c.id}),j!=null&&b("cr:956987")&&b("React").createElement(b("cr:956987"),{cardID:j}),b("React").createElement(b("StoriesSuspenseCardMedia.react"),{isMuted:a.isMuted,media:c,onTimerSourceUpdate:a.onTimerSourceUpdate}),b("React").createElement(b("StoriesSuspenseCardOverlays.react"),{card:c,owner:e}),b("React").createElement(b("StoriesCardHeader.react"),{card:c,owner:a.owner}),b("React").createElement(b("StoriesCardFooter.react"),{card:c,owner:a.owner}),i&&b("React").createElement(b("StoriesCardReactionPlaybackLayout.react"),{animations:f,card:c}))}e.exports=c(a,{animations:function(){return b("StoriesSuspenseCard_animations.graphql")},card:function(){return b("StoriesSuspenseCard_card.graphql")},owner:function(){return b("StoriesSuspenseCard_owner.graphql")}})}),null);
__d("StoriesSuspenseCardOptionMenuTrigger.react",["ix","fbt","requireDeferred","CometDeferredPopoverTrigger.react","CometIcon_DEPRECATED.react","React","StoriesRelay","StoriesConfirmationDialog.react","StoriesEnums","StoriesPauseReasons","StoriesTestID","StoriesViewerMenuButton.react","asset","stylex","StoriesSuspenseCardOptionMenuTrigger_card.graphql","StoriesSuspenseCardOptionMenuTrigger_owner.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;b("StoriesRelay").graphql;var k=b("StoriesRelay").useFragment,l=b("React").useState;b("StoriesEnums").STORIES_OPTION_TYPES;var m=b("requireDeferred")("StoriesSuspenseCardOptionMenu.react");function a(a){__p&&__p();var c=k(i||(i=function(){return b("StoriesSuspenseCardOptionMenuTrigger_card.graphql")}),a.card),d=k(j||(j=function(){return b("StoriesSuspenseCardOptionMenuTrigger_owner.graphql")}),a.owner),e=l(null),f=e[0],n=e[1];e=l(!1);var o=e[0],p=e[1];e=function(c){a.setPause(!0,b("StoriesPauseReasons").CONFIRMATION_DIALOG),n(c),p(!0)};var q=function(){a.setPause(!1,b("StoriesPauseReasons").CONFIRMATION_DIALOG),p(!1)},r=function(c){a.setPause(c,b("StoriesPauseReasons").MENU)},s=c==null?void 0:c.id;return b("React").createElement("div",{key:s},b("React").createElement(b("CometDeferredPopoverTrigger.react"),{align:"end",onVisibilityChange:r,popoverProps:{bucketID:a.bucketID,card:c,onClose:function(){},onShowOptionConfirmationDialog:e,owner:d,setPause:a.setPause},popoverResource:m,position:"below"},function(a,c){return b("React").createElement(b("StoriesViewerMenuButton.react"),{icon:b("React").createElement(b("CometIcon_DEPRECATED.react"),{asset:g("504028"),color:"fds-white",name:"option-circle",size:24,variant:"filled"}),label:h._("Menu Button"),onClick:c,ref:a,testid:b("StoriesTestID").VIEWER_OPTION_MENU_BUTTON})}),b("React").createElement("div",{className:"rk01pc8j pmk7jnqg"},b("React").createElement(b("StoriesConfirmationDialog.react"),{bucketID:(s=a.bucketID)!=null?s:"",card:c,onHide:q,optionType:f,owner:d,shown:o})))}e.exports=a}),null);
__d("StoriesSuspenseContuxActionsContext",["FBLogger","React"],(function(a,b,c,d,e,f){"use strict";a={cardIndexChanged:function(a){return b("FBLogger")("fbstories").warn("setCardIndex is using default, should override")},performBucketNavigation:function(a,c){return b("FBLogger")("fbstories").warn("performBucketNavigation is using default, should override")},performCardNavigation:function(a){return b("FBLogger")("fbstories").warn("performCardNavigation is using default, should override")},setLastCard:function(a){return b("FBLogger")("fbstories").warn("setLastCard is using default, should override")}};e.exports=b("React").createContext(a)}),null);
__d("StoriesSuspenseBucketTransitioningContext",["React"],(function(a,b,c,d,e,f){"use strict";a={isBucketTransitionInProgress:!1,setIsBucketTransitionInProgress:function(){}};e.exports=b("React").createContext(a)}),null);
__d("useStoriesSuspenseBucketChangeHandler",["React","StoriesLoggerContext","StoriesRelay","StoriesSuspenseBucketTransitioningContext","useStoriesSuspenseBucketChangeHandler_bucket.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("React").useContext,i=b("React").useEffect,j=b("React").useRef;b("StoriesRelay").graphql;var k=b("StoriesRelay").useFragment;function a(a,c,d){__p&&__p();var e=k(g||(g=function(){return b("useStoriesSuspenseBucketChangeHandler_bucket.graphql")}),a),f=e==null?void 0:e.id,l=j(null);a=h(b("StoriesLoggerContext"));var m=a.logger;a=h(b("StoriesSuspenseBucketTransitioningContext"));var n=a.setIsBucketTransitionInProgress,o=l.current!==f&&f!==null,p=l.current!==null&&o;i(function(){__p&&__p();function a(){var a,b;a=e==null?void 0:(a=e.unified_stories)==null?void 0:a.edges;a=a==null?[]:a.map(function(a){return a.node});var c=!!(e==null?void 0:e.is_bucket_seen_by_viewer),d=e==null?void 0:(b=e.first_story_to_show)==null?void 0:b.id;b=d===null||d===void 0;return c||b?0:Math.max(0,a.findIndex(function(a){return(a==null?void 0:a.id)===d}))}o&&((p||c===-1)&&d(a()),n(!1));l.current=f},[d,f,e,o,p,n]);i(function(){p&&m.openStoryLog()},[p,m])}e.exports=a}),null);
__d("useStoriesSuspenseContentDataSelectors",["React","StoriesRelay","StoriesSuspenseBucketDataContext","useStoriesSuspenseContentDataSelectors_bucket.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("React").useCallback,i=b("React").useContext;b("StoriesRelay").graphql;var j=b("StoriesRelay").useFragment;function a(a,c){__p&&__p();var d=i(b("StoriesSuspenseBucketDataContext"));d=d.bucketData;var e=d.isLastBucket,f=d.isFirstBucket;d=j(g||(g=function(){return b("useStoriesSuspenseContentDataSelectors_bucket.graphql")}),a);var k=d==null?void 0:d.unified_stories,l=(k==null?void 0:k.count)||0;return{getCardCount:h(function(){return l},[l]),getCurrentCardID:h(function(){var a;return k!=null?(a=k.edges[c])==null?void 0:(a=a.node)==null?void 0:a.id:null},[c,k]),isAfterLastCard:h(function(a){return a>=l},[l]),isBeforeFirstCard:h(function(a){return a<0},[]),isCurrentLastCard:h(function(){return c===l-1},[c,l]),isFirstCardInFirstBucket:h(function(a){return a<=0&&f},[f]),isLastCardInLastBucket:h(function(a){return!e?!1:a>=l-1},[l,e])}}e.exports=a}),null);
__d("useStoriesSuspenseCardIndexChangeHandler",["React","StoriesActorContext","StoriesEnums","StoriesLoggingConstants","StoriesRelay","StoriesSuspenseBucketDataContext","StoriesSuspenseContuxActionsContext","useStoriesSuspenseContentDataSelectors","useStoriesViewerClose","useStoriesSuspenseCardIndexChangeHandler_bucket.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("React").useContext,i=b("React").useEffect,j=b("React").useRef,k=b("StoriesEnums").NAV_DIRECTIONS,l=b("StoriesLoggingConstants").CLOSE_STORY_GESTURE;b("StoriesRelay").graphql;var m=b("StoriesRelay").useFragment;function a(a,c,d){__p&&__p();a=m(g||(g=function(){return b("useStoriesSuspenseCardIndexChangeHandler_bucket.graphql")}),a);var e=j(null),f=j(null),n=j(null),o=b("useStoriesViewerClose")(),p=h(b("StoriesSuspenseContuxActionsContext")),q=p.performBucketNavigation;p=h(b("StoriesActorContext"));var r=p.actorID;p=h(b("StoriesSuspenseBucketDataContext"));p=p.bucketData;var s=p.bucketID,t=p.isLastBucket;p=b("useStoriesSuspenseContentDataSelectors")(a,c);var u=p.getCardCount,v=p.getCurrentCardID,w=p.isAfterLastCard,x=p.isBeforeFirstCard,y=p.isCurrentLastCard,z=a==null?void 0:(p=a.story_bucket_owner)==null?void 0:p.id,A=u();i(function(){d(y())},[A,c,s,d,y]);i(function(){if(f.current!==c||e.current===s&&n.current!==A&&(z===r||A>0)){var a=v();w(c)?t&&A>0?o(l.AUTO_EXIT):q(k.NEXT_BUCKET):x(c)?q(k.PREV_BUCKET):a===null&&q(k.NEXT_BUCKET)}f.current=c;n.current=A;e.current=s},[r,s,z,A,c,v,w,x,t,q,o])}e.exports=a}),null);
__d("useStoriesSuspenseNavListItemTransitionListener",["React","StoriesLoggingConstants","StoriesLoggerContext","StoriesViewerSuspenseEventEmitterContext"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useContext,h=b("React").useEffect,i=b("StoriesLoggingConstants").NAVIGATION_GESTURE;function a(){var a=g(b("StoriesLoggerContext")),c=a.logger;a=g(b("StoriesViewerSuspenseEventEmitterContext"));var d=a.listenToNavListItemTransition;h(function(){return d(function(){c.storyNavigationLog(i.NAVIGATE_AWAY)})},[d,c])}e.exports=a}),null);
__d("StoriesSuspenseNullStateContext",["React"],(function(a,b,c,d,e,f){"use strict";a={setNullStateType:function(){}};e.exports=b("React").createContext(a)}),null);
__d("useStoriesSuspenseNullState",["QuickPerformanceLogger","React","StoriesActorContext","StoriesConstants","StoriesEnums","StoriesQuickLogModule","StoriesSuspenseNullStateContext"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useContext,h=b("React").useEffect,i=b("React").useRef,j=b("StoriesEnums").EMPTY_BUCKET_TYPES;function a(a,c,d){__p&&__p();var e=g(b("StoriesActorContext")),f=e.actorID;e=g(b("StoriesSuspenseNullStateContext"));var k=e.setNullStateType,l=i(null);h(function(){l.current!==a&&(l.current!=null&&a!==""&&k(null),l.current=a)},[a,k]);h(function(){if(c==null)k(j.UNSELECTED);else if(d===0){var a=c===f?j.SELF_BUCKET:j.FRIEND_BUCKET;b("QuickPerformanceLogger").markerPoint(b("StoriesQuickLogModule").STORY_VIEWER_LOAD_TTI_V2_WWW,"empty buckets");b("QuickPerformanceLogger").markerEnd(b("StoriesQuickLogModule").STORY_VIEWER_LOAD_TTI_V2_WWW,b("StoriesConstants").QPL.SUCCESS);k(a)}else k(null)},[f,d,c,k])}e.exports=a}),null);
__d("useStoriesSuspensePermalinkUpdater",["requireCond","React","StoriesRelay","cr:899180","useStoriesSuspensePermalinkUpdater_bucket.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("React").useEffect;b("StoriesRelay").graphql;var i=b("StoriesRelay").useFragment;function a(a,c){var d;a=i(g||(g=function(){return b("useStoriesSuspensePermalinkUpdater_bucket.graphql")}),a);d=(d=a==null?void 0:(d=a.unified_stories)==null?void 0:d.nodes)!=null?d:[];d=d[c];var e=d==null?void 0:d.id,f=a==null?void 0:a.id;h(function(){b("cr:899180")&&b("cr:899180").updateURL(f,e)},[f,e])}e.exports=a}),null);
__d("StoriesSuspenseBucketContainer.react",["CometHero.react","CometPlaceholder.react","React","StoriesRelay","StoriesCardHeader.react","StoriesLoggingConstants","StoriesSuspenseBucketDataContext","StoriesSuspenseBucketLoadingView.react","StoriesSuspenseCardOptionMenuTrigger.react","StoriesSuspenseCard.react","StoriesMuteButton.react","StoriesPauseButton.react","StoriesProgressBar.react","StoriesSuspenseContuxActionsContext","StoriesSuspenseContuxContext","StoriesSuspensePauseContext","StoriesEnums","StoriesViewerMenu.react","storiesUpdateSeenStateMutation","useStoriesSuspenseNavListItemTransitionListener","useStoriesViewerClose","stylex","useStoriesSuspenseNullState","useStoriesSuspenseBucketChangeHandler","useStoriesSuspenseCardIndexChangeHandler","useStoriesSuspensePermalinkUpdater","useStoriesBehaviorHelpers","StoriesSuspenseBucketContainer_bucket.graphql","StoriesSuspenseBucketContainer_animations.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("StoriesRelay").graphql;var h=b("StoriesRelay").useFragment,i=b("StoriesRelay").useRelayEnvironment,j=b("React").useState,k=b("React").useContext,l=b("StoriesEnums").NAV_DIRECTIONS,m=null,n=function(){return b("StoriesSuspenseBucketContainer_bucket.graphql")};function a(a){__p&&__p();var c,d,e=h(n,a.bucket),f=b("useStoriesViewerClose")(),p=i(),q=b("useStoriesBehaviorHelpers")(e);q=q.isSelfStory;a=h(g||(g=function(){return b("StoriesSuspenseBucketContainer_animations.graphql")}),a.animations);var r=j(null),s=r[0];r=r[1];c=j((c=m)!=null?c:!1);var t=c[0],u=c[1];c=k(b("StoriesSuspensePauseContext"));var v=c.isPaused;c=c.setPause;var w=b("React").useContext(b("StoriesSuspenseContuxActionsContext")),x=w.performCardNavigation,y=w.cardIndexChanged;w=w.setLastCard;var z=b("React").useContext(b("StoriesSuspenseContuxContext")),A=z.cardIndex,B=z.isLastCard;z=b("React").useContext(b("StoriesSuspenseBucketDataContext"));z=z.bucketData;var C=z.bucketID,D=z.isLastBucket;z=function(){B&&D?f(b("StoriesLoggingConstants").CLOSE_STORY_GESTURE.AUTO_EXIT):x(l.NEXT_CARD,b("StoriesLoggingConstants").NAVIGATION_GESTURE.AUTO_JUMP)};var E=e==null?void 0:e.owner,F=(d=e==null?void 0:e.is_bucket_seen_by_viewer)!=null?d:B,G=new o(e,A);d=G.getCardAtCurrentIndex();var H=G.getCount(),I=d==null?void 0:d.id,J=E==null?void 0:E.id,K=function(){if(C!=null&&I!=null){var a;b("storiesUpdateSeenStateMutation")(p,C,I,F?(a=G.getFirstCard())==null?void 0:a.id:(a=G.getNextCard())==null?void 0:a.id,F)}};b("useStoriesSuspenseNavListItemTransitionListener")();b("useStoriesSuspenseNullState")(C,J,H);b("useStoriesSuspenseBucketChangeHandler")(e,A,y);b("useStoriesSuspenseCardIndexChangeHandler")(e,A,w);b("useStoriesSuspensePermalinkUpdater")(e,A);return d==null?b("React").createElement("div",{className:"k4urcfbm l9j0dhe7 datstx6m",key:C},b("React").createElement(b("StoriesSuspenseBucketLoadingView.react"),null)):b("React").createElement("div",{className:"k4urcfbm l9j0dhe7 datstx6m",key:C},b("React").createElement(b("CometPlaceholder.react"),{fallback:b("React").createElement(b("StoriesCardHeader.react"),{card:d,owner:E})},b("React").createElement(b("CometHero.react"),{description:"StoriesCard"}),b("React").createElement("div",{className:"k4urcfbm datstx6m"},b("React").createElement(b("StoriesSuspenseCard.react"),{animations:a,card:d,isMuted:t,isSelfStory:q(),onSeen:K,onTimerSourceUpdate:r,owner:E}),b("React").createElement(b("StoriesViewerMenu.react"),null,b("React").createElement(b("StoriesPauseButton.react"),{isPaused:v,key:C,setPause:c}),b("React").createElement(b("StoriesMuteButton.react"),{isMuted:t,onMuteChanged:function(a){u(a),m=a}}),b("React").createElement(b("StoriesSuspenseCardOptionMenuTrigger.react"),{bucketID:C,card:d,owner:E,setPause:c}))),b("React").createElement(b("StoriesProgressBar.react"),{cardCount:G.getCount(),cardTimerSource:s,currentCardIndex:A,isPaused:v,onDone:z})))}var o=function(){__p&&__p();function a(a,b){this.$1=null,this.$2=-1,this.$1=a,this.$2=b}var b=a.prototype;b.getCount=function(){return this.$3().length};b.getCardAtCurrentIndex=function(){var a;return(a=this.$3()[Math.max(Math.min(this.$2,this.getCount()-1),0)])==null?void 0:a.node};b.getNextCard=function(){var a;return(a=this.$3()[this.$2+1])==null?void 0:a.node};b.getFirstCard=function(){var a;return(a=this.$3()[0])==null?void 0:a.node};b.$3=function(){var a;return((a=this.$1)==null?void 0:(a=a.unified_stories)==null?void 0:a.edges)||[]};return a}();e.exports=a}),null);
__d("StoriesSuspenseCardSwap.react",["CometPlaceholder.react","React","StoriesBucketContainer.react","addTransitionEndListener","stylex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useState,h=b("React").useLayoutEffect,i=b("React").useRef,j=b("React").useEffect,k=300;function a(a){__p&&__p();var c=a.direction,d=a.slide,e=a.duration,f=a.bucketID,l=a.onTransitionEnd,m=a.onTransitionBegin;a=g(!1);var n=a[0],o=a[1],p=i(null),q=i(null),r=i(null),s=i(null),t=i(null),u=r.current!==f&&r.current!==null,v=!n&&u,w=e!=null?e:k;j(function(){r.current=f},[f]);h(function(){__p&&__p();v&&(q.current!==null&&window.cancelAnimationFrame(q.current),s.current!==null&&s.current(),t.current!==null&&window.clearTimeout(t.current),q.current=window.requestAnimationFrame(function(){var a=p.current;if(a===null)return;o(!0);u&&m();var c=function(){t.current!==null&&(window.clearTimeout(t.current),t.current=null),s.current!==null&&(s.current(),s.current=null),o(!1),l()};s.current=b("addTransitionEndListener")(a,c);t.current=window.setTimeout(c,w+100)}))});a=v?c==="next"?"p1z4y1cs k4urcfbm kr520xx4 j9ispegn pmk7jnqg ggxiycxj hihg3u9x datstx6m n7fi1qx3 i09qtzwb gdny1k8l b5wmifdl":"p1z4y1cs k4urcfbm kr520xx4 j9ispegn pmk7jnqg ggxiycxj hihg3u9x datstx6m n7fi1qx3 i09qtzwb nyllqdpa b5wmifdl":"p1z4y1cs k4urcfbm kr520xx4 j9ispegn pmk7jnqg ggxiycxj hihg3u9x datstx6m n7fi1qx3 i09qtzwb agkhgkm8 pedkr2u6";e=n?{transition:["opacity "+w+"ms  ease","transform "+w+"ms  ease"].join(", ")}:{transition:"none"};c=b("React").createElement("div",{className:a,ref:function(a){return p.current=a},style:e},d);return b("React").createElement("div",{className:"k4urcfbm l9j0dhe7 ggxiycxj hihg3u9x datstx6m"},c)}e.exports=a}),null);
__d("StoriesSuspenseBucketTransitionView.react",["CometPlaceholder.react","React","StoriesRelay","StoriesConstants","StoriesEnums","StoriesPauseReasons","StoriesSuspenseBucketContainer.react","StoriesSuspenseBucketDataContext","StoriesSuspenseBucketLoadingView.react","StoriesSuspenseCardSwap.react","StoriesSuspensePauseContext","stylex","useStoriesViewerDimensions","StoriesSuspenseBucketTransitionView_bucket.graphql","StoriesSuspenseBucketTransitionView_LWRAnimations.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("StoriesRelay").graphql;var h=b("StoriesRelay").useFragment,i=b("React").useContext,j=b("React").useMemo,k=b("StoriesConstants").TRANSITION_DURATION_MS,l=b("StoriesEnums").NAV_DIRECTIONS,m=function(){return b("StoriesSuspenseBucketTransitionView_bucket.graphql")};function a(a){__p&&__p();var c=a.animations,d=a.bucket,e=a.bucketID,f=h(m,d),n=h(g||(g=function(){return b("StoriesSuspenseBucketTransitionView_LWRAnimations.graphql")}),c);a=b("useStoriesViewerDimensions")();d=i(b("StoriesSuspensePauseContext"));var o=d.setPause;c=i(b("StoriesSuspenseBucketDataContext"));var p=c.bucketNavDirection,q=j(function(){return b("React").createElement(b("CometPlaceholder.react"),{fallback:b("React").createElement(b("StoriesSuspenseBucketLoadingView.react"),null)},b("React").createElement(b("StoriesSuspenseBucketContainer.react"),{animations:n,bucket:f}))},[n,f]);d=j(function(){return b("React").createElement(b("StoriesSuspenseCardSwap.react"),{bucketID:e,direction:p===l.NEXT_BUCKET?"next":"prev",duration:k,onTransitionBegin:function(){return o(!0,b("StoriesPauseReasons").BUCKET_TRANSITION)},onTransitionEnd:function(){o(!1,b("StoriesPauseReasons").BUCKET_TRANSITION)},slide:q})},[q,e,p,o]);c=d;return b("React").createElement("div",{className:"dzlist6r msbwk0y7 pnx7fd3z ms05siws l9j0dhe7 stjgntxs ni8dbmo4 puxov6c6 r893ighp ozuftl9m n851cfcs tvfksri0 n1l5q3vz btwxx1t3 j83agx80 ptt86dso g5ia77u1",style:a},c)}e.exports=b("React").memo(a)}),null);
__d("StoriesSuspenseViewerSheetPreviewTray.react",["React","StoriesLoggingConstants","StoriesRelay","StoriesSuspenseContuxActionsContext","StoriesSuspenseContuxContext","StoriesViewerSheetPreviewAddStory.react","StoriesViewerSheetSection.react","StoriesViewerSheetStoryPreview.react","stylex","useStoriesBehaviorHelpers","StoriesSuspenseViewerSheetPreviewTray_bucket.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("StoriesRelay").graphql;var h=b("StoriesRelay").useFragment,i=132,j=99,k=1.15152,l=12;function a(a){__p&&__p();a=a.bucket;a=h(g||(g=function(){return b("StoriesSuspenseViewerSheetPreviewTray_bucket.graphql")}),a);var c=b("React").useContext(b("StoriesSuspenseContuxActionsContext")),d=c.cardIndexChanged;c=b("React").useContext(b("StoriesSuspenseContuxContext"));var e=c.cardIndex;c=b("useStoriesBehaviorHelpers")(a);c=c.canAddToStory;var f=function(a,c){if(a)return;d(c,b("StoriesLoggingConstants").NAVIGATION_GESTURE.VIEWER_SHEET)};a=a==null?void 0:(a=a.unified_stories)==null?void 0:a.edges;a=a==null?null:a.map(function(a){return a.node});if(a==null)return null;var m=e>1?-(e-1)*(j+l):0;return b("React").createElement(b("StoriesViewerSheetSection.react"),null,b("React").createElement("div",{className:"ejg0drik heur4gxb flx89l3n dpja2al7 l9j0dhe7 tw6a2znq jbae33se d1544ag0 bjjx79mm py5xhhw8 j83agx80 bp9cbjyn",style:{transform:"translateX("+m+"px)"}},a.map(function(a,c){if(a==null)return null;var d=c===e;return b("React").createElement("div",{className:"tvfksri0",key:c},b("React").createElement(b("StoriesViewerSheetStoryPreview.react"),{activeScale:k,height:i,index:c,isActive:d,onClick:f,storyPreview:a,width:j}))}),c()&&b("React").createElement("div",{className:"tvfksri0"},b("React").createElement(b("StoriesViewerSheetPreviewAddStory.react"),{height:i,width:j}))))}e.exports=a}),null);
__d("StoriesSuspenseViewerSheetPageStoryContent.react",["fbt","React","StoriesEnums","StoriesRelay","StoriesSuspenseViewerSheetPreviewTray.react","StoriesViewerSheetHeader.react","StoriesViewerSheetInsightsNullState.react","StoriesViewerSheetPollResult.react","StoryViewerSheetInsights.react","stylex","StoriesSuspenseViewerSheetPageStoryContent_bucket.graphql","StoriesSuspenseViewerSheetPageStoryContent_card.graphql"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=b("StoriesEnums").STORY_OVERLAY_TYPES;b("StoriesRelay").graphql;var k=b("StoriesRelay").useFragment;function a(a){__p&&__p();var c,d,e=a.bucket;a=a.card;e=k(h||(h=function(){return b("StoriesSuspenseViewerSheetPageStoryContent_bucket.graphql")}),e);a=k(i||(i=function(){return b("StoriesSuspenseViewerSheetPageStoryContent_card.graphql")}),a);c=a==null?void 0:(c=a.story_card_seen_state)==null?void 0:(c=c.followersSeenCount)==null?void 0:c.count;d=(d=a==null?void 0:a.story_overlays)!=null?d:[];d=d.find(function(a){return a.__typename===j.POLL_STICKER});var f=b("React").createElement(b("StoriesViewerSheetHeader.react"),null,g._("Insights"));return c==null||c===0?b("React").createElement("div",{className:"e9vueds3 nhd2j8a9"},f,b("React").createElement(b("StoriesSuspenseViewerSheetPreviewTray.react"),{bucket:e}),b("React").createElement(b("StoriesViewerSheetInsightsNullState.react"),null)):b("React").createElement("div",{className:"e9vueds3 nhd2j8a9"},f,b("React").createElement(b("StoriesSuspenseViewerSheetPreviewTray.react"),{bucket:e}),b("React").createElement(b("StoryViewerSheetInsights.react"),{card:a}),b("React").createElement(b("StoriesViewerSheetPollResult.react"),{overlayPoll:d,showVoterList:!1}))}e.exports=a}),null);
__d("StoriesSuspenseViewerSheetViewerList.react",["React","StoriesRelay","StoriesSuspensePauseContext","StoriesViewerSheetSection.react","StoriesViewerSheetViewerListContent.react","StoriesViewerSheetViewerListHeader.react","storiesUpdateStorySeenReceiptsLastSeenTimeMutation","usePrevious","StoriesSuspenseViewerSheetViewerList_card.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("React").useContext,i=b("React").useEffect;b("StoriesRelay").graphql;var j=b("StoriesRelay").useFragment,k=b("StoriesRelay").useRelayEnvironment;function a(a){__p&&__p();a=a.card;var c=k(),d=h(b("StoriesSuspensePauseContext"));d=d.setPause;a=j(g||(g=function(){return b("StoriesSuspenseViewerSheetViewerList_card.graphql")}),a);var e=a==null?void 0:a.id,f=b("usePrevious")(e);i(function(){f!==e&&e!==""&&f!==""&&f!=null&&b("storiesUpdateStorySeenReceiptsLastSeenTimeMutation")(c,f);return function(){e!==""&&e!=null&&b("storiesUpdateStorySeenReceiptsLastSeenTimeMutation")(c,e)}});return e==null?null:b("React").createElement(b("StoriesViewerSheetSection.react"),{showSectionLine:!1},b("React").createElement(b("StoriesViewerSheetViewerListHeader.react"),{cardSeenState:a}),b("React").createElement(b("StoriesViewerSheetViewerListContent.react"),{cardID:e,setPause:d,viewerList:a}))}e.exports=a}),null);
__d("StoriesSuspenseViewerSheetSelfStoryContent.react",["React","StoriesEnums","StoriesRelay","StoriesSuspenseViewerSheetPreviewTray.react","StoriesSuspenseViewerSheetViewerList.react","StoriesViewerSheetHeader.react","StoriesViewerSheetPollResult.react","stylex","StoriesSuspenseViewerSheetSelfStoryContent_bucket.graphql","StoriesSuspenseViewerSheetSelfStoryContent_card.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h,i=b("StoriesEnums").STORY_OVERLAY_TYPES;b("StoriesRelay").graphql;var j=b("StoriesRelay").useFragment;function a(a){__p&&__p();var c,d=a.bucket;a=a.card;d=j(g||(g=function(){return b("StoriesSuspenseViewerSheetSelfStoryContent_bucket.graphql")}),d);a=j(h||(h=function(){return b("StoriesSuspenseViewerSheetSelfStoryContent_card.graphql")}),a);c=(c=a==null?void 0:a.story_overlays)!=null?c:[];c=c.find(function(a){return a.__typename===i.POLL_STICKER});return b("React").createElement("div",{className:"e9vueds3 nhd2j8a9"},b("React").createElement(b("StoriesViewerSheetHeader.react"),null),b("React").createElement(b("StoriesSuspenseViewerSheetPreviewTray.react"),{bucket:d}),b("React").createElement(b("StoriesViewerSheetPollResult.react"),{overlayPoll:c}),b("React").createElement(b("StoriesSuspenseViewerSheetViewerList.react"),{card:a}))}e.exports=a}),null);
__d("StoriesSuspenseViewerSheet.react",["CometScrollableArea.react","React","StoriesLoggerContext","StoriesRelay","StoriesSuspenseBucketTransitioningContext","StoriesSuspenseContuxContext","StoriesSuspensePauseOnHoverContainer.react","StoriesSuspenseViewerSheetPageStoryContent.react","StoriesSuspenseViewerSheetSelfStoryContent.react","StoriesTestID","StoriesViewerSheetTypes","stylex","useStoriesBehaviorHelpers","StoriesSuspenseViewerSheet_bucket.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("StoriesRelay").graphql;var h=b("StoriesRelay").useFragment,i=b("React").useContext,j=b("React").useLayoutEffect,k=b("React").useRef,l={container:{height:"datstx6m"},root:{backgroundColor:"cwj9ozl2",height:"datstx6m",width:"k4urcfbm"}};function a(a){__p&&__p();var c=a.bucket,d=a.toggleViewerSheet,e=h(g||(g=function(){return b("StoriesSuspenseViewerSheet_bucket.graphql")}),c);a=i(b("StoriesSuspenseContuxContext"));var f=a.cardIndex;c=i(b("StoriesLoggerContext"));var m=c.logger;a=i(b("StoriesSuspenseBucketTransitioningContext"));var n=a.isBucketTransitionInProgress;c=b("useStoriesBehaviorHelpers")(e);a=c.canSeeViewerSheet;c=c.whichViewerSheet;var o=function(){return q().length},p=function(){return o()>0},q=function(){var a;return(e==null?void 0:(a=e.unified_stories)==null?void 0:a.edges)||[]},r=function(){if(f<0)return null;var a=q();return f>a.length-1?null:(a=a[f])==null?void 0:a.node},s=a()&&p();a=r();var t=a==null?void 0:a.id,u=k(null),v=k(null),w=k(null);j(function(){__p&&__p();d(s);var a=u.current!==t&&t!==""&&t!=null;if(!n&&a){s&&m.openViewerSheetLog();if(v.current&&s){a=(a=v.current.children)==null?void 0:a[0];a&&(w.current=a.cloneNode(!0))}u.current=t}},[s,d,t,m,n,f]);p=null;switch(c()){case b("StoriesViewerSheetTypes").PAGE_STORY_VIEWERSHEET:p=b("React").createElement(b("StoriesSuspenseViewerSheetPageStoryContent.react"),{bucket:e,card:a});break;case b("StoriesViewerSheetTypes").SELF_STORY_VIEWERSHEET:p=b("React").createElement(b("StoriesSuspenseViewerSheetSelfStoryContent.react"),{bucket:e,card:a});break;default:p=b("React").createElement("div",{dangerouslySetInnerHTML:{__html:(c=(r=w.current)==null?void 0:r.outerHTML)!=null?c:""}})}return b("React").createElement(b("StoriesSuspensePauseOnHoverContainer.react"),null,b("React").createElement("div",{className:b("stylex")(l.root),"data-testid":b("StoriesTestID").VIEWER_SHEET},b("React").createElement(b("CometScrollableArea.react"),{vertical:!0,xstyle:l.container},b("React").createElement("span",{ref:function(a){return v.current=a}},p))))}e.exports=a}),null);
__d("StoriesSuspenseViewerSheetPlaceholder.react",["BaseGlimmer.react","CometStoriesListItemGlimmer.react","React","StoriesViewerSheetSection.react","stylex"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useEffect;function a(a){var c=a.toggleViewerSheet;g(function(){c(!1)},[c]);a=[].concat(Array(3).keys()).map(function(a){return b("React").createElement(b("BaseGlimmer.react"),{className:"tuwtu1qs tvfksri0 ijttq3ge",index:a})});return b("React").createElement("div",{className:"k4urcfbm datstx6m g5ijobay"},b("React").createElement(b("StoriesViewerSheetSection.react"),{showSectionLine:!0},b("React").createElement("div",{className:"tw6a2znq qt6c0cv9 d1544ag0 t15fza0o"},b("React").createElement(b("BaseGlimmer.react"),{className:"gjzvkazv jnigpg78",index:0})),b("React").createElement("div",{className:"tw6a2znq jbae33se d1544ag0 bjjx79mm j83agx80 bp9cbjyn"},a)),b("React").createElement(b("StoriesViewerSheetSection.react"),{showSectionLine:!1},b("React").createElement("div",{className:"tw6a2znq qt6c0cv9 d1544ag0 t15fza0o"},b("React").createElement(b("BaseGlimmer.react"),{className:"gjzvkazv jnigpg78",index:0})),b("React").createElement(b("CometStoriesListItemGlimmer.react"),{isViewerSheet:!0,numberOfItems:6})))}e.exports=a}),null);
__d("StoriesSuspenseContentSlidingTransition.react",["requireCond","CometPlaceholder.react","Locale","React","StoriesRelay","StoriesCloseButton.react","StoriesSuspensePauseContext","StoriesSuspenseViewerSheet.react","StoriesSuspenseViewerSheetPlaceholder.react","cr:1032347","stylex","StoriesSuspenseContentSlidingTransition_bucket.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("StoriesRelay").graphql;var h=b("StoriesRelay").useFragment,i=b("React").useCallback,j=b("Locale").isRTL();function a(a){__p&&__p();var c=a.bucket;a=a.children;var d=b("React").useState(!1),e=d[0],f=d[1];d=b("React").useContext(b("StoriesSuspensePauseContext"));d=d.setPause;c=h(g||(g=function(){return b("StoriesSuspenseContentSlidingTransition_bucket.graphql")}),c);var k=i(function(){return b("React").createElement("div",{className:"o36gj0jk datstx6m"},b("React").createElement(b("StoriesSuspenseViewerSheetPlaceholder.react"),{toggleViewerSheet:f}))},[f]);return b("React").createElement("div",{className:b("stylex").dedupe(e&&j?{"transform-0.1":"q6kczzvv"}:{},e&&!j?{"transform-0.1":"jjsq51tz"}:null,e===!1?{"transform-0.1":"qiw3t3sk"}:null,{"display-1":"j83agx80","height-1":"datstx6m","width-1":"k4urcfbm"},{"transition-delay-1":"i1mrkscp","transition-duration-1":"dpja2al7","transition-property-1":"flx89l3n","transition-timing-function-1":"msbwk0y7","will-change-1":"ejg0drik"})},a,b("React").createElement("div",{className:b("stylex").dedupe({"transition-delay-1":"i1mrkscp","transition-duration-1":"dpja2al7","transition-property-1":"flx89l3n","transition-timing-function-1":"msbwk0y7","will-change-1":"ejg0drik"},e&&j?{"transform-0.1":"q6kczzvv"}:null,e&&!j?{"transform-0.1":"jjsq51tz"}:null,e===!1?{"transform-0.1":"qiw3t3sk"}:null)},b("React").createElement(b("StoriesCloseButton.react"),null),b("cr:1032347")&&b("React").createElement(b("cr:1032347"),{setPause:d})),b("React").createElement("div",{className:b("stylex").dedupe({"end-1":"s2y2oui8","height-1":"datstx6m","position-1":"pmk7jnqg","top-1":"kr520xx4","transform-0.1":"qiw3t3sk","transition-delay-1":"i1mrkscp","transition-duration-1":"dpja2al7","transition-property-1":"flx89l3n","transition-timing-function-1":"msbwk0y7","width-1":"o36gj0jk","will-change-1":"ejg0drik"},e&&j?{"transform-0.1":"q6kczzvv"}:null,e&&!j?{"transform-0.1":"jjsq51tz"}:null,e===!1?{"transform-0.1":"qiw3t3sk"}:null)},b("React").createElement(b("CometPlaceholder.react"),{fallback:b("React").createElement(k,null)},b("React").createElement(b("StoriesSuspenseViewerSheet.react"),{bucket:c,toggleViewerSheet:f}))))}e.exports=a}),null);
__d("StoriesSuspenseEmptyBucketError.react",["ix","fbt","CometIcon_DEPRECATED.react","CometUnstyledButton.react","React","StoriesCloseButton.react","StoriesEnums","StoriesGating","StoriesSuspenseBucketDataContext","StoriesSuspenseContuxActionsContext","TetraIcon.react","TetraText.react","asset","fbicon","stylex","useOpenComposer"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("React").useContext,j=b("StoriesEnums").EMPTY_BUCKET_TYPES,k=b("StoriesEnums").NAV_DIRECTIONS;a=function(a){var c=h._("This Story is Empty"),d=h._("Photos and videos shared in stories are only visible for 24 hours after they've been added"),e=null;switch(a.emptyBucketType){case j.FRIEND_BUCKET:e=b("React").createElement(l,null);break;case j.SELF_BUCKET:b("StoriesGating").isAddToStoryEnabled()&&(e=b("React").createElement(m,null));break}return b("React").createElement("div",{className:"k4urcfbm ni8dbmo4 q10oee1b taijpn5t datstx6m cbu4d94t j83agx80 g6srhlxm bp9cbjyn"},b("React").createElement(b("StoriesCloseButton.react"),{dark:!0}),b("React").createElement("span",{"aria-hidden":!0,className:"ofv0k9yr"},b("React").createElement(b("CometIcon_DEPRECATED.react"),{align:"text-bottom",asset:g("803962"),color:"fds-secondary-icon",name:"stories",size:112,variant:"outline"})),b("React").createElement("span",{className:"oqcyycmt ofv0k9yr"},b("React").createElement(b("TetraText.react"),{type:"headline3"},c)),b("React").createElement("span",{className:"oqcyycmt ofv0k9yr oh7imozk"},b("React").createElement(b("TetraText.react"),{type:"headline4"},d)),e)};var l=function(){__p&&__p();var a=i(b("StoriesSuspenseBucketDataContext"));a=a.bucketData;var c=a.isLastBucket;a=a.bucketIndex;var d=i(b("StoriesSuspenseContuxActionsContext")),e=d.performBucketNavigation;d=function(){};var f=null,j=null;c&&a>0?(d=function(){return e(k.PREV_BUCKET)},f=b("React").createElement(b("TetraIcon.react"),{color:"white",icon:b("fbicon")._(g("541301"),20)}),j=h._("Previous Story")):c||(d=function(){return e(k.NEXT_BUCKET)},f=b("React").createElement(b("TetraIcon.react"),{color:"white",icon:b("fbicon")._(g("541286"),20)}),j=h._("Next Story"));return j===null?null:b("React").createElement(b("CometUnstyledButton.react"),{onClick:d},b("React").createElement("div",{className:"e6erh6tl taijpn5t qypqp5cg j83agx80 enl131ya s1i5eluu bp9cbjyn"},f,b("React").createElement("div",{className:"h676nmdw j83agx80 bwm1u5wc"},b("React").createElement(b("TetraText.react"),{color:"white",type:"button2"},j))))},m=function(){var a=b("useOpenComposer")();return b("React").createElement(b("CometUnstyledButton.react"),{onClick:a},b("React").createElement("div",{className:"e6erh6tl taijpn5t qypqp5cg j83agx80 enl131ya s1i5eluu bp9cbjyn"},b("React").createElement(b("TetraIcon.react"),{color:"white",icon:b("fbicon")._(g("481775"),20)}),b("React").createElement("div",{className:"h676nmdw j83agx80 bwm1u5wc"},b("React").createElement(b("TetraText.react"),{color:"white",type:"button1"},h._("Add to Your Story")))))};e.exports=a}),null);
__d("useStoriesSuspenseBucketSelectors",["StoriesRelay","useStoriesSuspenseBucketSelectors_bucket.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("StoriesRelay").graphql;var h=b("StoriesRelay").useFragment;function a(a){__p&&__p();var c=h(g||(g=function(){return b("useStoriesSuspenseBucketSelectors_bucket.graphql")}),a),d=function(){var a;return(c==null?void 0:(a=c.unified_stories)==null?void 0:a.edges)||[]},e=function(){return d().length};a=function(){return e()>0};var f=function(a){if(a<0)return null;return a>e()-1?null:(a=d()[a])==null?void 0:a.node};return{getCardID:function(a){return((a=f(a))==null?void 0:a.id)||""},getCount:e,hasCards:a}}e.exports=a}),null);
__d("StoriesSuspenseFeedback.react",["PageStoriesFeedback.react","React","StoriesEnums","StoriesFeedback.react","StoriesRelay","StoriesSuspenseContuxContext","StoriesSuspensePauseContext","useStoriesSuspenseBucketSelectors","StoriesSuspenseFeedback_bucket.graphql","StoriesSuspenseFeedback_LWRAnimations.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h,i=b("StoriesEnums").STORY_CARD_TYPES;b("StoriesRelay").graphql;var j=b("StoriesRelay").useFragment;function a(a){__p&&__p();var c=a.bucket;a=a.LWRAnimations;c=j(g||(g=function(){return b("StoriesSuspenseFeedback_bucket.graphql")}),c);a=j(h||(h=function(){return b("StoriesSuspenseFeedback_LWRAnimations.graphql")}),a);var d=b("React").useContext(b("StoriesSuspenseContuxContext"));d=d.cardIndex;var e=b("React").useContext(b("StoriesSuspensePauseContext"));e=e.setPause;var f=b("useStoriesSuspenseBucketSelectors")(c);f=f.getCardID(d);return(c==null?void 0:c.story_bucket_type)===i.PAGE_STORY||(c==null?void 0:c.story_bucket_type)===i.SHARED_PAGE_STORY?b("React").createElement(b("PageStoriesFeedback.react"),{LWRAnimations:a,cardID:f,owner:c==null?void 0:c.owner,setPause:e}):b("React").createElement(b("StoriesFeedback.react"),{LWRAnimations:a,bucket:c,cardID:f,setPause:e})}e.exports=a}),null);
__d("StoriesSuspenseKeyboardContext",["React"],(function(a,b,c,d,e,f){"use strict";a={addSubscriber:function(){return function(){}}};e.exports=b("React").createContext(a)}),null);
__d("useStoriesSuspenseKeyHandler",["CometKeys","React","StoriesEnums","StoriesLoggingConstants","StoriesPauseReasons","StoriesSuspenseContuxActionsContext","StoriesSuspenseKeyboardContext","StoriesSuspensePauseContext","useStoriesViewerClose"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useCallback,h=b("React").useContext,i=b("React").useEffect,j=b("React").useRef,k=b("StoriesEnums").NAV_DIRECTIONS,l=b("StoriesLoggingConstants").CLOSE_STORY_GESTURE;function a(){__p&&__p();var a=j(null),c=h(b("StoriesSuspenseKeyboardContext")),d=c.addSubscriber;c=h(b("StoriesSuspenseContuxActionsContext"));var e=c.performCardNavigation,f=c.performBucketNavigation;c=h(b("StoriesSuspensePauseContext"));var m=c.setPause,n=c.isPaused,o=b("useStoriesViewerClose")(),p=g(function(a){__p&&__p();switch(a.key){case b("CometKeys").LEFT:case b("CometKeys").UP:a.shift===!0?f(k.PREV_BUCKET):e(k.PREV_CARD,b("StoriesLoggingConstants").NAVIGATION_GESTURE.TAP_BACKWARD);break;case b("CometKeys").RIGHT:case b("CometKeys").DOWN:a.shift===!0?f(k.NEXT_BUCKET):e(k.NEXT_CARD,b("StoriesLoggingConstants").NAVIGATION_GESTURE.TAP_FORWARD);break;case b("CometKeys").SPACE:m(!n,b("StoriesPauseReasons").KEYBOARD);break;case b("CometKeys").ESCAPE:m(!0,b("StoriesPauseReasons").VISIBILITY_CHANGE);o(l.KEYBOARD_EXIT);break}},[o,n,f,e,m]);i(function(){var b=function(){a.current&&a.current()};b();a.current=d(p);return b},[d,p])}e.exports=a}),null);
__d("StoriesSuspenseNavigationButtons.react",["React","StoriesEnums","StoriesLoggingConstants","StoriesNavigationButton.react","StoriesSuspenseBucketDataContext","StoriesSuspenseContuxActionsContext","StoriesSuspenseContuxContext","stylex","useStoriesSuspenseKeyHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("StoriesEnums").NAV_DIRECTIONS;function a(a){__p&&__p();a=a.children;var c=b("React").useContext(b("StoriesSuspenseContuxContext")),d=c.isFirstCard;c=c.isLastCard;b("useStoriesSuspenseKeyHandler")();var e=b("React").useContext(b("StoriesSuspenseBucketDataContext"));e=e.bucketData;var f=e.isLastBucket;e=e.isFirstBucket;var h=b("React").useContext(b("StoriesSuspenseContuxActionsContext")),i=h.performCardNavigation;return b("React").createElement("div",{className:"taijpn5t datstx6m btwxx1t3 j83agx80 bp9cbjyn"},b("React").createElement(b("StoriesNavigationButton.react"),{direction:d?g.PREV_BUCKET:g.PREV_CARD,disabled:e&&d,key:"prev",onClick:function(){return i(g.PREV_CARD,b("StoriesLoggingConstants").NAVIGATION_GESTURE.TAP_BACKWARD)}}),a,b("React").createElement(b("StoriesNavigationButton.react"),{direction:c?g.NEXT_BUCKET:g.NEXT_CARD,disabled:f&&c,key:"next",onClick:function(){return i(g.NEXT_CARD,b("StoriesLoggingConstants").NAVIGATION_GESTURE.TAP_FORWARD)}}))}e.exports=a}),null);
__d("useStoriesSuspensePause",["requireCond","React","StoriesLoggerContext","StoriesPauseReasons","StoriesViewerSuspenseEventEmitterContext","Visibility","cr:809608"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useCallback,h=b("React").useContext,i=b("React").useEffect,j=b("React").useRef,k=b("React").useState;function a(){__p&&__p();var a=k(!1),c=a[0],d=a[1];a=h(b("StoriesLoggerContext"));var e=a.logger,f=j({});a=h(b("StoriesViewerSuspenseEventEmitterContext"));var l=a.listenToPauseRequest,m=g(function(a,c){a?(f.current[c]=!0,d(a),e.pauseLog(!0,c)):(c===b("StoriesPauseReasons").CLICK_PAUSE_ICON||c===b("StoriesPauseReasons").KEYBOARD||c===b("StoriesPauseReasons").BUCKET_TRANSITION?f.current={}:delete f.current[c],Object.keys(f.current).length===0&&(d(!1),e.pauseLog(!1,c)))},[e]);i(function(){return l(function(){return m.apply(void 0,arguments)})},[m,l]);i(function(){if(b("cr:809608")==null)return;var a=b("cr:809608")({onJewelHidden:function(){m(!1,b("StoriesPauseReasons").JEWEL)},onJewelShown:function(){m(!0,b("StoriesPauseReasons").JEWEL)}});return a},[m]);i(function(){var a=[b("Visibility").addListener(b("Visibility").HIDDEN,function(){return m(!0,b("StoriesPauseReasons").VISIBILITY_CHANGE)}),b("Visibility").addListener(b("Visibility").VISIBLE,function(){return m(!1,b("StoriesPauseReasons").VISIBILITY_CHANGE)})];return function(){a.forEach(function(a){return a.remove()})}},[m]);return[c,m]}e.exports=a}),null);
__d("StoriesSuspensePauseContextProvider.react",["React","StoriesSuspensePauseContext","useStoriesSuspensePause"],(function(a,b,c,d,e,f){"use strict";function a(a){a=a.children;var c=b("useStoriesSuspensePause")(),d=c[0];c=c[1];return b("React").createElement(b("StoriesSuspensePauseContext").Provider,{value:{isPaused:d,setPause:c}},a)}e.exports=a}),null);
__d("StoriesViewerSuspenseEndCardContext",["React"],(function(a,b,c,d,e,f){"use strict";a={shouldShowEndCard:!1};e.exports=b("React").createContext(a)}),null);
__d("useStoriesSuspenseContuxActions",["CometInteractionTracing","CometInteractionTracingQuickLogModule","InteractionClass","QuickPerformanceLogger","React","StoriesConstants","StoriesEnums","StoriesLoggingConstants","StoriesQuickLogModule","StoriesSuspenseBucketDataContext","StoriesViewerSuspenseEventEmitterContext"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useCallback,h=b("React").useContext,i=b("StoriesEnums").NAV_DIRECTIONS;function a(a){__p&&__p();var c=a.logger,d=a.cardIndex,e=a.isLastCard,f=a.isLastBucket,j=a.isFirstBucket,k=a.setCardIndex;a=a.setLastCard;var l=h(b("StoriesViewerSuspenseEventEmitterContext")),m=l.requestBucketTransition;l=h(b("StoriesSuspenseBucketDataContext"));var n=l.setNavigationDirection,o=d===0&&j,p=e&&f,q=g(function(a,b){if(d<0&&o)return;b!=null&&c.storyNavigationLog(b);k(a)},[d,o,c,k]);l=g(function(a,c){var e=a===i.NEXT_CARD?d+1:d-1,f=a===i.NEXT_CARD?i.NEXT_BUCKET:i.PREV_BUCKET,g=p&&a===i.NEXT_CARD;a=o&&a===i.PREV_CARD;if(g||a)return;b("QuickPerformanceLogger").markerEnd(b("StoriesQuickLogModule").STORY_VIEWER_THREAD_TRANSITION_TTI_WWW,b("StoriesConstants").QPL.CANCEL);b("QuickPerformanceLogger").markerStart(b("StoriesQuickLogModule").STORY_VIEWER_THREAD_TRANSITION_TTI_WWW);b("CometInteractionTracing").trace(b("CometInteractionTracingQuickLogModule").STORY_VIEWER_THREAD_TRANSITION,function(a){n(f),q(e,c)},b("InteractionClass").FLUID,"INTERACTION")},[d,q,o,p,n]);e=g(function(a,d){d===void 0&&(d=!1);d&&c.storyNavigationLog(a===i.NEXT_BUCKET?b("StoriesLoggingConstants").NAVIGATION_GESTURE.SWIPE_RIGHT:b("StoriesLoggingConstants").NAVIGATION_GESTURE.SWIPE_LEFT);if(a===i.NEXT_BUCKET&&f)return;if(a===i.PREV_BUCKET&&j)return;b("QuickPerformanceLogger").annotateMarkerString(b("StoriesQuickLogModule").STORY_VIEWER_THREAD_TRANSITION_TTI_WWW,"TRANSITION_TYPE","BUCKET");n(a);m(a)},[j,f,c,m,n]);return{cardIndexChanged:q,performBucketNavigation:e,performCardNavigation:l,setLastCard:a}}e.exports=a}),null);
__d("StoriesSuspensePendingRefetchBucketIDsContext",["React"],(function(a,b,c,d,e,f){"use strict";a={setShouldRefetchSelfBucket:function(){}};e.exports=b("React").createContext(a)}),null);
__d("useStoriesSuspenseRefetchOnPost",["requireCond","FBLogger","React","StoriesSuspensePendingRefetchBucketIDsContext","WebPixelRatio","setTimeout","cr:809609"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useEffect,h=b("React").useState,i=3e3;function a(a,c,d){__p&&__p();d===void 0&&(d=!0);var e=h(!1),f=e[0],j=e[1];e=b("React").useContext(b("StoriesSuspensePendingRefetchBucketIDsContext"));var k=e.setShouldRefetchSelfBucket;g(function(){d&&k(!1)},[d,k]);g(function(){var e=null;b("cr:809609")!=null&&(e=b("cr:809609")({onPostStarted:function(){j(!0)},onPostSucceeded:function(e){e&&b("FBLogger")("fbstories").warn("User bucket fetch failed: %s",e.toString()),a!=null&&(d?b("setTimeout")(function(){c({id:a,scale:b("WebPixelRatio").get()},{fetchPolicy:"network-only"}),j(!1)},i):(k(!0),j(!1)))}}));return function(){e!=null&&e()}},[a,d,c,k]);return f}e.exports=a}),null);
__d("useStoriesSuspenseReshareListener",["JSScheduler","React","StoriesViewerSuspenseEventEmitterContext","WebPixelRatio"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("React").useContext,h=b("React").useEffect;function a(a,c,d){d===void 0&&(d=!1);var e=g(b("StoriesViewerSuspenseEventEmitterContext")),f=e.listenToReshareRequest;h(function(){var e=function(e){a!=null&&d&&b("JSScheduler").next(function(){c({id:a,scale:b("WebPixelRatio").get()},{fetchPolicy:"network-only"})})};return f(function(){return e.apply(void 0,arguments)})},[a,d,f,c])}e.exports=a}),null);
__d("StoriesSuspenseContentPane.react",["CometErrorBoundary.react","CometToastBridge.react","QuickPerformanceLogger","React","StoriesActorContext","StoriesRelay","StoriesBluePageTransitionListener.react","StoriesBucketError.react","StoriesConstants","StoriesGating","StoriesLoggerContext","StoriesQuickLogModule","StoriesSuspenseBackgroundDarkeningLayer.react","StoriesSuspenseBucketTransitionView.react","StoriesSuspenseContentSlidingTransition.react","StoriesSuspenseContuxActionsContext","StoriesSuspenseContuxContext","StoriesSuspenseBucketDataContext","StoriesViewerSuspenseEndCardContext","StoriesSuspenseEmptyBucketError.react","StoriesSuspenseFeedback.react","StoriesSuspenseNavigationButtons.react","StoriesSuspensePauseContextProvider.react","StoriesTestID","StoriesViewerFooter.react","stylex","useStoriesLogger","useStoriesSuspenseContentDataSelectors","useStoriesSuspenseContuxActions","StorieslwrPlaybackContextProvider.react","StoriesSuspenseNullStateContext","StoriesUnselected.react","StoriesEnums","useStoriesSuspenseRefetchOnPost","useStoriesSuspenseReshareListener","StoriesSuspenseContentPane_bucket.graphql","StoriesSuspenseContentPane_LWRAnimations.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("StoriesRelay").graphql;var h=b("StoriesRelay").useFragment,i=b("StoriesRelay").useRefetchableFragment,j=b("React").useState,k=b("React").useContext,l=b("React").useEffect,m=b("React").useRef,n=b("StoriesEnums").EMPTY_BUCKET_TYPES,o=function(){return b("StoriesSuspenseContentPane_bucket.graphql")};function a(a){__p&&__p();var c,d=a.LWRAnimations,e=a.bucket;a=a.initialCardIndex;a=j(a);var f=a[0];a=a[1];var p=j(!1),q=p[0];p=p[1];var r=j(null),s=r[0],t=r[1];r=k(b("StoriesSuspenseBucketDataContext"));r=r.bucketData;var u=r.bucketID,v=r.isFirstBucket,w=r.isLastBucket;r=r.bucketIndex;var x=k(b("StoriesViewerSuspenseEndCardContext"));x=x.shouldShowEndCard;var y=b("React").useContext(b("StoriesActorContext"));y=y.actorID;d=h(g||(g=function(){return b("StoriesSuspenseContentPane_LWRAnimations.graphql")}),d);e=i(o,e);var z=e[0];e=e[1];r=b("useStoriesLogger")({bucketIndex:r,cardIndex:f},z);v=b("useStoriesSuspenseContuxActions")({cardIndex:f,isFirstBucket:v,isLastBucket:w,isLastCard:q,logger:r,setCardIndex:a,setLastCard:p});a=m(null);p=b("useStoriesSuspenseContentDataSelectors")(z,f);p=p.getCurrentCardID;c=(z==null?void 0:(c=z.story_bucket_owner)==null?void 0:c.id)===y;b("useStoriesSuspenseRefetchOnPost")(u,e,c);var A=p();b("useStoriesSuspenseReshareListener")(u,e,c);l(function(){A!=null&&t(null)},[A]);y={cardIndex:f,isFirstCard:f===0,isLastCard:q};p=x&&q&&w;s===n.UNSELECTED?e=b("React").createElement(b("StoriesUnselected.react"),null):s!=null&&(s===n.SELF_BUCKET||s===n.FRIEND_BUCKET)?(b("QuickPerformanceLogger").markerPoint(b("StoriesQuickLogModule").STORY_VIEWER_LOAD_TTI_V2_WWW,"empty buckets"),b("QuickPerformanceLogger").markerEnd(b("StoriesQuickLogModule").STORY_VIEWER_LOAD_TTI_V2_WWW,b("StoriesConstants").QPL.SUCCESS),e=b("React").createElement(b("StoriesSuspenseEmptyBucketError.react"),{emptyBucketType:s})):e=b("React").createElement(b("React").Fragment,null,b("React").createElement(b("StoriesBluePageTransitionListener.react"),null),b("React").createElement(b("StoriesSuspenseContentSlidingTransition.react"),{bucket:z},b("React").createElement("div",{className:"k4urcfbm datstx6m",id:"stories_viewer_background"}),b("React").createElement(b("StoriesSuspenseBackgroundDarkeningLayer.react"),{isShowingEndCard:p}),b("React").createElement("div",{className:"k4urcfbm kr520xx4 j9ispegn pmk7jnqg taijpn5t datstx6m j83agx80 bp9cbjyn","data-testid":b("StoriesTestID").VIEWER_CONTENT_PANE,ref:a},b("React").createElement(b("StorieslwrPlaybackContextProvider.react"),{lwrPlaybackContainerRef:a},b("React").createElement(b("StoriesSuspenseNavigationButtons.react"),null,b("React").createElement("div",{className:"l9j0dhe7 taijpn5t datstx6m cbu4d94t j83agx80 bp9cbjyn"},b("React").createElement(b("StoriesSuspenseBucketTransitionView.react"),{animations:d,bucket:z,bucketID:u}),!b("StoriesGating").isComet()&&b("React").createElement("div",{className:"k4urcfbm pmk7jnqg dati1w0a ihqw7lf3 hv4rvrfc jb3vyjys taijpn5t j83agx80 rq0escxv hrjtxlhn bp9cbjyn"},b("React").createElement("div",{className:"stjgntxs ni8dbmo4 teirxh3b"},b("React").createElement(b("CometToastBridge.react"),null))),b("React").createElement(b("StoriesViewerFooter.react"),null,!p&&b("React").createElement(b("StoriesSuspenseFeedback.react"),{LWRAnimations:d,bucket:z}))))))));return b("React").createElement(b("StoriesSuspenseNullStateContext").Provider,{value:{setNullStateType:t}},b("React").createElement(b("StoriesLoggerContext").Provider,{value:{logger:r}},b("React").createElement(b("StoriesSuspensePauseContextProvider.react"),null,b("React").createElement(b("StoriesSuspenseContuxContext").Provider,{value:y},b("React").createElement(b("StoriesSuspenseContuxActionsContext").Provider,{value:v},b("React").createElement(b("CometErrorBoundary.react"),{fallback:function(a){var c;return b("React").createElement(b("StoriesBucketError.react"),{bucketID:u,cardID:(c=A)!=null?c:"",error:a})}},e))))))}e.exports=a}),null);
__d("StoriesSuspenseContentPanePlaceholder.react",["React","StoriesBucketLoadingView.react","stylex","useStoriesViewerDimensions"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=a.isNullState;c=c===void 0?!1:c;babelHelpers.objectWithoutPropertiesLoose(a,["isNullState"]);a=b("useStoriesViewerDimensions")();return c?null:b("React").createElement("div",{className:"kr520xx4 j9ispegn pmk7jnqg stjgntxs ni8dbmo4 taijpn5t n7fi1qx3 j83agx80 i09qtzwb ernmaksk bp9cbjyn"},b("React").createElement("div",{className:"k4urcfbm kr520xx4 j9ispegn pmk7jnqg taijpn5t datstx6m j83agx80 bp9cbjyn"},b("React").createElement("div",{className:"l9j0dhe7 taijpn5t datstx6m cbu4d94t j83agx80 bp9cbjyn"},b("React").createElement("div",{className:"msbwk0y7 flx89l3n ms05siws kr520xx4 pmk7jnqg stjgntxs ni8dbmo4 puxov6c6 r893ighp ozuftl9m n851cfcs tvfksri0 n1l5q3vz btwxx1t3 j83agx80 enl131ya g5ia77u1",style:a},b("React").createElement(b("StoriesBucketLoadingView.react"),null)))))}e.exports=a}),null);
__d("StoriesSuspenseContentPaneRoot.react",["QuickPerformanceLogger","React","StoriesRelay","StoriesActorContext","StoriesQuickLogModule","StoriesSuspensePendingRefetchBucketIDsContext","StoriesSuspenseContentPane.react","WebFunnelLogger","WebPixelRatio","stylex","StoriesSuspenseContentPaneRootQuery.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("StoriesRelay").graphql;var h=b("StoriesRelay").useQuery,i=b("React").useEffect,j=b("React").useRef,k=b("React").useState;function a(a){__p&&__p();var c=a.bucketID,d=a.initialBucketID,e=a.initialCardID,f=a.traySessionID;a=k(!1);var l=a[0];a=a[1];var m=j(null);l=l&&m.current===c?"network-only":"store-or-network";c=h(g||(g=function(){return b("StoriesSuspenseContentPaneRootQuery.graphql")}),{bucketID:c,initialBucketID:d,scale:b("WebPixelRatio").get()},{fetchPolicy:l});i(function(){var a;new(b("WebFunnelLogger"))("FBStoriesWebTrayViewerV2FunnelDefinition").setSessionKey((a=f)!=null?a:"null").setAction("Viewer Loaded").markEnd().log();b("QuickPerformanceLogger").markerPoint(b("StoriesQuickLogModule").STORY_VIEWER_LOAD_TTI_V2_WWW,"viewer loaded")},[f]);d=c==null?void 0:(d=c.initialBucket)==null?void 0:(l=d.unified_stories)==null?void 0:l.edges;l=c==null?void 0:(l=c.initialBucket)==null?void 0:(l=l.first_story_to_show)==null?void 0:l.id;var n=e!=null&&e!==""?e:l;e=d&&n!=null?d.findIndex(function(a){return((a=a.node)==null?void 0:a.id)===n}):-1;l=c==null?void 0:(l=c.viewer)==null?void 0:(d=l.actor)==null?void 0:d.id;if(l===(c==null?void 0:(d=c.bucket)==null?void 0:(d=d.story_bucket_owner)==null?void 0:d.id)){m.current=c==null?void 0:(d=c.bucket)==null?void 0:d.id}return b("React").createElement("div",{className:"kr520xx4 j9ispegn pmk7jnqg stjgntxs ni8dbmo4 taijpn5t n7fi1qx3 j83agx80 i09qtzwb ernmaksk bp9cbjyn"},b("React").createElement(b("StoriesActorContext").Provider,{value:{actorID:l}},b("React").createElement(b("StoriesSuspensePendingRefetchBucketIDsContext").Provider,{value:{setShouldRefetchSelfBucket:a}},b("React").createElement(b("StoriesSuspenseContentPane.react"),{LWRAnimations:c,bucket:c==null?void 0:c.bucket,initialCardIndex:e}))))}e.exports=a}),null);
__d("StoriesSuspenseViewerKeyboardListener.react",["fbt","CometComponentWithKeyCommands.react","CometKeys","React","StoriesSuspenseKeyboardContext","StoriesTestID","stylex"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("React").useCallback,i=b("React").useEffect,j=b("React").useRef,k={wrapper:{height:"datstx6m",width:"k4urcfbm"}},l=g._("View previous story"),m=g._("View previous person's story"),n=g._("View next story"),o=g._("View next person's story"),p=g._("Pause story"),q=g._("Close story");function a(a){__p&&__p();a=a.children;var c=j([]),d=b("React").useMemo(function(){var a=function(a){return{command:a,handler:function(){c.current.forEach(function(b){return b(a)})}}};return[babelHelpers["extends"]({},a({key:b("CometKeys").LEFT}),{description:l}),babelHelpers["extends"]({},a({key:b("CometKeys").LEFT,shift:!0}),{description:m}),babelHelpers["extends"]({},a({key:b("CometKeys").UP}),{description:l}),babelHelpers["extends"]({},a({key:b("CometKeys").UP,shift:!0}),{description:m}),babelHelpers["extends"]({},a({key:b("CometKeys").RIGHT}),{description:n}),babelHelpers["extends"]({},a({key:b("CometKeys").RIGHT,shift:!0}),{description:o}),babelHelpers["extends"]({},a({key:b("CometKeys").DOWN}),{description:n}),babelHelpers["extends"]({},a({key:b("CometKeys").DOWN,shift:!0}),{description:o}),babelHelpers["extends"]({},a({key:b("CometKeys").SPACE}),{description:p}),babelHelpers["extends"]({},a({key:b("CometKeys").ESCAPE}),{description:q,isHiddenCommand:!0,shouldStopPropagation:!1})]},[]),e=j(null);i(function(){window.setTimeout(function(){e.current&&e.current.focus()})},[]);var f=h(function(a){var b=c.current;b.push(a);return function(){var c=b.indexOf(a);c>-1&&b.splice(c,1)}},[c]);return b("React").createElement(b("CometComponentWithKeyCommands.react"),{commandConfigs:d,xstyle:k.wrapper},b("React").createElement(b("StoriesSuspenseKeyboardContext").Provider,{value:{addSubscriber:f}},b("React").createElement("div",{className:b("stylex")(k.wrapper),"data-testid":b("StoriesTestID").KEYBOARD_LAYER,ref:e,tabIndex:-1},a)))}e.exports=a}),null);